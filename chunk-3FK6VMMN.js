import{$ as N,A as l,B as f,C as b,D as y,E as h,F as v,H as C,K as x,L as w,N as A,P as _,Z as S,_ as k,aa as Q,ba as M,ca as F,ia as E,ib as I,o,p as m,q as u,r as c,s,t as i,u as a,v as p,x as g}from"./chunk-HEWK7BMS.js";var H=(r,t)=>({"text-end":r,"text-start":t});function P(r,t){if(r&1&&(i(0,"div",15)(1,"div",16)(2,"span",17),l(3),a()()()),r&2){let e=t.$implicit;s("ngClass",C(3,H,e.sender==="user",e.sender==="ai")),o(),s("ngClass",e.sender==="user"?"alert alert-primary d-inline-block px-4 py-2 mb-2":"alert alert-info d-inline-block px-4 py-2 mb-2"),o(2),f(e.text)}}var T=class r{constructor(t){this.http=t}userQuery="";loading=!1;conversation=[];askAI(){if(!this.userQuery.trim())return;let t=this.userQuery.trim();this.conversation.push({text:t,sender:"user"}),this.loading=!0,this.http.post("https://cookshareweb.onrender.com/api/openai",{prompt:t}).subscribe({next:e=>{this.conversation.push({text:e.reply,sender:"ai"}),this.userQuery="",this.loading=!1},error:e=>{console.error("Error:",e),this.conversation.push({text:"Hubo un error al contactar con el asistente.",sender:"ai"}),this.loading=!1}})}static \u0275fac=function(e){return new(e||r)(m(_))};static \u0275cmp=u({type:r,selectors:[["app-ai-assistant"]],decls:19,vars:5,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-body","p-5"],[1,"mb-4","text-center","fw-bold",2,"background","linear-gradient(90deg, #ff9966, #ff5e62)","-webkit-background-clip","text","color","transparent"],[2,"font-size","1.2em"],[3,"ngSubmit"],[1,"mb-3"],["for","userQuery",1,"form-label","fw-semibold"],["name","userQuery","id","userQuery","rows","3","placeholder","EJ. Tengo arroz y pollo, \xBFQue puedo cocinar?",1,"form-control","rounded-3","shadow-sm",3,"ngModelChange","ngModel","disabled"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-lg","rounded-pill",3,"disabled"],[1,"chat-history","mt-4","mb-2",2,"max-height","350px","overflow-y","auto"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[2,"max-width","80%","word-break","break-word","border-radius","0px","padding","16px","background","#e0f7fa","margin","8px 0",3,"ngClass"],[2,"white-space","pre-line"]],template:function(e,n){e&1&&(p(0,"app-navbar"),i(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),l(7,"Asistente IA "),p(8,"span",6),a(),i(9,"form",7),g("ngSubmit",function(){return n.askAI()}),i(10,"div",8)(11,"label",9),l(12,"Cuentale al asistente tus necesidades o lo que necesitas:"),a(),i(13,"textarea",10),v("ngModelChange",function(d){return h(n.userQuery,d)||(n.userQuery=d),d}),a()(),i(14,"div",11)(15,"button",12),l(16),a()()(),i(17,"div",13),c(18,P,4,6,"div",14),a()()()()()()),e&2&&(o(13),y("ngModel",n.userQuery),s("disabled",n.loading),o(2),s("disabled",n.loading),o(),b(" ",n.loading?"Pensando...":"Preguntar"," "),o(2),s("ngForOf",n.conversation))},dependencies:[A,x,w,E,F,S,k,N,M,Q,I],encapsulation:2})};export{T as AiAssistantComponent};

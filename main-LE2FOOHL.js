import{a as T,b as ke,c as Ee,d as I,e as Te,f as B,g as G,h as De,i as Le,j as h,k as Ne,l as H}from"./chunk-5HFAIMXN.js";import{$ as ee,A as s,B as p,C as ue,D as x,E as C,F as y,G as P,I as fe,J as ge,K as J,L as z,M,N as S,O as he,Q as _e,R as be,S as ve,T as $,U as xe,V as O,W as k,X as Ce,Y as E,Z as q,_ as j,a as R,aa as te,ab as we,b as me,ba as V,bb as Pe,c as b,ca as ie,db as Ie,ea as ye,fa as Me,fb as Re,ga as Se,gb as Oe,ha as ne,hb as U,ia as W,ib as Y,j as N,k as F,n as w,o as r,p as g,q as v,r as f,s as l,t as i,u as o,v as u,w as A,x as _,y as m,z as K}from"./chunk-HEWK7BMS.js";var oe=class t{title="cookshare-ci";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,a){e&1&&u(0,"router-outlet")},dependencies:[xe],encapsulation:2})};function Ue(t,n){if(t&1&&(i(0,"div",17),s(1),o()),t&2){let e=m();r(),p(e.error)}}var Z=class t{constructor(n,e){this.authService=n;this.router=e}email="";password="";error="";onLogin(){return b(this,null,function*(){try{yield this.authService.login(this.email,this.password),this.router.navigate(["/feed"])}catch(n){let e=n.code||n.message||"";this.error=this.traducirErrorFirebase(e)}})}traducirErrorFirebase(n){return n.includes("user-not-found")?"No existe una cuenta con este correo":n.includes("wrong-password")?"La contrase\xF1a es incorrecta":n.includes("invalid-email")?"El correo no es v\xE1lido":n.includes("too-many-requests")?"Demasiados intentos. Intenta m\xE1s tarde":"Error al iniciar sesi\xF3n"}static \u0275fac=function(e){return new(e||t)(g(U),g(O))};static \u0275cmp=v({type:t,selectors:[["app-login"]],decls:27,vars:3,consts:[[1,"auth-container"],[1,"auth-card","fade-in-up"],[1,"text-center","mb-4"],[1,"app-title"],[1,"form-title"],[1,"subtitle"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","autocomplete","username",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","autocomplete","current-password",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-morado","w-100"],[1,"bi","bi-box-arrow-in-right"],[1,"text-center","mt-3"],["routerLink","/register",1,"link-morado"],[1,"alert","alert-danger"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"CookShare"),o(),i(5,"h2",4),s(6,"Iniciar sesi\xF3n"),o(),i(7,"p",5),s(8,"\xA1Bienvenido de nuevo a la red social de comida!"),o()(),i(9,"form",6),_("ngSubmit",function(){return a.onLogin()}),i(10,"div",7)(11,"label",8),s(12,"Correo electr\xF3nico"),o(),i(13,"input",9),y("ngModelChange",function(c){return C(a.email,c)||(a.email=c),c}),o()(),i(14,"div",7)(15,"label",10),s(16,"Contrase\xF1a"),o(),i(17,"input",11),y("ngModelChange",function(c){return C(a.password,c)||(a.password=c),c}),o()(),f(18,Ue,2,1,"div",12),i(19,"button",13),u(20,"i",14),s(21," Entrar "),o()(),i(22,"div",15)(23,"span"),s(24,"\xBFNo tienes cuenta?"),o(),i(25,"a",16),s(26,"Reg\xEDstrate"),o()()()()),e&2&&(r(13),x("ngModel",a.email),r(4),x("ngModel",a.password),r(),l("ngIf",a.error))},dependencies:[S,M,W,ie,q,j,ee,ne,V,te,E,k],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#a259c6,#6d28d9)}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 6px 32px #6c008026;padding:2.5rem 2rem;width:100%;max-width:400px}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#a259c6}.app-title[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;font-weight:700;color:#6d28d9;margin-bottom:.5rem}.form-title[_ngcontent-%COMP%]{color:#a259c6;margin-bottom:.25rem}.subtitle[_ngcontent-%COMP%]{color:#6d28d9;font-size:1rem;margin-bottom:1.5rem}.btn-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;border:none;font-weight:600;transition:background .2s}.btn-morado[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6d28d9,#a259c6);color:#fff}.link-morado[_ngcontent-%COMP%]{color:#a259c6;font-weight:500;text-decoration:none}.link-morado[_ngcontent-%COMP%]:hover{color:#6d28d9;text-decoration:underline}.fade-in-up[_ngcontent-%COMP%]{opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_fadeInUp .7s cubic-bezier(.23,1,.32,1) forwards}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}}"]})};function Be(t,n){if(t&1&&(i(0,"div",21),s(1),o()),t&2){let e=m();r(),p(e.error)}}var se=class t{constructor(n,e,a){this.authService=n;this.router=e;this.db=a}fullname="";username="";email="";password="";error="";onRegister(){return b(this,null,function*(){if(!this.fullname||!this.username||!this.email||!this.password){this.error="Completa todos los campos";return}try{let n=h(this.db,"usernames/"+this.username);if((yield I(n)).exists()){this.error="El nombre de usuario ya est\xE1 en uso";return}let d=(yield this.authService.register(this.email,this.password)).user.uid,c=new Date().toISOString(),D={id:d,nombre:this.fullname,username:this.username,email:this.email,fotoPerfil:"",fechaRegistro:c,seguidores:0,seguidos:0,recetas:0,recetasFavoritas:[]};yield H(h(this.db,"usuarios/"+d),D),yield H(h(this.db,"usernames/"+this.username),d),this.router.navigate(["/login"])}catch(n){let e=n.code||n.message||"";this.error=this.traducirErrorFirebase(e)}})}traducirErrorFirebase(n){return n.includes("email-already-in-use")?"Este correo ya est\xE1 registrado":n.includes("invalid-email")?"El correo no es v\xE1lido":n.includes("weak-password")?"La contrase\xF1a debe tener al menos 6 caracteres":n.includes("operation-not-allowed")?"Registro de correo deshabilitado":"Error al registrar el usuario"}static \u0275fac=function(e){return new(e||t)(g(U),g(O),g(T))};static \u0275cmp=v({type:t,selectors:[["app-register"]],decls:35,vars:5,consts:[[1,"auth-container"],[1,"auth-card","fade-in-up"],[1,"text-center","mb-4"],[1,"app-title"],[1,"form-title"],[1,"subtitle"],[3,"ngSubmit"],[1,"mb-3"],["for","fullname",1,"form-label"],["type","text","id","fullname","name","fullname","required","","autocomplete","name",1,"form-control",3,"ngModelChange","ngModel"],["for","username",1,"form-label"],["type","text","id","username","name","username","required","","autocomplete","username",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","autocomplete","email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-morado","w-100"],[1,"bi","bi-person-plus"],[1,"text-center","mt-3"],["routerLink","/login",1,"link-morado"],[1,"alert","alert-danger"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"CookShare"),o(),i(5,"h2",4),s(6,"Crear cuenta"),o(),i(7,"p",5),s(8,"\xA1\xDAnete y comparte tus mejores recetas!"),o()(),i(9,"form",6),_("ngSubmit",function(){return a.onRegister()}),i(10,"div",7)(11,"label",8),s(12,"Nombre completo"),o(),i(13,"input",9),y("ngModelChange",function(c){return C(a.fullname,c)||(a.fullname=c),c}),o()(),i(14,"div",7)(15,"label",10),s(16,"Usuario"),o(),i(17,"input",11),y("ngModelChange",function(c){return C(a.username,c)||(a.username=c),c}),o()(),i(18,"div",7)(19,"label",12),s(20,"Correo electr\xF3nico"),o(),i(21,"input",13),y("ngModelChange",function(c){return C(a.email,c)||(a.email=c),c}),o()(),i(22,"div",7)(23,"label",14),s(24,"Contrase\xF1a"),o(),i(25,"input",15),y("ngModelChange",function(c){return C(a.password,c)||(a.password=c),c}),o()(),f(26,Be,2,1,"div",16),i(27,"button",17),u(28,"i",18),s(29," Registrarse "),o()(),i(30,"div",19)(31,"span"),s(32,"\xBFYa tienes cuenta?"),o(),i(33,"a",20),s(34,"Inicia sesi\xF3n"),o()()()()),e&2&&(r(13),x("ngModel",a.fullname),r(4),x("ngModel",a.username),r(4),x("ngModel",a.email),r(4),x("ngModel",a.password),r(),l("ngIf",a.error))},dependencies:[S,M,W,ie,q,j,ee,ne,V,te,E,k],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#a259c6,#6d28d9)}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 6px 32px #6c008026;padding:2.5rem 2rem;width:100%;max-width:400px}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#a259c6}.app-title[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;font-weight:700;color:#6d28d9;margin-bottom:.5rem}.form-title[_ngcontent-%COMP%]{color:#a259c6;margin-bottom:.25rem}.subtitle[_ngcontent-%COMP%]{color:#6d28d9;font-size:1rem;margin-bottom:1.5rem}.btn-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;border:none;font-weight:600;transition:background .2s}.btn-morado[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6d28d9,#a259c6);color:#fff}.link-morado[_ngcontent-%COMP%]{color:#a259c6;font-weight:500;text-decoration:none}.link-morado[_ngcontent-%COMP%]:hover{color:#6d28d9;text-decoration:underline}.fade-in-up[_ngcontent-%COMP%]{opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_fadeInUp .7s cubic-bezier(.23,1,.32,1) forwards}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}}"]})};var Ge=t=>["/receta",t];function Ye(t,n){t&1&&(i(0,"div",16),u(1,"div",17),o())}function Ke(t,n){t&1&&(i(0,"div",18),s(1," No hay recetas disponibles. "),o())}function He(t,n){if(t&1&&(i(0,"div",21)(1,"a",22),u(2,"img",23),i(3,"div",24)(4,"h6",25),s(5),o(),i(6,"span",26),s(7),o(),i(8,"p",27),s(9),o()()()()),t&2){let e=n.$implicit;r(),l("routerLink",P(7,Ge,e.id)),r(),K("alt","Imagen de ",e.titulo||e.nombre,""),l("src",e.imagenReceta||"https://via.placeholder.com/300x180?text=Sin+imagen",w),r(3),p(e.titulo||e.nombre||"Receta sin t\xEDtulo"),r(2),p(e.categoria||"Sin categor\xEDa"),r(2),p(e.descripcion||"Sin descripci\xF3n.")}}function Qe(t,n){if(t&1&&(i(0,"div",19),f(1,He,10,9,"div",20),o()),t&2){let e=m();r(),l("ngForOf",e.recetas)}}var le=class t{constructor(n,e){this.db=n;this.router=e}recetas=[];todasLasRecetas=[];loading=!0;busquedaNombre="";busquedaTipo="";tiposReceta=["Postres","Platos principales","Bebidas","Entrantes","Sopas","Ensaladas"];ngOnInit(){return b(this,null,function*(){try{let n=h(this.db,"recipes"),e=yield I(n);e.exists()?(this.todasLasRecetas=Object.entries(e.val()).map(([a,d])=>R({id:a},d)),this.recetas=[...this.todasLasRecetas]):(this.todasLasRecetas=[],this.recetas=[])}catch{this.todasLasRecetas=[],this.recetas=[]}this.loading=!1})}filtrarRecetas(){this.recetas=this.todasLasRecetas.filter(n=>{let e=this.busquedaNombre?(n.titulo||n.nombre||"").toLowerCase().includes(this.busquedaNombre.toLowerCase()):!0,a=this.busquedaTipo?(n.categoria||n.tipo||"").toLowerCase()===this.busquedaTipo.toLowerCase():!0;return e&&a})}verDetalle(n){let e=n.id||n.id_receta;e&&this.router.navigate(["/receta",e])}static \u0275fac=function(e){return new(e||t)(g(T),g(O))};static \u0275cmp=v({type:t,selectors:[["app-main"]],decls:24,vars:5,consts:[[3,"tipoSeleccionado"],[1,"explore-container"],[1,"explore-title"],[1,"explore-searchbar"],["type","text","placeholder","Buscar por nombre...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","Postres"],["value","Platos principales"],["value","Bebidas"],["value","Entrantes"],["value","Sopas"],["value","Ensaladas"],["class","text-center my-5",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","explore-grid",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"alert","alert-info","text-center"],[1,"explore-grid"],["class","explore-card",4,"ngFor","ngForOf"],[1,"explore-card"],[1,"explore-link",3,"routerLink"],[1,"explore-img",3,"src","alt"],[1,"explore-info"],[1,"explore-card-title"],[1,"badge","bg-morado","mt-1","mb-1"],[1,"explore-card-desc"]],template:function(e,a){e&1&&(i(0,"app-navbar",0),_("tipoSeleccionado",function(){return a.filtrarRecetas()}),o(),i(1,"div",1)(2,"h2",2),s(3,"Explora Recetas"),o(),i(4,"div",3)(5,"input",4),y("ngModelChange",function(c){return C(a.busquedaNombre,c)||(a.busquedaNombre=c),c}),_("input",function(){return a.filtrarRecetas()}),o(),i(6,"select",5),y("ngModelChange",function(c){return C(a.busquedaTipo,c)||(a.busquedaTipo=c),c}),_("change",function(){return a.filtrarRecetas()}),i(7,"option",6),s(8,"Todos los tipos"),o(),i(9,"option",7),s(10,"Postres"),o(),i(11,"option",8),s(12,"Platos principales"),o(),i(13,"option",9),s(14,"Bebidas"),o(),i(15,"option",10),s(16,"Entrantes"),o(),i(17,"option",11),s(18,"Sopas"),o(),i(19,"option",12),s(20,"Ensaladas"),o()()(),f(21,Ye,2,0,"div",13)(22,Ke,2,0,"div",14)(23,Qe,2,1,"div",15),o()),e&2&&(r(5),x("ngModel",a.busquedaNombre),r(),x("ngModel",a.busquedaTipo),r(15),l("ngIf",a.loading),r(),l("ngIf",!a.loading&&a.recetas.length===0),r(),l("ngIf",!a.loading&&a.recetas.length>0))},dependencies:[S,z,M,Y,E,k,W,Me,Se,q,ye,j,V],styles:[".explore-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:1rem}.explore-title[_ngcontent-%COMP%]{color:#a259c6;font-weight:700;margin-bottom:2rem;text-align:center;letter-spacing:1px}.explore-searchbar[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-bottom:2rem;flex-wrap:wrap}.explore-searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .explore-searchbar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{max-width:250px}.explore-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:2rem}.explore-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.2rem;box-shadow:0 2px 12px #6c008014;overflow:hidden;transition:transform .15s,box-shadow .15s;cursor:pointer;display:flex;flex-direction:column;height:100%}.explore-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 6px 24px #6c008026}.explore-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:flex;flex-direction:column;height:100%}.explore-img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;background:#eee}.explore-info[_ngcontent-%COMP%]{padding:1rem 1.2rem 1.2rem;flex:1;display:flex;flex-direction:column;justify-content:flex-start}.explore-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#a259c6;margin-bottom:.3rem}.explore-card-desc[_ngcontent-%COMP%]{font-size:.97rem;color:#444;margin-bottom:0}.bg-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;font-size:.95rem;border-radius:.7rem;padding:.2rem .8rem;margin-bottom:.5rem}@media (max-width: 600px){.explore-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.2rem}.explore-searchbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})};function Xe(t,n){if(t&1){let e=A();i(0,"button",20),_("click",function(){N(e);let d=m(2);return F(d.verPerfilAutor())}),u(1,"img",21),o()}if(t&2){let e=m(2);r(),l("src",(e.receta==null?null:e.receta.fotoPerfilAutor)||e.defaultProfile,w)}}function Ze(t,n){if(t&1&&(i(0,"span",22),s(1),o()),t&2){let e=m(2);r(),ue(" \u23F1 ",e.receta.tiempo," ")}}function Je(t,n){if(t&1&&(i(0,"li"),s(1),o()),t&2){let e=n.$implicit;r(),p(e)}}function $e(t,n){if(t&1&&(i(0,"ul"),f(1,Je,2,1,"li",23),o()),t&2){let e=m(2);r(),l("ngForOf",e.receta.ingredientes)}}function et(t,n){if(t&1&&(i(0,"span"),s(1),o()),t&2){let e=m(2);r(),p(e.receta.ingredientes)}}function tt(t,n){if(t&1&&(i(0,"li"),s(1),o()),t&2){let e=n.$implicit;r(),p(e)}}function it(t,n){if(t&1&&(i(0,"ol"),f(1,tt,2,1,"li",23),o()),t&2){let e=m(2);r(),l("ngForOf",e.receta.pasos)}}function nt(t,n){if(t&1&&(i(0,"span"),s(1),o()),t&2){let e=m(2);r(),p(e.receta.pasos)}}function ot(t,n){if(t&1){let e=A();i(0,"div",2)(1,"div",3),u(2,"img",4),o(),i(3,"div",5),f(4,Xe,2,1,"button",6),i(5,"button",7),_("click",function(){N(e);let d=m();return F(d.toggleLike())}),u(6,"i",8),o(),i(7,"span",9),s(8),o()(),i(9,"div",10)(10,"h2",11),s(11),o(),i(12,"div",12)(13,"span",13),s(14),o(),f(15,Ze,2,1,"span",14),o(),i(16,"p",15),s(17),o(),u(18,"hr",16),i(19,"h5",17),s(20,"Ingredientes"),o(),f(21,$e,2,1,"ul",18)(22,et,2,1,"span",18),i(23,"h5",19),s(24,"Pasos"),o(),f(25,it,2,1,"ol",18)(26,nt,2,1,"span",18),o()()}if(t&2){let e=m();r(2),l("src",e.receta.imagenReceta,w),r(2),l("ngIf",e.receta==null?null:e.receta.id_usuario),r(2),l("ngClass",e.isLiked?"bi-heart-fill":"bi-heart"),r(2),p(e.likesCount),r(3),p((e.receta==null?null:e.receta.titulo)||(e.receta==null?null:e.receta.nombre)),r(3),p(e.receta==null?null:e.receta.categoria),r(),l("ngIf",e.receta==null?null:e.receta.tiempo),r(2),p(e.receta.descripcion),r(4),l("ngIf",e.receta.ingredientes&&e.receta.ingredientes.length&&e.receta.ingredientes[0]),r(),l("ngIf",e.receta.ingredientes&&!e.receta.ingredientes.length),r(3),l("ngIf",e.receta.pasos&&e.receta.pasos.length&&e.receta.pasos[0]),r(),l("ngIf",e.receta.pasos&&!e.receta.pasos.length)}}function rt(t,n){t&1&&(i(0,"div",24),u(1,"div",25),o())}var ce=class t{constructor(n,e,a,d,c){this.route=n;this.db=e;this.auth=a;this.router=d;this.cdr=c}receta=null;loading=!0;likesCount=0;isLiked=!1;userId="";defaultProfile="https://ui-avatars.com/api/?name=User&background=a259c6&color=fff";likesRef;ngOnInit(){return b(this,null,function*(){let n=this.route.snapshot.paramMap.get("id");if(this.userId=this.auth.currentUser?.uid||"",n){let e=h(this.db,"recipes/"+n),a=yield I(e);a.exists()&&(this.receta=a.val(),this.receta.id=n,this.receta.id_usuario&&(yield this.fetchAutorInfo(this.receta.id_usuario)),this.setupLikes())}this.loading=!1})}fetchAutorInfo(n){return b(this,null,function*(){let e=h(this.db,"usuarios/"+n),a=yield I(e);if(a.exists()){let d=a.val();this.receta=me(R({},this.receta),{nombreAutor:d.nombre,fotoPerfilAutor:d.fotoPerfil&&d.fotoPerfil.trim()!==""?d.fotoPerfil:this.defaultProfile})}else this.receta=me(R({},this.receta),{nombreAutor:"Autor desconocido",fotoPerfilAutor:this.defaultProfile});this.cdr.detectChanges()})}verPerfilAutor(){this.receta?.id_usuario&&this.router.navigate(["/perfil",this.receta.id_usuario])}setupLikes(){this.receta?.id&&(this.likesRef=h(this.db,"likes/"+this.receta.id),G(this.likesRef,n=>{let e=0;n.forEach(()=>(e++,!1)),this.likesCount=e,this.isLiked=n.hasChild(this.userId)}))}toggleLike(){return b(this,null,function*(){if(!this.userId||!this.receta?.id)return;let n=h(this.db,`likes/${this.receta.id}/${this.userId}`);if(this.isLiked)yield Ne(n);else{let e=new Date().toISOString();yield H(n,{id:this.userId+"_"+this.receta.id,id_usuario:this.userId,id_receta:this.receta.id,fecha:e})}})}ngOnDestroy(){this.likesRef&&B(this.likesRef)}static \u0275fac=function(e){return new(e||t)(g($),g(T),g(Ie),g(O),g(ge))};static \u0275cmp=v({type:t,selectors:[["app-recipe-detail"]],decls:3,vars:2,consts:[["class","container mt-5 position-relative",4,"ngIf"],["class","text-center my-5",4,"ngIf"],[1,"container","mt-5","position-relative"],[1,"receta-img-wrapper","mb-3"],["alt","Imagen de la receta",1,"img-fluid","receta-img-main",3,"src"],[1,"floating-buttons","d-flex","flex-column","align-items-center"],["class","profile-btn mb-3","aria-label","Ver perfil del autor",3,"click",4,"ngIf"],["aria-label","Me gusta",1,"btn","btn-like-float","mb-2",3,"click"],[1,"bi",3,"ngClass"],[1,"likes-count"],[1,"receta-card","px-3","py-4","mt-2"],[1,"text-morado","mb-2","text-center"],[1,"text-center","mb-2"],[1,"badge","bg-morado","me-2"],["class","badge bg-light text-morado border border-morado ms-1",4,"ngIf"],[1,"receta-desc","mb-3","text-center"],[1,"my-4","border-0"],[1,"text-morado","mb-2"],[4,"ngIf"],[1,"text-morado","mt-4","mb-2"],["aria-label","Ver perfil del autor",1,"profile-btn","mb-3",3,"click"],["alt","Foto de perfil del autor",1,"profile-img-float",3,"src"],[1,"badge","bg-light","text-morado","border","border-morado","ms-1"],[4,"ngFor","ngForOf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"]],template:function(e,a){e&1&&(u(0,"app-navbar"),f(1,ot,27,12,"div",0)(2,rt,2,0,"div",1)),e&2&&(r(),l("ngIf",!a.loading&&a.receta),r(),l("ngIf",a.loading))},dependencies:[S,J,z,M,Y],styles:["body[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{background:#fff!important}.receta-card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:none;margin-top:0;position:relative;z-index:1;padding-left:0;padding-right:0}.text-morado[_ngcontent-%COMP%]{color:#a259c6}.bg-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff}.border-morado[_ngcontent-%COMP%]{border-color:#a259c6!important}.receta-img-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:220px;border-radius:1.2rem;overflow:hidden;box-shadow:0 4px 16px #6c00801a;background:#eaeaea}.receta-img-main[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:1.2rem}.floating-buttons[_ngcontent-%COMP%]{position:absolute;top:30px;right:24px;z-index:2}.profile-btn[_ngcontent-%COMP%]{border:none;background:none;padding:0;cursor:pointer;display:flex;justify-content:center}.profile-img-float[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:cover;border-radius:50%;border:3px solid #a259c6;background:#fff;box-shadow:0 2px 8px #6c00801a;transition:border-color .2s}.profile-btn[_ngcontent-%COMP%]:hover   .profile-img-float[_ngcontent-%COMP%]{border-color:#6d28d9}.btn-like-float[_ngcontent-%COMP%]{background:#fff;border:3px solid #a259c6;border-radius:50%;width:56px;height:56px;display:flex;align-items:center;justify-content:center;color:#a259c6;font-size:2rem;box-shadow:0 2px 8px #6c00801a;transition:border-color .2s,color .2s;padding:0}.btn-like-float[_ngcontent-%COMP%]:hover{border-color:#6d28d9;color:#6d28d9}.bi-heart-fill[_ngcontent-%COMP%]{color:#a259c6}.likes-count[_ngcontent-%COMP%]{color:#a259c6;font-weight:700;font-size:1.1rem;margin-top:2px;text-align:center}.receta-desc[_ngcontent-%COMP%]{color:#444;font-size:1.1rem}hr[_ngcontent-%COMP%]{border-top:1px solid #ccc}",".receta-card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%], .receta-card-h[_ngcontent-%COMP%]{border:none!important;box-shadow:0 2px 12px #6c008014}.receta-img-main[_ngcontent-%COMP%], .receta-img[_ngcontent-%COMP%], .card-img-top[_ngcontent-%COMP%], .receta-img-thumb[_ngcontent-%COMP%]{border:none!important}hr[_ngcontent-%COMP%]{border:none!important;border-top:none!important;height:1px;background:#eee;margin:1.5rem 0}"]})};var ze=t=>({active:t}),qe=t=>({"show active":t}),je=t=>["/receta",t];function at(t,n){if(t&1){let e=A();i(0,"li",10)(1,"button",11),_("click",function(){N(e);let d=m(2);return F(d.activeTab="meGustan")}),u(2,"span",12),i(3,"span",13),s(4,"Favoritas"),o()()()}if(t&2){let e=m(2);r(),l("ngClass",P(1,ze,e.activeTab==="meGustan"))}}function st(t,n){if(t&1&&(i(0,"div",23)(1,"a",24)(2,"div",25),u(3,"img",26),i(4,"div",27)(5,"h6",28),s(6),o(),i(7,"p",29),s(8),o()()()()()),t&2){let e=n.$implicit;r(),l("routerLink",P(6,je,e.id)),r(2),K("alt","Imagen de ",e.titulo||e.nombre,""),l("src",e.imagenReceta||"https://via.placeholder.com/300x180?text=Sin+imagen",w),r(3),p(e.titulo||e.nombre),r(2),p(e.descripcion)}}function lt(t,n){if(t&1&&(i(0,"div")(1,"h5",20),s(2,"Recetas publicadas"),o(),i(3,"div",21),f(4,st,9,8,"div",22),o()()),t&2){let e=m(3);r(4),l("ngForOf",e.userRecipes)}}function ct(t,n){t&1&&(i(0,"div",30),s(1,"No has publicado ninguna receta."),o())}function dt(t,n){if(t&1&&(i(0,"div",17),f(1,lt,5,1,"div",18)(2,ct,2,0,"div",19),o()),t&2){let e=m(2);l("ngClass",P(3,qe,e.activeTab==="misRecetas")),r(),l("ngIf",e.userRecipes.length>0),r(),l("ngIf",e.userRecipes.length===0)}}function mt(t,n){if(t&1&&(i(0,"div",23)(1,"a",24)(2,"div",25),u(3,"img",26),i(4,"div",27)(5,"h6",28),s(6),o(),i(7,"p",29),s(8),o()()()()()),t&2){let e=n.$implicit;r(),l("routerLink",P(6,je,e.id)),r(2),K("alt","Imagen de ",e.titulo||e.nombre,""),l("src",e.imagenReceta||"https://via.placeholder.com/300x180?text=Sin+imagen",w),r(3),p(e.titulo||e.nombre),r(2),p(e.descripcion)}}function pt(t,n){if(t&1&&(i(0,"div")(1,"h5",20),s(2,"Recetas que te gustan"),o(),i(3,"div",21),f(4,mt,9,8,"div",22),o()()),t&2){let e=m(3);r(4),l("ngForOf",e.likedRecipes)}}function ut(t,n){t&1&&(i(0,"div",30),s(1,"No tienes recetas marcadas como favoritas."),o())}function ft(t,n){if(t&1&&(i(0,"div",17),f(1,pt,5,1,"div",18)(2,ut,2,0,"div",19),o()),t&2){let e=m(2);l("ngClass",P(3,qe,e.activeTab==="meGustan")),r(),l("ngIf",e.likedRecipes.length>0),r(),l("ngIf",e.likedRecipes.length===0)}}function gt(t,n){if(t&1){let e=A();i(0,"div",2)(1,"div",3),u(2,"img",4),i(3,"h2",5),s(4),o(),i(5,"div",6)(6,"div")(7,"span",7),s(8),o(),i(9,"div",8),s(10,"Seguidores"),o()(),i(11,"div")(12,"span",7),s(13),o(),i(14,"div",8),s(15,"Seguidos"),o()()()(),i(16,"ul",9)(17,"li",10)(18,"button",11),_("click",function(){N(e);let d=m();return F(d.activeTab="misRecetas")}),u(19,"span",12),i(20,"span",13),s(21,"Mis recetas"),o()()(),f(22,at,5,3,"li",14),o(),i(23,"div",15),f(24,dt,3,5,"div",16)(25,ft,3,5,"div",16),o()()}if(t&2){let e=m();r(2),l("src",e.user.fotoPerfil||e.defaultProfile,w),r(2),p("@"+e.user.username),r(4),p(e.seguidoresCount),r(5),p(e.seguidosCount),r(5),l("ngClass",P(8,ze,e.activeTab==="misRecetas")),r(4),l("ngIf",e.isOwnProfile),r(2),l("ngIf",e.activeTab==="misRecetas"),r(),l("ngIf",e.activeTab==="meGustan"&&e.isOwnProfile)}}function ht(t,n){t&1&&(i(0,"div",31),u(1,"div",32),o())}var de=class t{constructor(n,e,a){this.route=n;this.db=e;this.authService=a}user=null;loading=!0;defaultProfile="https://ui-avatars.com/api/?name=User&background=a259c6&color=fff";seguidoresCount=0;seguidosCount=0;userRecipes=[];likedRecipes=[];isOwnProfile=!1;likesRef;userRef;userListener;recipesRef;activeTab="misRecetas";ngOnInit(){let n=this.route.snapshot.paramMap.get("id"),e=this.authService.currentUserId;n&&(this.isOwnProfile=n===e,this.userRef=h(this.db,"usuarios/"+n),this.userListener=G(this.userRef,a=>{a.exists()&&(this.user=a.val(),this.seguidoresCount=this.user.seguidores||0,this.seguidosCount=this.user.siguiendo||0),this.loading=!1}),this.recipesRef=Le(h(this.db,"recipes"),De("id_usuario"),Ee(n)),G(this.recipesRef,a=>{let d=[];a.forEach(c=>{d.push(R({id:c.key},c.val()))}),this.userRecipes=d}),this.isOwnProfile&&(this.likesRef=h(this.db,"likes"),G(this.likesRef,a=>b(this,null,function*(){let d=[];if(a.forEach(c=>{let D=c.key;c.child(e).exists()&&d.push(D)}),d.length>0){let D=(yield I(h(this.db,"recipes"))).val()||{};this.likedRecipes=d.map(L=>D[L]?R({id:L},D[L]):null).filter(L=>!!L)}else this.likedRecipes=[]}))))}ngOnDestroy(){this.userRef&&B(this.userRef),this.recipesRef&&B(this.recipesRef),this.likesRef&&B(this.likesRef)}static \u0275fac=function(e){return new(e||t)(g($),g(T),g(U))};static \u0275cmp=v({type:t,selectors:[["app-profile"]],decls:3,vars:2,consts:[["class","container mt-5",4,"ngIf"],["class","text-center my-5",4,"ngIf"],[1,"container","mt-5"],[1,"text-center"],["alt","Foto de perfil",1,"profile-img","mb-3",3,"src"],[1,"text-morado"],[1,"d-flex","justify-content-center","gap-4","mt-3"],[1,"fw-bold","text-morado",2,"font-size","1.3rem"],[2,"font-size","0.95rem"],["role","tablist",1,"nav","nav-tabs","custom-tabs","mt-4","justify-content-center"],["role","presentation",1,"nav-item"],["type","button","role","tab",1,"nav-link","tab-btn",3,"click","ngClass"],[1,"tab-icon"],[1,"tab-label"],["class","nav-item","role","presentation",4,"ngIf"],[1,"tab-content","mt-3"],["class","tab-pane fade",3,"ngClass",4,"ngIf"],[1,"tab-pane","fade",3,"ngClass"],[4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"text-morado","mb-3"],[1,"row","g-3"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4"],[1,"text-decoration-none",3,"routerLink"],[1,"card","receta-card-h"],[1,"card-img-top","receta-img-thumb",3,"src","alt"],[1,"card-body"],[1,"card-title","text-morado","mb-1"],[1,"card-text","small","text-muted","mb-0"],[1,"alert","alert-info","mt-3"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"]],template:function(e,a){e&1&&(u(0,"app-navbar"),f(1,gt,26,10,"div",0)(2,ht,2,0,"div",1)),e&2&&(r(),l("ngIf",!a.loading&&a.user),r(),l("ngIf",a.loading))},dependencies:[S,J,z,M,Y,E,k],styles:[".profile-img[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;border-radius:50%;border:4px solid #a259c6;box-shadow:0 2px 8px #6c00801a}.text-morado[_ngcontent-%COMP%]{color:#a259c6}",".receta-card-h[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #6c008014;overflow:hidden;transition:transform .15s,box-shadow .15s;cursor:pointer;height:100%;display:flex;flex-direction:column}.receta-card-h[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 6px 24px #6c008026}.receta-img-thumb[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;background:#eee}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.card-text[_ngcontent-%COMP%]{font-size:.97rem}.custom-tabs[_ngcontent-%COMP%]{border-bottom:none;margin-bottom:.5rem}.custom-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin:0 .3rem}.tab-btn[_ngcontent-%COMP%]{border:none;background:#f8f9fa;color:#a259c6;font-weight:600;font-size:1.08rem;border-radius:1.5rem 1.5rem 0 0;padding:.7rem 1.5rem;transition:background .2s,color .2s,box-shadow .2s;box-shadow:0 2px 8px #a259c614;display:flex;align-items:center;gap:.5rem}.tab-btn.active[_ngcontent-%COMP%], .tab-btn[_ngcontent-%COMP%]:focus{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;box-shadow:0 4px 16px #6c008021}.tab-btn[_ngcontent-%COMP%]:hover:not(.active){background:#ece6f6;color:#6d28d9}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem;margin-right:.3rem}.tab-label[_ngcontent-%COMP%]{letter-spacing:.5px}@media (max-width: 600px){.tab-btn[_ngcontent-%COMP%]{font-size:.97rem;padding:.5rem .9rem}}"]})};var Ve=[{path:"",component:Z},{path:"login",component:Z},{path:"register",component:se},{path:"feed",component:le},{path:"receta/:id",component:ce},{path:"perfil/:id",component:de},{path:"ai-assistant",loadComponent:()=>import("./chunk-NQAQ6YWV.js").then(t=>t.AiAssistantComponent)},{path:"crear-receta",loadComponent:()=>import("./chunk-2T4JFTSR.js").then(t=>t.CrearRecetaComponent)},{path:"**",redirectTo:"feed"}];var We={providers:[fe({eventCoalescing:!0}),Ce(Ve),ve(be()),_e(),we(()=>Pe({apiKey:"AIzaSyC0cfTmaqsbSRMqPSklwkyS_NL_pQ4XbMk",authDomain:"cookshare2-fa2ff.firebaseapp.com",databaseURL:"https://cookshare2-fa2ff-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cookshare2-fa2ff",storageBucket:"cookshare2-fa2ff.appspot.com",messagingSenderId:"218177580225",appId:"1:218177580225:web:56d5b5b9bee7e96c6a7840",measurementId:"G-4Q51LZ8XKK"})),Re(()=>Oe()),ke(()=>Te())]};he(oe,We).catch(t=>console.error(t));

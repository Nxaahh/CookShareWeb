var RM=Object.defineProperty,NM=Object.defineProperties;var OM=Object.getOwnPropertyDescriptors;var Mc=Object.getOwnPropertySymbols,xM=Object.getPrototypeOf,P_=Object.prototype.hasOwnProperty,F_=Object.prototype.propertyIsEnumerable,kM=Reflect.get;var k_=(e,t,n)=>t in e?RM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||={})P_.call(t,n)&&k_(e,n,t[n]);if(Mc)for(var n of Mc(t))F_.call(t,n)&&k_(e,n,t[n]);return e},U=(e,t)=>NM(e,OM(t));var L_=(e,t)=>{var n={};for(var r in e)P_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Mc)for(var r of Mc(e))t.indexOf(r)<0&&F_.call(e,r)&&(n[r]=e[r]);return n};var $r=(e,t,n)=>kM(xM(e),n,t);var p=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});function Kf(e,t){return Object.is(e,t)}var De=null,Rc=!1,Yf=1,yt=Symbol("SIGNAL");function G(e){let t=De;return De=e,t}function Zf(){return De}var _s={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Es(e){if(Rc)throw new Error("");if(De===null)return;De.consumerOnSignalRead(e);let t=De.nextProducerIndex++;if(kc(De),t<De.producerNode.length&&De.producerNode[t]!==e&&ys(De)){let n=De.producerNode[t];xc(n,De.producerIndexOfThis[t])}De.producerNode[t]!==e&&(De.producerNode[t]=e,De.producerIndexOfThis[t]=ys(De)?j_(e,De,t):0),De.producerLastReadVersion[t]=e.version}function V_(){Yf++}function Qf(e){if(!(ys(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Yf)){if(!e.producerMustRecompute(e)&&!th(e)){qf(e);return}e.producerRecomputeValue(e),qf(e)}}function Jf(e){if(e.liveConsumerNode===void 0)return;let t=Rc;Rc=!0;try{for(let n of e.liveConsumerNode)n.dirty||PM(n)}finally{Rc=t}}function Xf(){return De?.consumerAllowSignalWrites!==!1}function PM(e){e.dirty=!0,Jf(e),e.consumerMarkedDirty?.(e)}function qf(e){e.dirty=!1,e.lastCleanEpoch=Yf}function Oc(e){return e&&(e.nextProducerIndex=0),G(e)}function eh(e,t){if(G(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(ys(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)xc(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function th(e){kc(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Qf(n),r!==n.version))return!0}return!1}function nh(e){if(kc(e),ys(e))for(let t=0;t<e.producerNode.length;t++)xc(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function j_(e,t,n){if(U_(e),e.liveConsumerNode.length===0&&B_(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=j_(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function xc(e,t){if(U_(e),e.liveConsumerNode.length===1&&B_(e))for(let r=0;r<e.producerNode.length;r++)xc(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];kc(i),i.producerIndexOfThis[r]=t}}function ys(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function kc(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function U_(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function B_(e){return e.producerNode!==void 0}function rh(e,t){let n=Object.create(FM);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Qf(n),Es(n),n.value===Nc)throw n.error;return n.value};return r[yt]=n,r}var zf=Symbol("UNSET"),Gf=Symbol("COMPUTING"),Nc=Symbol("ERRORED"),FM=U(_({},_s),{value:zf,dirty:!0,error:null,equal:Kf,kind:"computed",producerMustRecompute(e){return e.value===zf||e.value===Gf},producerRecomputeValue(e){if(e.value===Gf)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Gf;let n=Oc(e),r,i=!1;try{r=e.computation(),G(null),i=t!==zf&&t!==Nc&&r!==Nc&&e.equal(t,r)}catch(o){r=Nc,e.error=o}finally{eh(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function LM(){throw new Error}var $_=LM;function H_(e){$_(e)}function ih(e){$_=e}var VM=null;function oh(e,t){let n=Object.create(Pc);n.value=e,t!==void 0&&(n.equal=t);let r=()=>(Es(n),n.value);return r[yt]=n,r}function ws(e,t){Xf()||H_(e),e.equal(e.value,t)||(e.value=t,jM(e))}function sh(e,t){Xf()||H_(e),ws(e,t(e.value))}var Pc=U(_({},_s),{equal:Kf,value:void 0,kind:"signal"});function jM(e){e.version++,V_(),Jf(e),VM?.()}function ah(e){let t=G(null);try{return e()}finally{G(t)}}var ch;function Is(){return ch}function Mn(e){let t=ch;return ch=e,t}var Fc=Symbol("NotFound");function k(e){return typeof e=="function"}function Fi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Lc=Fi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var me=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(k(r))try{r()}catch(o){t=o instanceof Lc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{W_(o)}catch(s){t=t??[],s instanceof Lc?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Lc(t)}}add(t){var n;if(t&&t!==this)if(this.closed)W_(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Hr(n,t)}remove(t){let{_finalizers:n}=this;n&&Hr(n,t),t instanceof e&&t._removeParent(this)}};me.EMPTY=(()=>{let e=new me;return e.closed=!0,e})();var lh=me.EMPTY;function Vc(e){return e instanceof me||e&&"closed"in e&&k(e.remove)&&k(e.add)&&k(e.unsubscribe)}function W_(e){k(e)?e():e.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Li={setTimeout(e,t,...n){let{delegate:r}=Li;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Li;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function jc(e){Li.setTimeout(()=>{let{onUnhandledError:t}=Rt;if(t)t(e);else throw e})}function Cs(){}var z_=uh("C",void 0,void 0);function G_(e){return uh("E",void 0,e)}function q_(e){return uh("N",e,void 0)}function uh(e,t,n){return{kind:e,value:t,error:n}}var Wr=null;function Vi(e){if(Rt.useDeprecatedSynchronousErrorHandling){let t=!Wr;if(t&&(Wr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Wr;if(Wr=null,n)throw r}}else e()}function K_(e){Rt.useDeprecatedSynchronousErrorHandling&&Wr&&(Wr.errorThrown=!0,Wr.error=e)}var zr=class extends me{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Vc(t)&&t.add(this)):this.destination=zM}static create(t,n,r){return new ji(t,n,r)}next(t){this.isStopped?fh(q_(t),this):this._next(t)}error(t){this.isStopped?fh(G_(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?fh(z_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HM=Function.prototype.bind;function dh(e,t){return HM.call(e,t)}var hh=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Uc(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Uc(r)}else Uc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Uc(n)}}},ji=class extends zr{constructor(t,n,r){super();let i;if(k(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Rt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&dh(t.next,o),error:t.error&&dh(t.error,o),complete:t.complete&&dh(t.complete,o)}):i=t}this.destination=new hh(i)}};function Uc(e){Rt.useDeprecatedSynchronousErrorHandling?K_(e):jc(e)}function WM(e){throw e}function fh(e,t){let{onStoppedNotification:n}=Rt;n&&Li.setTimeout(()=>n(e,t))}var zM={closed:!0,next:Cs,error:WM,complete:Cs};var Ui=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ut(e){return e}function ph(...e){return gh(e)}function gh(e){return e.length===0?ut:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var q=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=qM(n)?n:new ji(n,r,i);return Vi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Y_(r),new r((i,o)=>{let s=new ji({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ui](){return this}pipe(...n){return gh(n)(this)}toPromise(n){return n=Y_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Y_(e){var t;return(t=e??Rt.Promise)!==null&&t!==void 0?t:Promise}function GM(e){return e&&k(e.next)&&k(e.error)&&k(e.complete)}function qM(e){return e&&e instanceof zr||GM(e)&&Vc(e)}function mh(e){return k(e?.lift)}function Z(e){return t=>{if(mh(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function K(e,t,n,r,i){return new vh(e,t,n,r,i)}var vh=class extends zr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Bi(){return Z((e,t)=>{let n=null;e._refCount++;let r=K(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var $i=class extends q{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new me;let n=this.getSubject();t.add(this.source.subscribe(K(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=me.EMPTY)}return t}refCount(){return Bi()(this)}};var Z_=Fi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=(()=>{class e extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Bc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Z_}next(n){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?lh:(this.currentObservers=null,o.push(n),new me(()=>{this.currentObservers=null,Hr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return e.create=(t,n)=>new Bc(t,n),e})(),Bc=class extends we{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:lh}};var Pe=class extends we{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var yh={now(){return(yh.delegate||Date).now()},delegate:void 0};var $c=class extends me{constructor(t,n){super()}schedule(t,n=0){return this}};var bs={setInterval(e,t,...n){let{delegate:r}=bs;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=bs;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Hi=class extends $c{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return bs.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&bs.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Hr(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Wi=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Wi.now=yh.now;var zi=class extends Wi{constructor(t,n=Wi.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var _h=new zi(Hi);var Hc=class extends Hi{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}};var Wc=class extends zi{};var Eh=new Wc(Hc);var Ke=new q(e=>e.complete());function Q_(e){return e&&k(e.schedule)}function J_(e){return e[e.length-1]}function zc(e){return k(J_(e))?e.pop():void 0}function er(e){return Q_(J_(e))?e.pop():void 0}function wh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function eE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function X_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gr(e){return this instanceof Gr?(this.v=e,this):new Gr(e)}function tE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(w){return new Promise(function(A,j){o.push([h,w,A,j])>1||c(h,w)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(w){f(o[0][3],w)}}function l(h){h.value instanceof Gr?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function nE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof X_=="function"?X_(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Gc=e=>e&&typeof e.length=="number"&&typeof e!="function";function qc(e){return k(e?.then)}function Kc(e){return k(e[Ui])}function Yc(e){return Symbol.asyncIterator&&k(e?.[Symbol.asyncIterator])}function Zc(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qc=KM();function Jc(e){return k(e?.[Qc])}function Xc(e){return tE(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Gr(n.read());if(i)return yield Gr(void 0);yield yield Gr(r)}}finally{n.releaseLock()}})}function el(e){return k(e?.getReader)}function Ie(e){if(e instanceof q)return e;if(e!=null){if(Kc(e))return YM(e);if(Gc(e))return ZM(e);if(qc(e))return QM(e);if(Yc(e))return rE(e);if(Jc(e))return JM(e);if(el(e))return XM(e)}throw Zc(e)}function YM(e){return new q(t=>{let n=e[Ui]();if(k(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZM(e){return new q(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function QM(e){return new q(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,jc)})}function JM(e){return new q(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function rE(e){return new q(t=>{eR(e,t).catch(n=>t.error(n))})}function XM(e){return rE(Xc(e))}function eR(e,t){var n,r,i,o;return eE(this,void 0,void 0,function*(){try{for(n=nE(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Ye(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function tr(e,t=0){return Z((n,r)=>{n.subscribe(K(r,i=>Ye(r,e,()=>r.next(i),t),()=>Ye(r,e,()=>r.complete(),t),i=>Ye(r,e,()=>r.error(i),t)))})}function nr(e,t=0){return Z((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function iE(e,t){return Ie(e).pipe(nr(t),tr(t))}function oE(e,t){return Ie(e).pipe(nr(t),tr(t))}function sE(e,t){return new q(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function aE(e,t){return new q(n=>{let r;return Ye(n,t,()=>{r=e[Qc](),Ye(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}function tl(e,t){if(!e)throw new Error("Iterable cannot be null");return new q(n=>{Ye(n,t,()=>{let r=e[Symbol.asyncIterator]();Ye(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function cE(e,t){return tl(Xc(e),t)}function lE(e,t){if(e!=null){if(Kc(e))return iE(e,t);if(Gc(e))return sE(e,t);if(qc(e))return oE(e,t);if(Yc(e))return tl(e,t);if(Jc(e))return aE(e,t);if(el(e))return cE(e,t)}throw Zc(e)}function ue(e,t){return t?lE(e,t):Ie(e)}function N(...e){let t=er(e);return ue(e,t)}function Gi(e,t){let n=k(e)?e:()=>e,r=i=>i.error(n());return new q(t?i=>t.schedule(r,0,i):r)}function Ih(e){return!!e&&(e instanceof q||k(e.lift)&&k(e.subscribe))}var Rn=Fi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(e,t){return Z((n,r)=>{let i=0;n.subscribe(K(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:tR}=Array;function nR(e,t){return tR(t)?e(...t):e(t)}function nl(e){return Y(t=>nR(e,t))}var{isArray:rR}=Array,{getPrototypeOf:iR,prototype:oR,keys:sR}=Object;function rl(e){if(e.length===1){let t=e[0];if(rR(t))return{args:t,keys:null};if(aR(t)){let n=sR(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function aR(e){return e&&typeof e=="object"&&iR(e)===oR}function il(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ds(...e){let t=er(e),n=zc(e),{args:r,keys:i}=rl(e);if(r.length===0)return ue([],t);let o=new q(cR(r,t,i?s=>il(i,s):ut));return n?o.pipe(nl(n)):o}function cR(e,t,n=ut){return r=>{uE(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)uE(t,()=>{let l=ue(e[c],t),u=!1;l.subscribe(K(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function uE(e,t,n){e?Ye(n,e,t):t()}function dE(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=w=>l<r?g(w):c.push(w),g=w=>{o&&t.next(w),l++;let A=!1;Ie(n(w,u++)).subscribe(K(t,j=>{i?.(j),o?h(j):t.next(j)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let j=c.shift();s?Ye(t,s,()=>g(j)):g(j)}f()}catch(j){t.error(j)}}))};return e.subscribe(K(t,h,()=>{d=!0,f()})),()=>{a?.()}}function _e(e,t,n=1/0){return k(t)?_e((r,i)=>Y((o,s)=>t(r,o,i,s))(Ie(e(r,i))),n):(typeof t=="number"&&(n=t),Z((r,i)=>dE(r,i,e,n)))}function qi(e=1/0){return _e(ut,e)}function fE(){return qi(1)}function Ki(...e){return fE()(ue(e,er(e)))}function ol(e){return new q(t=>{Ie(e()).subscribe(t)})}function Ch(...e){let t=zc(e),{args:n,keys:r}=rl(e),i=new q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ie(n[u]).subscribe(K(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?il(r,a):a),o.complete())}))}});return t?i.pipe(nl(t)):i}function dt(e,t){return Z((n,r)=>{let i=0;n.subscribe(K(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Nn(e){return Z((t,n)=>{let r=null,i=!1,o;r=t.subscribe(K(n,void 0,void 0,s=>{o=Ie(e(s,Nn(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function hE(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(K(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function rr(e,t){return k(t)?_e(e,t,1):_e(e,1)}function ir(e){return Z((t,n)=>{let r=!1;t.subscribe(K(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function On(e){return e<=0?()=>Ke:Z((t,n)=>{let r=0;t.subscribe(K(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function sl(e=lR){return Z((t,n)=>{let r=!1;t.subscribe(K(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function lR(){return new Rn}function Ts(e){return Z((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function xn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?dt((i,o)=>e(i,o,r)):ut,On(1),n?ir(t):sl(()=>new Rn))}function Yi(e){return e<=0?()=>Ke:Z((t,n)=>{let r=[];t.subscribe(K(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function bh(e,t){let n=arguments.length>=2;return r=>r.pipe(e?dt((i,o)=>e(i,o,r)):ut,Yi(1),n?ir(t):sl(()=>new Rn))}function Dh(e,t){return Z(hE(e,t,arguments.length>=2,!0))}function Th(...e){let t=er(e);return Z((n,r)=>{(t?Ki(e,n,t):Ki(e,n)).subscribe(r)})}function _t(e,t){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(K(r,c=>{i?.unsubscribe();let l=0,u=o++;Ie(e(c,u)).subscribe(i=K(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Sh(e){return Z((t,n)=>{Ie(e).subscribe(K(n,()=>n.complete(),Cs)),!n.closed&&t.subscribe(n)})}function Te(e,t,n){let r=k(e)||t||n?{next:e,error:t,complete:n}:e;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(K(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ut}var Oh={JSACTION:"jsaction"},xh={JSACTION:"__jsaction",OWNER:"__owner"},vE={};function uR(e){return e[xh.JSACTION]}function pE(e,t){e[xh.JSACTION]=t}function dR(e){return vE[e]}function fR(e,t){vE[e]=t}var M={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},hR=[M.MOUSEENTER,M.MOUSELEAVE,"pointerenter","pointerleave"],f5=[M.CLICK,M.DBLCLICK,M.FOCUSIN,M.FOCUSOUT,M.KEYDOWN,M.KEYUP,M.KEYPRESS,M.MOUSEOVER,M.MOUSEOUT,M.SUBMIT,M.TOUCHSTART,M.TOUCHEND,M.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],pR=[M.FOCUS,M.BLUR,M.ERROR,M.LOAD,M.TOGGLE],kh=e=>pR.indexOf(e)>=0;function gR(e){return e===M.MOUSEENTER?M.MOUSEOVER:e===M.MOUSELEAVE?M.MOUSEOUT:e===M.POINTERENTER?M.POINTEROVER:e===M.POINTERLEAVE?M.POINTEROUT:e}function mR(e,t,n,r){let i=!1;kh(t)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return e.addEventListener(t,n,o),{eventType:t,handler:n,capture:i,passive:r}}function vR(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function yR(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var gE=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function _R(e){return e.which===2||e.which==null&&e.button===4}function ER(e){return gE&&e.metaKey||!gE&&e.ctrlKey||_R(e)||e.shiftKey}function wR(e,t,n){let r=e.relatedTarget;return(e.type===M.MOUSEOVER&&t===M.MOUSEENTER||e.type===M.MOUSEOUT&&t===M.MOUSELEAVE||e.type===M.POINTEROVER&&t===M.POINTERENTER||e.type===M.POINTEROUT&&t===M.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function IR(e,t){let n={};for(let r in e){if(r==="srcElement"||r==="target")continue;let i=r,o=e[i];typeof o!="function"&&(n[i]=o)}return e.type===M.MOUSEOVER?n.type=M.MOUSEENTER:e.type===M.MOUSEOUT?n.type=M.MOUSELEAVE:e.type===M.POINTEROVER?n.type=M.POINTERENTER:n.type=M.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n._originalEvent=e,n}var CR=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),ul=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,r){CR&&(this.element.style.cursor="pointer"),this.handlerInfos.push(mR(this.element,t,n(this.element),r))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)vR(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},bR={EVENT_ACTION_SEPARATOR:":"};function or(e){return e.eventType}function Ph(e,t){e.eventType=t}function cl(e){return e.event}function yE(e,t){e.event=t}function _E(e){return e.targetElement}function EE(e,t){e.targetElement=t}function wE(e){return e.eic}function DR(e,t){e.eic=t}function TR(e){return e.timeStamp}function SR(e,t){e.timeStamp=t}function ll(e){return e.eia}function IE(e,t,n){e.eia=[t,n]}function Ah(e){e.eia=void 0}function al(e){return e[1]}function AR(e){return e.eirp}function CE(e,t){e.eirp=t}function bE(e){return e.eir}function DE(e,t){e.eir=t}function TE(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function MR(e,t,n,r,i,o,s,a){return{eventType:e,event:t,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var Mh=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return or(this.eventInfo)}setEventType(t){Ph(this.eventInfo,t)}getEvent(){return cl(this.eventInfo)}setEvent(t){yE(this.eventInfo,t)}getTargetElement(){return _E(this.eventInfo)}setTargetElement(t){EE(this.eventInfo,t)}getContainer(){return wE(this.eventInfo)}setContainer(t){DR(this.eventInfo,t)}getTimestamp(){return TR(this.eventInfo)}setTimestamp(t){SR(this.eventInfo,t)}getAction(){let t=ll(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){Ah(this.eventInfo);return}IE(this.eventInfo,t.name,t.element)}getIsReplay(){return AR(this.eventInfo)}setIsReplay(t){CE(this.eventInfo,t)}getResolved(){return bE(this.eventInfo)}setResolved(t){DE(this.eventInfo,t)}clone(){return new e(TE(this.eventInfo))}},RR={},NR=/\s*;\s*/,OR=M.CLICK,Rh=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&or(t)===M.CLICK&&ER(cl(t))?Ph(t,M.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){bE(t)||(this.populateAction(t,_E(t)),DE(t,!0))}resolveParentAction(t){let n=ll(t),r=n&&al(n);Ah(t);let i=r&&this.getParentNode(r);i&&this.populateAction(t,i)}populateAction(t,n){let r=n;for(;r&&r!==wE(t)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,t),!ll(t));)r=this.getParentNode(r);let i=ll(t);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&(or(t)===M.MOUSEENTER||or(t)===M.MOUSELEAVE||or(t)===M.POINTERENTER||or(t)===M.POINTERLEAVE)))if(wR(cl(t),or(t),al(i))){let o=IR(cl(t),al(i));yE(t,o),EE(t,al(i))}else Ah(t)}getParentNode(t){let n=t[xh.OWNER];if(n)return n;let r=t.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(t,n){let r=this.parseActions(t),i=r[or(n)];i!==void 0&&IE(n,i,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,r)}parseActions(t){let n=uR(t);if(!n){let r=t.getAttribute(Oh.JSACTION);if(!r)n=RR,pE(t,n);else{if(n=dR(r),!n){n={};let i=r.split(NR);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(bR.EVENT_ACTION_SEPARATOR),c=a!==-1,l=c?s.substr(0,a).trim():OR,u=c?s.substr(a+1).trim():s;n[l]=u}fR(r,n)}pE(t,n)}}return n}addA11yClickSupport(t,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},SE=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}(SE||{}),Nh=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=r}dispatch(t){let n=new Mh(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let r=n.getAction();if(r&&xR(r.element,n)&&yR(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function xR(e,t){return e.tagName==="A"&&(t.getEventType()===M.CLICK||t.getEventType()===M.CLICKMOD)}var AE=Symbol.for("propagationStopped"),Fh={REPLAY:101};var kR="`preventDefault` called during event replay.";var PR="`composedPath` called during event replay.",dl=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new Rh({clickModSupport:n}),this.dispatcher=new Nh(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&VR(t),FR(t);t.getAction();){if(jR(t),kh(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),LR(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function FR(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),r=()=>{t[AE]=!0,n()};qr(t,"stopPropagation",r),qr(t,"stopImmediatePropagation",r)}function LR(e){return!!e.getEvent()[AE]}function VR(e){let t=e.getEvent(),n=e.getTargetElement(),r=t.preventDefault.bind(t);qr(t,"target",n),qr(t,"eventPhase",Fh.REPLAY),qr(t,"preventDefault",()=>{throw r(),new Error(kR+"")}),qr(t,"composedPath",()=>{throw new Error(PR+"")})}function jR(e){let t=e.getEvent(),n=e.getAction()?.element;n&&qr(t,"currentTarget",n,{configurable:!0})}function qr(e,t,n,{configurable:r=!1}={}){Object.defineProperty(e,t,{value:n,configurable:r})}function ME(e,t){e.ecrd(n=>{t.dispatch(n)},SE.I_AM_THE_JSACTION_FRAMEWORK)}function UR(e){return e?.q??[]}function BR(e){e&&(mE(e.c,e.et,e.h),mE(e.c,e.etc,e.h,!0))}function mE(e,t,n,r){for(let i=0;i<t.length;i++)e.removeEventListener(t[i],n,r)}var $R=!1,RE=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=$R;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=MR(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){CE(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&hR.indexOf(n)>=0)return;let o=(a,c,l)=>{this.handleEvent(a,c,l)};this.eventHandlers[n]=o;let s=gR(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(n,c,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),BR(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=TE(i);Ph(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return e})();function NE(e,t=window){return UR(t._ejsas?.[e])}function Lh(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var Ow="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",b=class extends Error{code;constructor(t,n){super(Xl(t,n)),this.code=t}};function HR(e){return`NG0${Math.abs(e)}`}function Xl(e,t){return`${HR(e)}${t?": "+t:""}`}var xw=Symbol("InputSignalNode#UNSET"),WR=U(_({},Pc),{transformFn:void 0,applyValueToInputSignal(e,t){ws(e,t)}});function kw(e,t){let n=Object.create(WR);n.value=e,n.transformFn=t?.transform;function r(){if(Es(n),n.value===xw){let i=null;throw new b(-950,i)}return n.value}return r[yt]=n,r}function Ls(e){return{toString:e}.toString()}var fl="__parameters__";function zR(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function Pw(e,t,n){return Ls(()=>{let r=zR(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(fl)?c[fl]:Object.defineProperty(c,fl,{value:[]})[fl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var bl=globalThis;function ie(e){for(let t in e)if(e[t]===ie)return t;throw Error("Could not find renamed property on target object.")}function GR(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ze(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Ze).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function OE(e,t){return e?t?`${e} ${t}`:e:t||""}var qR=ie({__forward_ref__:ie});function jn(e){return e.__forward_ref__=jn,e.toString=function(){return Ze(this())},e}function ze(e){return Fw(e)?e():e}function Fw(e){return typeof e=="function"&&e.hasOwnProperty(qR)&&e.__forward_ref__===jn}function S(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Un(e){return{providers:e.providers||[],imports:e.imports||[]}}function eu(e){return xE(e,Vw)||xE(e,jw)}function Lw(e){return eu(e)!==null}function xE(e,t){return e.hasOwnProperty(t)?e[t]:null}function KR(e){let t=e&&(e[Vw]||e[jw]);return t||null}function kE(e){return e&&(e.hasOwnProperty(PE)||e.hasOwnProperty(YR))?e[PE]:null}var Vw=ie({\u0275prov:ie}),PE=ie({\u0275inj:ie}),jw=ie({ngInjectableDef:ie}),YR=ie({ngInjectorDef:ie}),C=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=S({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Uw(e){return e&&!!e.\u0275providers}var ZR=ie({\u0275cmp:ie}),QR=ie({\u0275dir:ie}),JR=ie({\u0275pipe:ie}),XR=ie({\u0275mod:ie}),Dl=ie({\u0275fac:ie}),Rs=ie({__NG_ELEMENT_ID__:ie}),FE=ie({__NG_ENV_ID__:ie});function tu(e){return typeof e=="string"?e:e==null?"":String(e)}function eN(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():tu(e)}function Bw(e,t){throw new b(-200,e)}function $p(e,t){throw new b(-201,!1)}var B=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(B||{}),tp;function $w(){return tp}function Et(e){let t=tp;return tp=e,t}function Hw(e,t,n){let r=eu(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&B.Optional)return null;if(t!==void 0)return t;$p(e,"Injector")}var tN={},Kr=tN,np="__NG_DI_FLAG__",Tl=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=n;return this.injector.get(t,r.optional?Fc:Kr,r)}},Sl="ngTempTokenPath",nN="ngTokenPath",rN=/\n/gm,iN="\u0275",LE="__source";function oN(e,t=B.Default){if(Is()===void 0)throw new b(-203,!1);if(Is()===null)return Hw(e,void 0,t);{let n=Is(),r;return n instanceof Tl?r=n.injector:r=n,r.get(e,t&B.Optional?null:void 0,t)}}function O(e,t=B.Default){return($w()||oN)(ze(e),t)}function m(e,t=B.Default){return O(e,nu(t))}function nu(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function rp(e){let t=[];for(let n=0;n<e.length;n++){let r=ze(e[n]);if(Array.isArray(r)){if(r.length===0)throw new b(900,!1);let i,o=B.Default;for(let s=0;s<r.length;s++){let a=r[s],c=sN(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(O(i,o))}else t.push(O(r))}return t}function Ww(e,t){return e[np]=t,e.prototype[np]=t,e}function sN(e){return e[np]}function aN(e,t,n,r){let i=e[Sl];throw t[LE]&&i.unshift(t[LE]),e.message=cN(`
`+e.message,i,n,r),e[nN]=i,e[Sl]=null,e}function cN(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==iN?e.slice(2):e;let i=Ze(t);if(Array.isArray(t))i=t.map(Ze).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ze(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(rN,`
  `)}`}var Xe=Ww(Pw("Optional"),8);var lN=Ww(Pw("SkipSelf"),4);function oo(e,t){let n=e.hasOwnProperty(Dl);return n?e[Dl]:null}function Hp(e,t){e.forEach(n=>Array.isArray(n)?Hp(n,t):t(n))}function zw(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Al(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function uN(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function dN(e,t,n){let r=Vs(e,t);return r>=0?e[r|1]=n:(r=~r,uN(e,r,t,n)),r}function Vh(e,t){let n=Vs(e,t);if(n>=0)return e[n|1]}function Vs(e,t){return fN(e,t,1)}function fN(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Zr={},wt=[],ar=new C(""),Gw=new C("",-1),qw=new C(""),Ml=class{get(t,n=Kr){if(n===Kr){let r=new Error(`NullInjectorError: No provider for ${Ze(t)}!`);throw r.name="NullInjectorError",r}return n}};function Kw(e,t){let n=e[XR]||null;if(!n&&t===!0)throw new Error(`Type ${Ze(e)} does not have '\u0275mod' property.`);return n}function cr(e){return e[ZR]||null}function Yw(e){return e[QR]||null}function Zw(e){return e[JR]||null}function et(e){return{\u0275providers:e}}function hN(...e){return{\u0275providers:Wp(!0,e),\u0275fromNgModule:!0}}function Wp(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Hp(t,s=>{let a=s;ip(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Qw(i,o),n}function Qw(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];zp(i,o=>{t(o,r)})}}function ip(e,t,n,r){if(e=ze(e),!e)return!1;let i=null,o=kE(e),s=!o&&cr(e);if(!o&&!s){let c=e.ngModule;if(o=kE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ip(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Hp(o.imports,u=>{ip(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Qw(l,t)}if(!a){let l=oo(i)||(()=>new i);t({provide:i,useFactory:l,deps:wt},i),t({provide:qw,useValue:i,multi:!0},i),t({provide:ar,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;zp(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function zp(e,t){for(let n of e)Uw(n)&&(n=n.\u0275providers),Array.isArray(n)?zp(n,t):t(n)}var pN=ie({provide:String,useValue:ie});function Jw(e){return e!==null&&typeof e=="object"&&pN in e}function gN(e){return!!(e&&e.useExisting)}function mN(e){return!!(e&&e.useFactory)}function so(e){return typeof e=="function"}function vN(e){return!!e.useClass}var ru=new C(""),vl={},VE={},jh;function Gp(){return jh===void 0&&(jh=new Ml),jh}var Fe=class{},Ns=class extends Fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,sp(t,s=>this.processProvider(s)),this.records.set(Gw,Zi(void 0,this)),i.has("environment")&&this.records.set(Fe,Zi(void 0,this));let o=this.records.get(ru);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(qw,wt,B.Self))}retrieve(t,n){let r=n;return this.get(t,r.optional?Fc:Kr,r)}destroy(){As(this),this._destroyed=!0;let t=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(t)}}onDestroy(t){return As(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){As(this);let n=Mn(this),r=Et(void 0),i;try{return t()}finally{Mn(n),Et(r)}}get(t,n=Kr,r=B.Default){if(As(this),t.hasOwnProperty(FE))return t[FE](this);r=nu(r);let i,o=Mn(this),s=Et(void 0);try{if(!(r&B.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=IN(t)&&eu(t);l&&this.injectableDefInScope(l)?c=Zi(op(t),vl):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,r)}let a=r&B.Self?Gp():this.parent;return n=r&B.Optional&&n===Kr?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Sl]=a[Sl]||[]).unshift(Ze(t)),o)throw a;return aN(a,t,"R3InjectorError",this.source)}else throw a}finally{Et(s),Mn(o)}}resolveInjectorInitializers(){let t=G(null),n=Mn(this),r=Et(void 0),i;try{let o=this.get(ar,wt,B.Self);for(let s of o)s()}finally{Mn(n),Et(r),G(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Ze(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=ze(t);let n=so(t)?t:ze(t&&t.provide),r=_N(t);if(!so(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Zi(void 0,vl,!0),i.factory=()=>rp(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=G(null);try{return n.value===VE?Bw(Ze(t)):n.value===vl&&(n.value=VE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&wN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ze(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function op(e){let t=eu(e),n=t!==null?t.factory:oo(e);if(n!==null)return n;if(e instanceof C)throw new b(204,!1);if(e instanceof Function)return yN(e);throw new b(204,!1)}function yN(e){if(e.length>0)throw new b(204,!1);let n=KR(e);return n!==null?()=>n.factory(e):()=>new e}function _N(e){if(Jw(e))return Zi(void 0,e.useValue);{let t=Xw(e);return Zi(t,vl)}}function Xw(e,t,n){let r;if(so(e)){let i=ze(e);return oo(i)||op(i)}else if(Jw(e))r=()=>ze(e.useValue);else if(mN(e))r=()=>e.useFactory(...rp(e.deps||[]));else if(gN(e))r=(i,o)=>O(ze(e.useExisting),o!==void 0&&o&B.Optional?B.Optional:void 0);else{let i=ze(e&&(e.useClass||e.provide));if(EN(e))r=()=>new i(...rp(e.deps));else return oo(i)||op(i)}return r}function As(e){if(e.destroyed)throw new b(205,!1)}function Zi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function EN(e){return!!e.deps}function wN(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function IN(e){return typeof e=="function"||typeof e=="object"&&e instanceof C}function sp(e,t){for(let n of e)Array.isArray(n)?sp(n,t):n&&Uw(n)?sp(n.\u0275providers,t):t(n)}function Ve(e,t){let n;e instanceof Ns?(As(e),n=e):n=new Tl(e);let r,i=Mn(n),o=Et(void 0);try{return t()}finally{Mn(i),Et(o)}}function eI(){return $w()!==void 0||Is()!=null}function iu(e){if(!eI())throw new b(-203,!1)}function CN(e){return typeof e=="function"}var pt=0,P=1,F=2,Re=3,Ot=4,Pt=5,nn=6,Rl=7,Qe=8,rn=9,Pn=10,se=11,Os=12,jE=13,po=14,Ct=15,ao=16,Qi=17,co=18,ou=19,tI=20,sr=21,Uh=22,Nl=23,It=24,to=25,Le=26,nI=1,Fn=6,Ln=7,Ol=8,xl=9,ht=10;function xt(e){return Array.isArray(e)&&typeof e[nI]=="object"}function ln(e){return Array.isArray(e)&&e[nI]===!0}function rI(e){return(e.flags&4)!==0}function ni(e){return e.componentOffset>-1}function qp(e){return(e.flags&1)===1}function on(e){return!!e.template}function xs(e){return(e[F]&512)!==0}function ri(e){return(e[F]&256)===256}var ap=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function iI(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var ur=(()=>{let e=()=>oI;return e.ngInherit=!0,e})();function oI(e){return e.type.prototype.ngOnChanges&&(e.setInput=DN),bN}function bN(){let e=aI(this),t=e?.current;if(t){let n=e.previous;if(n===Zr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function DN(e,t,n,r,i){let o=this.declaredInputs[r],s=aI(e)||TN(e,{previous:Zr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new ap(l&&l.currentValue,n,c===Zr),iI(e,t,i,n)}var sI="__ngSimpleChanges__";function aI(e){return e[sI]||null}function TN(e,t){return e[sI]=t}var UE=null;var ee=function(e,t=null,n){UE?.(e,t,n)},SN="svg",AN="math";function kt(e){for(;Array.isArray(e);)e=e[pt];return e}function cI(e,t){return kt(t[e])}function Ft(e,t){return kt(t[e.index])}function su(e,t){return e.data[t]}function sn(e,t){let n=t[e];return xt(n)?n:n[pt]}function Kp(e){return(e[F]&128)===128}function MN(e){return ln(e[Re])}function kl(e,t){return t==null?null:e[t]}function lI(e){e[Qi]=0}function uI(e){e[F]&1024||(e[F]|=1024,Kp(e)&&js(e))}function RN(e,t){for(;e>0;)t=t[po],e--;return t}function au(e){return!!(e[F]&9216||e[It]?.dirty)}function cp(e){e[Pn].changeDetectionScheduler?.notify(8),e[F]&64&&(e[F]|=1024),au(e)&&js(e)}function js(e){e[Pn].changeDetectionScheduler?.notify(0);let t=Qr(e);for(;t!==null&&!(t[F]&8192||(t[F]|=8192,!Kp(t)));)t=Qr(t)}function dI(e,t){if(ri(e))throw new b(911,!1);e[sr]===null&&(e[sr]=[]),e[sr].push(t)}function NN(e,t){if(e[sr]===null)return;let n=e[sr].indexOf(t);n!==-1&&e[sr].splice(n,1)}function Qr(e){let t=e[Re];return ln(t)?t[Re]:t}function fI(e){return e[Rl]??=[]}function hI(e){return e.cleanup??=[]}var $={lFrame:II(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lp=!1;function ON(){return $.lFrame.elementDepthCount}function xN(){$.lFrame.elementDepthCount++}function kN(){$.lFrame.elementDepthCount--}function pI(){return $.bindingsEnabled}function Us(){return $.skipHydrationRootTNode!==null}function PN(e){return $.skipHydrationRootTNode===e}function FN(e){$.skipHydrationRootTNode=e}function LN(){$.skipHydrationRootTNode=null}function re(){return $.lFrame.lView}function tt(){return $.lFrame.tView}function go(e){return $.lFrame.contextLView=e,e[Qe]}function mo(e){return $.lFrame.contextLView=null,e}function nt(){let e=gI();for(;e!==null&&e.type===64;)e=e.parent;return e}function gI(){return $.lFrame.currentTNode}function VN(){let e=$.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Bs(e,t){let n=$.lFrame;n.currentTNode=e,n.isParent=t}function mI(){return $.lFrame.isParent}function jN(){$.lFrame.isParent=!1}function vI(){return lp}function BE(e){let t=lp;return lp=e,t}function yI(){let e=$.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function UN(e){return $.lFrame.bindingIndex=e}function cu(){return $.lFrame.bindingIndex++}function BN(e){let t=$.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function $N(){return $.lFrame.inI18n}function HN(e,t){let n=$.lFrame;n.bindingIndex=n.bindingRootIndex=e,up(t)}function WN(){return $.lFrame.currentDirectiveIndex}function up(e){$.lFrame.currentDirectiveIndex=e}function zN(e){let t=$.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function _I(e){$.lFrame.currentQueryIndex=e}function GN(e){let t=e[P];return t.type===2?t.declTNode:t.type===1?e[Pt]:null}function EI(e,t,n){if(n&B.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&B.Host);)if(i=GN(o),i===null||(o=o[po],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=$.lFrame=wI();return r.currentTNode=t,r.lView=e,!0}function Yp(e){let t=wI(),n=e[P];$.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function wI(){let e=$.lFrame,t=e===null?null:e.child;return t===null?II(e):t}function II(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function CI(){let e=$.lFrame;return $.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var bI=CI;function Zp(){let e=CI();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function qN(e){return($.lFrame.contextLView=RN(e,$.lFrame.contextLView))[Qe]}function vo(){return $.lFrame.selectedIndex}function Jr(e){$.lFrame.selectedIndex=e}function lu(){let e=$.lFrame;return su(e.tView,e.selectedIndex)}function DI(){return $.lFrame.currentNamespace}var TI=!0;function Qp(){return TI}function dr(e){TI=e}function KN(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=oI(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function SI(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function yl(e,t,n){AI(e,t,3,n)}function _l(e,t,n,r){(e[F]&3)===n&&AI(e,t,n,r)}function Bh(e,t){let n=e[F];(n&3)===t&&(n&=16383,n+=1,e[F]=n)}function AI(e,t,n,r){let i=r!==void 0?e[Qi]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Qi]+=65536),(a<o||o==-1)&&(YN(e,n,t,c),e[Qi]=(e[Qi]&4294901760)+c+2),c++}function $E(e,t){ee(4,e,t);let n=G(null);try{t.call(e)}finally{G(n),ee(5,e,t)}}function YN(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[F]>>14<e[Qi]>>16&&(e[F]&3)===t&&(e[F]+=16384,$E(a,o)):$E(a,o)}var no=-1,Xr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function ZN(e){return(e.flags&8)!==0}function QN(e){return(e.flags&16)!==0}function JN(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];XN(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function MI(e){return e===3||e===4||e===6}function XN(e){return e.charCodeAt(0)===64}function ks(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?HE(e,n,i,null,t[++r]):HE(e,n,i,null,null))}}return e}function HE(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function RI(e){return e!==no}function Pl(e){return e&32767}function eO(e){return e>>16}function Fl(e,t){let n=eO(e),r=t;for(;n>0;)r=r[po],n--;return r}var dp=!0;function WE(e){let t=dp;return dp=e,t}var tO=256,NI=tO-1,OI=5,nO=0,tn={};function rO(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Rs)&&(r=n[Rs]),r==null&&(r=n[Rs]=nO++);let i=r&NI,o=1<<i;t.data[e+(i>>OI)]|=o}function Ll(e,t){let n=xI(e,t);if(n!==-1)return n;let r=t[P];r.firstCreatePass&&(e.injectorIndex=t.length,$h(r.data,e),$h(t,null),$h(r.blueprint,null));let i=Jp(e,t),o=e.injectorIndex;if(RI(i)){let s=Pl(i),a=Fl(i,t),c=a[P].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function $h(e,t){e.push(0,0,0,0,0,0,0,0,t)}function xI(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Jp(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=VI(i),r===null)return no;if(n++,i=i[po],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return no}function fp(e,t,n){rO(e,t,n)}function iO(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(MI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function kI(e,t,n){if(n&B.Optional||e!==void 0)return e;$p(t,"NodeInjector")}function PI(e,t,n,r){if(n&B.Optional&&r===void 0&&(r=null),(n&(B.Self|B.Host))===0){let i=e[rn],o=Et(void 0);try{return i?i.get(t,r,n&B.Optional):Hw(t,r,n&B.Optional)}finally{Et(o)}}return kI(r,t,n)}function FI(e,t,n,r=B.Default,i){if(e!==null){if(t[F]&2048&&!(r&B.Self)){let s=lO(e,t,n,r,tn);if(s!==tn)return s}let o=LI(e,t,n,r,tn);if(o!==tn)return o}return PI(t,n,r,i)}function LI(e,t,n,r,i){let o=aO(n);if(typeof o=="function"){if(!EI(t,e,r))return r&B.Host?kI(i,n,r):PI(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&B.Optional))$p(n);else return s}finally{bI()}}else if(typeof o=="number"){let s=null,a=xI(e,t),c=no,l=r&B.Host?t[Ct][Pt]:null;for((a===-1||r&B.SkipSelf)&&(c=a===-1?Jp(e,t):t[a+8],c===no||!GE(r,!1)?a=-1:(s=t[P],a=Pl(c),t=Fl(c,t)));a!==-1;){let u=t[P];if(zE(o,a,u.data)){let d=oO(a,t,n,s,r,l);if(d!==tn)return d}c=t[a+8],c!==no&&GE(r,t[P].data[a+8]===l)&&zE(o,a,t)?(s=u,a=Pl(c),t=Fl(c,t)):a=-1}}return i}function oO(e,t,n,r,i,o){let s=t[P],a=s.data[e+8],c=r==null?ni(a)&&dp:r!=s&&(a.type&3)!==0,l=i&B.Host&&o===a,u=sO(a,s,n,c,l);return u!==null?Vl(t,s,u,a,i):tn}function sO(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&on(h)&&h.type===n)return c}return null}function Vl(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof Xr){let a=o;a.resolving&&Bw(eN(s[n]));let c=WE(a.canSeeViewProviders);a.resolving=!0;let l,u=a.injectImpl?Et(a.injectImpl):null,d=EI(e,r,B.Default);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&KN(n,s[n],t)}finally{u!==null&&Et(u),WE(c),a.resolving=!1,bI()}}return o}function aO(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Rs)?e[Rs]:void 0;return typeof t=="number"?t>=0?t&NI:cO:t}function zE(e,t,n){let r=1<<e;return!!(n[t+(e>>OI)]&r)}function GE(e,t){return!(e&B.Self)&&!(e&B.Host&&t)}var Yr=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return FI(this._tNode,this._lView,t,nu(r),n)}};function cO(){return new Yr(nt(),re())}function fr(e){return Ls(()=>{let t=e.prototype.constructor,n=t[Dl]||hp(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Dl]||hp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function hp(e){return Fw(e)?()=>{let t=hp(ze(e));return t&&t()}:oo(e)}function lO(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[F]&2048&&!xs(s);){let a=LI(o,s,n,r|B.Self,tn);if(a!==tn)return a;let c=o.parent;if(!c){let l=s[tI];if(l){let u=l.get(n,tn,r);if(u!==tn)return u}c=VI(s),s=s[po]}o=c}return i}function VI(e){let t=e[P],n=t.type;return n===2?t.declTNode:n===1?e[Pt]:null}function Xp(e){return iO(nt(),e)}function qE(e,t=null,n=null,r){let i=jI(e,t,n,r);return i.resolveInjectorInitializers(),i}function jI(e,t=null,n=null,r,i=new Set){let o=[n||wt,hN(e)];return r=r||(typeof e=="object"?void 0:Ze(e)),new Ns(o,t||Gp(),r||null,i)}var ve=class e{static THROW_IF_NOT_FOUND=Kr;static NULL=new Ml;static create(t,n){if(Array.isArray(t))return qE({name:""},n,t,"");{let r=t.name??"";return qE({name:r},t.parent,t.providers,r)}}static \u0275prov=S({token:e,providedIn:"any",factory:()=>O(Gw)});static __NG_ELEMENT_ID__=-1};var uO=new C("");uO.__NG_ELEMENT_ID__=e=>{let t=nt();if(t===null)throw new b(204,!1);if(t.type&2)return t.value;if(e&B.Optional)return null;throw new b(204,!1)};var UI=!1,yo=(()=>{class e{static __NG_ELEMENT_ID__=dO;static __NG_ENV_ID__=n=>n}return e})(),pp=class extends yo{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let n=this._lView;return ri(n)?(t(),()=>{}):(dI(n,t),()=>NN(n,t))}};function dO(){return new pp(re())}var ei=class{},uu=new C("",{providedIn:"root",factory:()=>!1});var BI=new C(""),$I=new C(""),Bn=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Pe(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=S({token:e,providedIn:"root",factory:()=>new e})}return e})(),$s=(()=>{class e{internalPendingTasks=m(Bn);scheduler=m(ei);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return p(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=S({token:e,providedIn:"root",factory:()=>new e})}return e})(),gp=class extends we{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,eI()&&(this.destroyRef=m(yo,{optional:!0})??void 0,this.pendingTasks=m(Bn,{optional:!0})??void 0)}emit(t){let n=G(null);try{super.next(t)}finally{G(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof me&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ee=gp;function jl(...e){}function HI(e){let t,n;function r(){e=jl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function KE(e){return queueMicrotask(()=>e()),()=>{e=jl}}var eg="isAngularZone",Ul=eg+"_ID",fO=0,Q=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ee(!1);onMicrotaskEmpty=new Ee(!1);onStable=new Ee(!1);onError=new Ee(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=UI}=t;if(typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,gO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(eg)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new b(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,hO,jl,jl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},hO={};function tg(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function pO(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){HI(()=>{e.callbackScheduled=!1,mp(e),e.isCheckStableRunning=!0,tg(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),mp(e)}function gO(e){let t=()=>{pO(e)},n=fO++;e._inner=e._inner.fork({name:"angular",properties:{[eg]:!0,[Ul]:n,[Ul+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(mO(c))return r.invokeTask(o,s,a,c);try{return YE(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),ZE(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return YE(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!vO(c)&&t(),ZE(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,mp(e),tg(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function mp(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function YE(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ZE(e){e._nesting--,tg(e)}var vp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ee;onMicrotaskEmpty=new Ee;onStable=new Ee;onError=new Ee;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function mO(e){return WI(e,"__ignore_ng_zone__")}function vO(e){return WI(e,"__scheduler_tick__")}function WI(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var an=class{_console=console;handleError(t){this._console.error("ERROR",t)}},yO=new C("",{providedIn:"root",factory:()=>{let e=m(Q),t=m(an);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function QE(e,t){return kw(e,t)}function _O(e){return kw(xw,e)}var zI=(QE.required=_O,QE);function EO(){return du(nt(),re())}function du(e,t){return new Lt(Ft(e,t))}var Lt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=EO}return e})();function wO(e){return typeof e=="function"&&e[yt]!==void 0}function ii(e,t){let n=oh(e,t?.equal),r=n[yt];return n.set=i=>ws(r,i),n.update=i=>sh(r,i),n.asReadonly=IO.bind(n),n}function IO(){let e=this[yt];if(e.readonlyFn===void 0){let t=()=>this();t[yt]=e,e.readonlyFn=t}return e.readonlyFn}function GI(e){return wO(e)&&typeof e.set=="function"}var CO="ngSkipHydration",bO="ngskiphydration";function qI(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let r=t[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===bO)return!0}return!1}function KI(e){return e.hasAttribute(CO)}function Bl(e){return(e.flags&128)===128}function DO(e){if(Bl(e))return!0;let t=e.parent;for(;t;){if(Bl(e)||qI(t))return!0;t=t.parent}return!1}var YI=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(YI||{}),ZI=new Map,TO=0;function SO(){return TO++}function AO(e){ZI.set(e[ou],e)}function yp(e){ZI.delete(e[ou])}var JE="__ngContext__";function Hs(e,t){xt(t)?(e[JE]=t[ou],AO(t)):e[JE]=t}function QI(e){return XI(e[Os])}function JI(e){return XI(e[Ot])}function XI(e){for(;e!==null&&!ln(e);)e=e[Ot];return e}var _p;function eC(e){_p=e}function fu(){if(_p!==void 0)return _p;if(typeof document<"u")return document;throw new b(210,!1)}var kn=new C("",{providedIn:"root",factory:()=>MO}),MO="ng",ng=new C(""),hr=new C("",{providedIn:"platform",factory:()=>"unknown"});var rg=new C("",{providedIn:"root",factory:()=>fu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function RO(){let e=new _o;return e.store=NO(fu(),m(kn)),e}var _o=(()=>{class e{static \u0275prov=S({token:e,providedIn:"root",factory:RO});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function NO(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}var tC="h",nC="b",OO="f",xO="n",kO="e",PO="t",ig="c",rC="x",$l="r",FO="i",LO="n",iC="d";var VO="di",jO="s",UO="p";var hl=new C(""),oC=!1,sC=new C("",{providedIn:"root",factory:()=>oC});var aC=new C(""),BO=!1,$O=new C(""),XE=new C("",{providedIn:"root",factory:()=>new Map}),og=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(og||{}),Eo=new C(""),ew=new Set;function un(e){ew.has(e)||(ew.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var cC=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=HO}return e})();function HO(){return new cC(re(),nt())}var Ji=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Ji||{}),lC=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=S({token:e,providedIn:"root",factory:()=>new e})}return e})(),WO=[Ji.EarlyRead,Ji.Write,Ji.MixedReadWrite,Ji.Read],zO=(()=>{class e{ngZone=m(Q);scheduler=m(ei);errorHandler=m(an,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){m(Eo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ee(16),this.executing=!0;for(let r of WO)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ee(17)}register(n){let{view:r}=n;r!==void 0?((r[to]??=[]).push(n),js(r),r[F]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(og.AFTER_NEXT_RENDER,n):n()}static \u0275prov=S({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ep=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[to];t&&(this.view[to]=t.filter(n=>n!==this))}};function hu(e,t){!t?.injector&&iu(hu);let n=t?.injector??m(ve);return un("NgAfterNextRender"),qO(e,n,t,!0)}function GO(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function qO(e,t,n,r){let i=t.get(lC);i.impl??=t.get(zO);let o=t.get(Eo,null,{optional:!0}),s=n?.phase??Ji.MixedReadWrite,a=n?.manualCleanup!==!0?t.get(yo):null,c=t.get(cC,null,{optional:!0}),l=new Ep(i.impl,GO(e,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var ft=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(ft||{}),tw=0,KO=1,Se=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(Se||{});var YO=0,pu=1;var ZO=4,QO=5;var JO=7,ro=8,XO=9,uC=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(uC||{});function El(e,t){let n=tx(e),r=t[n];if(r!==null){for(let i of r)i();t[n]=null}}function ex(e){El(1,e),El(0,e),El(2,e)}function tx(e){let t=ZO;return e===1?t=QO:e===2&&(t=XO),t}function dC(e){return e+1}function Ws(e,t){let n=e[P],r=dC(t.index);return e[r]}function gu(e,t){let n=dC(t.index);return e.data[n]}function nx(e,t,n){let r=t[P],i=gu(r,n);switch(e){case Se.Complete:return i.primaryTmplIndex;case Se.Loading:return i.loadingTmplIndex;case Se.Error:return i.errorTmplIndex;case Se.Placeholder:return i.placeholderTmplIndex;default:return null}}function nw(e,t){return t===Se.Placeholder?e.placeholderBlockConfig?.[tw]??null:t===Se.Loading?e.loadingBlockConfig?.[tw]??null:null}function rx(e){return e.loadingBlockConfig?.[KO]??null}function rw(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function ix(e,t){let n=t.primaryTmplIndex+Le;return su(e,n)}var mu="ngb";var ox=(e,t,n)=>{let r=e,i=r.__jsaction_fns??new Map,o=i.get(t)??[];o.push(n),i.set(t,o),r.__jsaction_fns=i},sx=(e,t)=>{let n=e,r=n.getAttribute(mu)??"",i=t.get(r)??new Set;i.has(n)||i.add(n),t.set(r,i)};var ax=e=>{e.removeAttribute(Oh.JSACTION),e.removeAttribute(mu),e.__jsaction_fns=void 0},cx=new C("",{providedIn:"root",factory:()=>({})});function fC(e,t){let n=t?.__jsaction_fns?.get(e.type);if(!(!n||!t?.isConnected))for(let r of n)r(e)}var sg=new C("");var lx="__nghData__",hC=lx,ux="__nghDeferData__",dx=ux,Hh="ngh",fx="nghm",pC=()=>null;function hx(e,t,n=!1){let r=e.getAttribute(Hh);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,c={};if(r!==""){let u=t.get(_o,null,{optional:!0});u!==null&&(c=u.get(hC,[])[Number(r)])}let l={data:c,firstChild:e.firstChild??null};return n&&(l.firstChild=e,vu(l,0,e.nextSibling)),a?e.setAttribute(Hh,a):e.removeAttribute(Hh),l}function px(){pC=hx}function gC(e,t,n=!1){return pC(e,t,n)}function gx(e){let t=e._lView;return t[P].type===2?null:(xs(t)&&(t=t[Le]),t)}function mx(e){return e.textContent?.replace(/\s/gm,"")}function vx(e){let t=fu(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=mx(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function vu(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function wp(e,t){return e.segmentHeads?.[t]??null}function yx(e){return e.get($O,!1,{optional:!0})}function _x(e,t){let n=e.data,r=n[kO]?.[t]??null;return r===null&&n[ig]?.[t]&&(r=ag(e,t)),r}function mC(e,t){return e.data[ig]?.[t]??null}function ag(e,t){let n=mC(e,t)??[],r=0;for(let i of n)r+=i[$l]*(i[rC]??1);return r}function Ex(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[iC];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function zs(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[iC];e.disconnectedNodes=n?new Set(n):null}return!!Ex(e)?.has(t)}function wx(e,t){let n=t.get(sg),i=t.get(_o).get(dx,{}),o=!1,s=e,a=null,c=[];for(;!o&&s;){o=n.has(s);let l=n.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}c.unshift(s),s=i[s][UO]}return{parentBlockPromise:a,hydrationQueue:c}}function Wh(e){return!!e&&e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===fx}function iw(e){for(;e&&e.nodeType===Node.TEXT_NODE;)e=e.previousSibling;return e}function Ix(e){for(let r of e.body.childNodes)if(Wh(r))return;let t=iw(e.body.previousSibling);if(Wh(t))return;let n=iw(e.head.lastChild);if(!Wh(n))throw new b(-507,!1)}function vC(e,t){let n=e.contentQueries;if(n!==null){let r=G(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];_I(o),a.contentQueries(2,t[s],s)}}}finally{G(r)}}}function Ip(e,t,n){_I(0);let r=G(null);try{t(e,n)}finally{G(r)}}function yC(e,t,n){if(rI(t)){let r=G(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{G(r)}}}var cn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(cn||{});var pl;function Cx(){if(pl===void 0&&(pl=null,bl.trustedTypes))try{pl=bl.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return pl}function ow(e){return Cx()?.createScriptURL(e)||e}var Hl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ow})`}};function Gs(e){return e instanceof Hl?e.changingThisBreaksApplicationSecurity:e}function cg(e,t){let n=bx(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Ow})`)}return n===t}function bx(e){return e instanceof Hl&&e.getTypeName()||null}var Dx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function _C(e){return e=String(e),e.match(Dx)?e:"unsafe:"+e}var yu=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(yu||{});function dn(e){let t=wC();return t?t.sanitize(yu.URL,e)||"":cg(e,"URL")?Gs(e):_C(tu(e))}function Tx(e){let t=wC();if(t)return ow(t.sanitize(yu.RESOURCE_URL,e)||"");if(cg(e,"ResourceURL"))return ow(Gs(e));throw new b(904,!1)}function Sx(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Tx:dn}function EC(e,t,n){return Sx(t,n)(e)}function wC(){let e=re();return e&&e[Pn].sanitizer}var Ax=/^>|^->|<!--|-->|--!>|<!-$/g,Mx=/(<|>)/g,Rx="\u200B$1\u200B";function Nx(e){return e.replace(Ax,t=>t.replace(Mx,Rx))}function Ox(e){return e.ownerDocument.body}function IC(e){return e instanceof Function?e():e}function xx(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var CC="ng-template";function kx(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&xx(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(lg(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function lg(e){return e.type===4&&e.value!==CC}function Px(e,t,n){let r=e.type===4&&!n?CC:e.value;return t===r}function Fx(e,t,n){let r=4,i=e.attrs,o=i!==null?jx(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Nt(r)&&!Nt(c))return!1;if(s&&Nt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Px(e,c,n)||c===""&&t.length===1){if(Nt(r))return!1;s=!0}}else if(r&8){if(i===null||!kx(e,i,c,n)){if(Nt(r))return!1;s=!0}}else{let l=t[++a],u=Lx(c,i,lg(e),n);if(u===-1){if(Nt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Nt(r))return!1;s=!0}}}}return Nt(r)||s}function Nt(e){return(e&1)===0}function Lx(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Ux(t,e)}function Vx(e,t,n=!1){for(let r=0;r<t.length;r++)if(Fx(e,t[r],n))return!0;return!1}function jx(e){for(let t=0;t<e.length;t++){let n=e[t];if(MI(n))return t}return e.length}function Ux(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function sw(e,t){return e?":not("+t.trim()+")":t}function Bx(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nt(s)&&(t+=sw(o,i),i=""),r=s,o=o||!Nt(r);n++}return i!==""&&(t+=sw(o,i)),t}function $x(e){return e.map(Bx).join(",")}function Hx(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Nt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var $n={};function bC(e,t){return e.createText(t)}function Wx(e,t,n){e.setValue(t,n)}function DC(e,t){return e.createComment(Nx(t))}function ug(e,t,n){return e.createElement(t,n)}function Wl(e,t,n,r,i){e.insertBefore(t,n,r,i)}function TC(e,t,n){e.appendChild(t,n)}function aw(e,t,n,r,i){r!==null?Wl(e,t,n,r,i):TC(e,t,n)}function dg(e,t,n){e.removeChild(null,t,n)}function SC(e){e.textContent=""}function zx(e,t,n){e.setAttribute(t,"style",n)}function Gx(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function AC(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&JN(e,t,r),i!==null&&Gx(e,t,i),o!==null&&zx(e,t,o)}function fg(e,t,n,r,i,o,s,a,c,l,u){let d=Le+r,f=d+i,h=qx(d,f),g=typeof l=="function"?l():l;return h[P]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function qx(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:$n);return n}function Kx(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=fg(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function hg(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[pt]=i,d[F]=r|4|128|8|64|1024,(l!==null||e&&e[F]&2048)&&(d[F]|=2048),lI(d),d[Re]=d[po]=e,d[Qe]=n,d[Pn]=s||e&&e[Pn],d[se]=a||e&&e[se],d[rn]=c||e&&e[rn]||null,d[Pt]=o,d[ou]=SO(),d[nn]=u,d[tI]=l,d[Ct]=t.type==2?e[Ct]:d,d}function Yx(e,t,n){let r=Ft(t,e),i=Kx(n),o=e[Pn].rendererFactory,s=pg(e,hg(e,i,null,MC(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function MC(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function RC(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function pg(e,t){return e[Os]?e[jE][Ot]=t:e[Os]=t,e[jE]=t,t}function I(e=1){NC(tt(),re(),vo()+e,!1)}function NC(e,t,n,r){if(!r)if((t[F]&3)===3){let o=e.preOrderCheckHooks;o!==null&&yl(t,o,n)}else{let o=e.preOrderHooks;o!==null&&_l(t,o,0,n)}Jr(n)}var _u=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(_u||{});function Cp(e,t,n,r){let i=G(null);try{let[o,s,a]=e.inputs[n],c=null;(s&_u.SignalBased)!==0&&(c=t[o][yt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):iI(t,c,o,r)}finally{G(i)}}function OC(e,t,n,r,i){let o=vo(),s=r&2;try{Jr(-1),s&&t.length>Le&&NC(e,t,Le,!1),ee(s?2:0,i),n(r,i)}finally{Jr(o),ee(s?3:1,i)}}function gg(e,t,n){nk(e,t,n),(n.flags&64)===64&&rk(e,t,n)}function xC(e,t,n=Ft){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function Zx(e,t,n,r){let o=r.get(sC,oC)||n===cn.ShadowDom,s=e.selectRootElement(t,o);return Qx(s),s}function Qx(e){kC(e)}var kC=()=>null;function Jx(e){KI(e)?SC(e):vx(e)}function Xx(){kC=Jx}function ek(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function mg(e,t,n,r,i,o,s,a){if(!a&&yg(t,e,n,r,i)){ni(t)&&tk(n,t.index);return}if(t.type&3){let c=Ft(t,n);r=ek(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)}else t.type&12}function tk(e,t){let n=sn(t,e);n[F]&16||(n[F]|=64)}function nk(e,t,n){let r=n.directiveStart,i=n.directiveEnd;ni(n)&&Yx(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Ll(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Vl(t,e,s,n);if(Hs(c,t),o!==null&&ak(t,s-r,c,a,n,o),on(a)){let l=sn(n.index,t);l[Qe]=Vl(t,e,s,n)}}}function rk(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=WN();try{Jr(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];up(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ik(c,l)}}finally{Jr(-1),up(s)}}function ik(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function PC(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Vx(t,o.selectors,!1)&&(r??=[],on(o)?r.unshift(o):r.push(o))}return r}function ok(e,t,n,r,i,o){let s=Ft(e,t);sk(t[se],s,o,e.value,n,r,i)}function sk(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?tu(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function ak(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Cp(r,n,c,l)}}function vg(e,t){let n=e[rn],r=n?n.get(an,null):null;r&&r.handleError(t)}function yg(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Cp(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];Cp(u,l,r,i),a=!0}return a}function ck(e,t){let n=sn(t,e),r=n[P];lk(r,n);let i=n[pt];i!==null&&n[nn]===null&&(n[nn]=gC(i,n[rn])),ee(18),_g(r,n,n[Qe]),ee(19,n[Qe])}function lk(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function _g(e,t,n){Yp(t);try{let r=e.viewQuery;r!==null&&Ip(1,r,n);let i=e.template;i!==null&&OC(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[co]?.finishViewCreation(e),e.staticContentQueries&&vC(e,t),e.staticViewQueries&&Ip(2,e.viewQuery,n);let o=e.components;o!==null&&uk(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[F]&=-5,Zp()}}function uk(e,t){for(let n=0;n<t.length;n++)ck(e,t[n])}function FC(e,t,n,r){let i=G(null);try{let o=t.tView,a=e[F]&4096?4096:16,c=hg(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[ao]=l;let u=e[co];return u!==null&&(c[co]=u.createEmbeddedView(o)),_g(o,c,n),c}finally{G(i)}}function bp(e,t){return!t||t.firstChild===null||Bl(e)}var dk;function Eg(e,t){return dk(e,t)}var Vn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Vn||{});function wo(e){return(e.flags&32)===32}function Xi(e,t,n,r,i){if(r!=null){let o,s=!1;ln(r)?o=r:xt(r)&&(s=!0,r=r[pt]);let a=kt(r);e===0&&n!==null?i==null?TC(t,n,a):Wl(t,n,a,i||null,!0):e===1&&n!==null?Wl(t,n,a,i||null,!0):e===2?dg(t,a,s):e===3&&t.destroyNode(a),o!=null&&Ck(t,e,o,n,i)}}function fk(e,t){LC(e,t),t[pt]=null,t[Pt]=null}function hk(e,t,n,r,i,o){r[pt]=i,r[Pt]=t,Eu(e,r,n,1,i,o)}function LC(e,t){t[Pn].changeDetectionScheduler?.notify(9),Eu(e,t,t[se],2,null,null)}function pk(e){let t=e[Os];if(!t)return zh(e[P],e);for(;t;){let n=null;if(xt(t))n=t[Os];else{let r=t[ht];r&&(n=r)}if(!n){for(;t&&!t[Ot]&&t!==e;)xt(t)&&zh(t[P],t),t=t[Re];t===null&&(t=e),xt(t)&&zh(t[P],t),n=t&&t[Ot]}t=n}}function wg(e,t){let n=e[xl],r=n.indexOf(t);n.splice(r,1)}function Ig(e,t){if(ri(t))return;let n=t[se];n.destroyNode&&Eu(e,t,n,3,null,null),pk(t)}function zh(e,t){if(ri(t))return;let n=G(null);try{t[F]&=-129,t[F]|=256,t[It]&&nh(t[It]),mk(e,t),gk(e,t),t[P].type===1&&t[se].destroy();let r=t[ao];if(r!==null&&ln(t[Re])){r!==t[Re]&&wg(r,t);let i=t[co];i!==null&&i.detachView(e)}yp(t)}finally{G(n)}}function gk(e,t){let n=e.cleanup,r=t[Rl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Rl]=null);let i=t[sr];if(i!==null){t[sr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Nl];if(o!==null){t[Nl]=null;for(let s of o)s.destroy()}}function mk(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Xr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ee(4,a,c);try{c.call(a)}finally{ee(5,a,c)}}else{ee(4,i,o);try{o.call(i)}finally{ee(5,i,o)}}}}}function vk(e,t,n){return yk(e,t.parent,n)}function yk(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[pt];if(ni(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===cn.None||i===cn.Emulated)return null}return Ft(r,n)}function _k(e,t,n){return wk(e,t,n)}function Ek(e,t,n){return e.type&40?Ft(e,n):null}var wk=Ek,cw;function Cg(e,t,n,r){let i=vk(e,r,t),o=t[se],s=r.parent||t[Pt],a=_k(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)aw(o,i,n[c],a,!1);else aw(o,i,n,a,!1);cw!==void 0&&cw(o,r,t,n,i)}function Ms(e,t){if(t!==null){let n=t.type;if(n&3)return Ft(t,e);if(n&4)return Dp(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ms(e,r);{let i=e[t.index];return ln(i)?Dp(-1,i):kt(i)}}else{if(n&128)return Ms(e,t.next);if(n&32)return Eg(t,e)()||kt(e[t.index]);{let r=VC(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Qr(e[Ct]);return Ms(i,r)}else return Ms(e,t.next)}}}return null}function VC(e,t){if(t!==null){let r=e[Ct][Pt],i=t.projection;return r.projection[i]}return null}function Dp(e,t){let n=ht+e+1;if(n<t.length){let r=t[n],i=r[P].firstChild;if(i!==null)return Ms(r,i)}return t[Ln]}function bg(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Hs(kt(a),r),n.flags|=2),!wo(n))if(c&8)bg(e,t,n.child,r,i,o,!1),Xi(t,e,i,a,o);else if(c&32){let l=Eg(n,r),u;for(;u=l();)Xi(t,e,i,u,o);Xi(t,e,i,a,o)}else c&16?Ik(e,t,r,n,i,o):Xi(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Eu(e,t,n,r,i,o){bg(n,r,e.firstChild,t,i,o,!1)}function Ik(e,t,n,r,i,o){let s=n[Ct],c=s[Pt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Xi(t,e,i,u,o)}else{let l=c,u=s[Re];Bl(r)&&(l.flags|=128),bg(e,t,l,u,i,o,!0)}}function Ck(e,t,n,r,i){let o=n[Ln],s=kt(n);o!==s&&Xi(t,e,r,o,i);for(let a=ht;a<n.length;a++){let c=n[a];Eu(c[P],c,e,t,r,o)}}function bk(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Vn.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Vn.Important),e.setStyle(n,r,i,o))}}function zl(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(kt(o)),ln(o)&&Dk(o,r);let s=n.type;if(s&8)zl(e,t,n.child,r);else if(s&32){let a=Eg(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=VC(t,n);if(Array.isArray(a))r.push(...a);else{let c=Qr(t[Ct]);zl(c[P],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Dk(e,t){for(let n=ht;n<e.length;n++){let r=e[n],i=r[P].firstChild;i!==null&&zl(r[P],r,i,t)}e[Ln]!==e[pt]&&t.push(e[Ln])}function jC(e){if(e[to]!==null){for(let t of e[to])t.impl.addSequence(t);e[to].length=0}}var UC=[];function Tk(e){return e[It]??Sk(e)}function Sk(e){let t=UC.pop()??Object.create(Mk);return t.lView=e,t}function Ak(e){e.lView[It]!==e&&(e.lView=null,UC.push(e))}var Mk=U(_({},_s),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{js(e.lView)},consumerOnSignalRead(){this.lView[It]=this}});function Rk(e){let t=e[It]??Object.create(Nk);return t.lView=e,t}var Nk=U(_({},_s),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Qr(e.lView);for(;t&&!BC(t[P]);)t=Qr(t);t&&uI(t)},consumerOnSignalRead(){this.lView[It]=this}});function BC(e){return e.type!==2}function $C(e){if(e[Nl]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Nl])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[F]&8192)}}var Ok=100;function HC(e,t=!0,n=0){let i=e[Pn].rendererFactory,o=!1;o||i.begin?.();try{xk(e,n)}catch(s){throw t&&vg(e,s),s}finally{o||i.end?.()}}function xk(e,t){let n=vI();try{BE(!0),Tp(e,t);let r=0;for(;au(e);){if(r===Ok)throw new b(103,!1);r++,Tp(e,1)}}finally{BE(n)}}function kk(e,t,n,r){if(ri(t))return;let i=t[F],o=!1,s=!1;Yp(t);let a=!0,c=null,l=null;o||(BC(e)?(l=Tk(t),c=Oc(l)):Zf()===null?(a=!1,l=Rk(t),c=Oc(l)):t[It]&&(nh(t[It]),t[It]=null));try{lI(t),UN(e.bindingStartIndex),n!==null&&OC(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&yl(t,h,null)}else{let h=e.preOrderHooks;h!==null&&_l(t,h,0,null),Bh(t,0)}if(s||Pk(t),$C(t),WC(t,0),e.contentQueries!==null&&vC(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&yl(t,h)}else{let h=e.contentHooks;h!==null&&_l(t,h,1),Bh(t,1)}Lk(e,t);let d=e.components;d!==null&&GC(t,d,0);let f=e.viewQuery;if(f!==null&&Ip(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&yl(t,h)}else{let h=e.viewHooks;h!==null&&_l(t,h,2),Bh(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Uh]){for(let h of t[Uh])h();t[Uh]=null}o||(jC(t),t[F]&=-73)}catch(u){throw o||js(t),u}finally{l!==null&&(eh(l,c),a&&Ak(l)),Zp()}}function WC(e,t){for(let n=QI(e);n!==null;n=JI(n))for(let r=ht;r<n.length;r++){let i=n[r];zC(i,t)}}function Pk(e){for(let t=QI(e);t!==null;t=JI(t)){if(!(t[F]&2))continue;let n=t[xl];for(let r=0;r<n.length;r++){let i=n[r];uI(i)}}}function Fk(e,t,n){ee(18);let r=sn(t,e);zC(r,n),ee(19,r[Qe])}function zC(e,t){Kp(e)&&Tp(e,t)}function Tp(e,t){let r=e[P],i=e[F],o=e[It],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&th(o)),s||=!1,o&&(o.dirty=!1),e[F]&=-9217,s)kk(r,e,r.template,e[Qe]);else if(i&8192){$C(e),WC(e,1);let a=r.components;a!==null&&GC(e,a,1),jC(e)}}function GC(e,t,n){for(let r=0;r<t.length;r++)Fk(e,t[r],n)}function Lk(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Jr(~i);else{let o=i,s=n[++r],a=n[++r];HN(s,o);let c=t[o];ee(24,c),a(2,c),ee(25,c)}}}finally{Jr(-1)}}function wu(e,t){let n=vI()?64:1088;for(e[Pn].changeDetectionScheduler?.notify(t);e;){e[F]|=n;let r=Qr(e);if(xs(e)&&!r)return e;e=r}return null}function qC(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function KC(e,t,n,r=!0){let i=t[P];if(jk(i,t,e,n),r){let s=Dp(n,e),a=t[se],c=a.parentNode(e[Ln]);c!==null&&hk(i,e[Pt],a,t,c,s)}let o=t[nn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Vk(e,t){let n=Gl(e,t);return n!==void 0&&Ig(n[P],n),n}function Gl(e,t){if(e.length<=ht)return;let n=ht+t,r=e[n];if(r){let i=r[ao];i!==null&&i!==e&&wg(i,r),t>0&&(e[n-1][Ot]=r[Ot]);let o=Al(e,ht+t);fk(r[P],r);let s=o[co];s!==null&&s.detachView(o[P]),r[Re]=null,r[Ot]=null,r[F]&=-129}return r}function jk(e,t,n,r){let i=ht+r,o=n.length;r>0&&(n[i-1][Ot]=t),r<o-ht?(t[Ot]=n[i],zw(n,ht+r,t)):(n.push(t),t[Ot]=null),t[Re]=n;let s=t[ao];s!==null&&n!==s&&YC(s,t);let a=t[co];a!==null&&a.insertView(e),cp(t),t[F]|=128}function YC(e,t){let n=e[xl],r=t[Re];if(xt(r))e[F]|=2;else{let i=r[Re][Ct];t[Ct]!==i&&(e[F]|=2)}n===null?e[xl]=[t]:n.push(t)}var Ps=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[P];return zl(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Qe]}set context(t){this._lView[Qe]=t}get destroyed(){return ri(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Re];if(ln(t)){let n=t[Ol],r=n?n.indexOf(this):-1;r>-1&&(Gl(t,r),Al(n,r))}this._attachedToViewContainer=!1}Ig(this._lView[P],this._lView)}onDestroy(t){dI(this._lView,t)}markForCheck(){wu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[F]&=-129}reattach(){cp(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,HC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=xs(this._lView),n=this._lView[ao];n!==null&&!t&&wg(n,this._lView),LC(this._lView[P],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=t;let n=xs(this._lView),r=this._lView[ao];r!==null&&!n&&YC(r,this._lView),cp(this._lView)}};var Iu=(()=>{class e{static __NG_ELEMENT_ID__=$k}return e})(),Uk=Iu,Bk=class extends Uk{_declarationLView;_declarationTContainer;elementRef;constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=FC(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Ps(i)}};function $k(){return Hk(nt(),re())}function Hk(e,t){return e.type&4?new Bk(t,e,du(e,t)):null}function Dg(e,t,n,r,i){let o=e.data[t];if(o===null)o=Wk(e,t,n,r,i),$N()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=VN();o.injectorIndex=s===null?-1:s.injectorIndex}return Bs(o,!0),o}function Wk(e,t,n,r,i){let o=gI(),s=mI(),a=s?o:o&&o.parent,c=e.data[t]=Gk(e,a,n,t,r,i);return zk(e,c,o,s),c}function zk(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function Gk(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Us()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var qk=new RegExp(`^(\\d+)*(${nC}|${tC})*(.*)`);function Kk(e){let t=e.match(qk),[n,r,i,o]=t,s=r?parseInt(r,10):i,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function Yk(e){return!e.prev&&e.parent?.type===8}function Gh(e){return e.index-Le}function Zk(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function Cu(e,t,n,r){let i=Gh(r),o=Zk(e,i);if(o===void 0){let s=e.data[LO];if(s?.[i])o=Jk(s[i],n);else if(t.firstChild===r)o=e.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(Yk(r)){let l=Gh(r.parent);o=wp(e,l)}else{let l=Ft(c,n);if(a)o=l.firstChild;else{let u=Gh(c),d=wp(e,u);if(c.type===2&&d){let h=ag(e,u)+1;o=bu(h,d)}else o=l.nextSibling}}}}return o}function bu(e,t){let n=t;for(let r=0;r<e;r++)n=n.nextSibling;return n}function Qk(e,t){let n=e;for(let r=0;r<t.length;r+=2){let i=t[r],o=t[r+1];for(let s=0;s<o;s++)switch(i){case OO:n=n.firstChild;break;case xO:n=n.nextSibling;break}}return n}function Jk(e,t){let[n,...r]=Kk(e),i;if(n===tC)i=t[Ct][pt];else if(n===nC)i=Ox(t[Ct][pt]);else{let o=Number(n);i=kt(t[o+Le])}return Qk(i,r)}var Xk=!1;function eP(e){Xk=e}function tP(e){let t=e[nn];if(t){let{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){let i=e[se];for(let o of r.values())nP(i,n,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function nP(e,t,n){for(let r of n.node.cases[n.case]){let i=t.get(r.index-Le);i&&dg(e,i,!1)}}function ZC(e){let t=e[Fn]??[],r=e[Re][se],i=[];for(let o of t)o.data[VO]!==void 0?i.push(o):QC(o,r);e[Fn]=i}function rP(e){let{lContainer:t}=e,n=t[Fn];if(n===null)return;let i=t[Re][se];for(let o of n)QC(o,i)}function QC(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[$l];for(;n<i;){let o=r.nextSibling;dg(t,r,!1),r=o,n++}}}function Du(e){ZC(e);let t=e[pt];xt(t)&&ql(t);for(let n=ht;n<e.length;n++)ql(e[n])}function ql(e){tP(e);let t=e[P];for(let n=Le;n<t.bindingStartIndex;n++)if(ln(e[n])){let r=e[n];Du(r)}else xt(e[n])&&ql(e[n])}function JC(e){let t=e._views;for(let n of t){let r=gx(n);r!==null&&r[pt]!==null&&(xt(r)?ql(r):Du(r))}}function iP(e,t,n,r){e!==null&&(n.cleanup(t),Du(e.lContainer),JC(r))}function oP(e,t){let n=[];for(let r of t)for(let i=0;i<(r[rC]??1);i++){let o={data:r,firstChild:null};r[$l]>0&&(o.firstChild=e,e=bu(r[$l],e)),n.push(o)}return[e,n]}var XC=()=>null;function sP(e,t){let n=e[Fn];return!t||n===null||n.length===0?null:n[0].data[FO]===t?n.shift():(ZC(e),null)}function aP(){XC=sP}function lw(e,t){return XC(e,t)}var cP=class{},eb=class{},Sp=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Ze(t)}.`)}},Tu=class{static NULL=new Sp},lo=class{},fn=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>lP()}return e})();function lP(){let e=re(),t=nt(),n=sn(t.index,e);return(xt(n)?n:e)[se]}var uP=(()=>{class e{static \u0275prov=S({token:e,providedIn:"root",factory:()=>null})}return e})();var qh={},io=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=nu(r);let i=this.injector.get(t,qh,r);return i!==qh||n===qh?i:this.parentInjector.get(t,n,r)}};function uw(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=OE(i,a);else if(o==2){let c=a,l=t[++s];r=OE(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function T(e,t=B.Default){let n=re();if(n===null)return O(e,t);let r=nt();return FI(r,n,ze(e),t)}function tb(){let e="invalid";throw new Error(e)}function nb(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a,c=null,l=null,u=fP(s);u===null?a=s:[a,c,l]=u,gP(e,t,n,a,o,c,l)}o!==null&&r!==null&&dP(n,r,o)}function dP(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new b(-301,!1);r.push(t[i],o)}}function fP(e){let t=null,n=!1;for(let s=0;s<e.length;s++){let a=e[s];if(s===0&&on(a)&&(t=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of e)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,hP(s,r,o,i)),s===t&&(r??=[],r.push(s));return r!==null?(r.push(...t===null?e:e.slice(1)),[r,i,o]):null}function hP(e,t,n,r){let i=t.length;e.findHostDirectiveDefs(e,t,r),n.set(e,[i,t.length-1])}function pP(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function gP(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&on(h)&&(c=!0,pP(e,n,f)),fp(Ll(n,t),e,h.type)}wP(n,e.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=RC(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=ks(n.mergedAttrs,h.hostAttrs),vP(e,n,t,d,h),EP(d,h,i),s!==null&&s.has(h)){let[w,A]=s.get(h);n.directiveToIndex.set(h.type,[d,w+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}mP(e,n,o)}function mP(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))dw(0,t,i,r),dw(1,t,i,r),hw(t,r,!1);else{let o=n.get(i);fw(0,t,o,r),fw(1,t,o,r),hw(t,r,!0)}}}function dw(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),rb(t,o)}}function fw(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),rb(t,s)}}function rb(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function hw(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||lg(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function vP(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=oo(i.type,!0)),s=new Xr(o,on(i),T);e.blueprint[r]=s,n[r]=s,yP(e,t,r,RC(e,n,i.hostVars,$n),i)}function yP(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;_P(s)!=a&&s.push(a),s.push(n,r,o)}}function _P(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function EP(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;on(t)&&(n[""]=e)}}function wP(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function ib(e,t,n,r,i,o,s,a){let c=t.consts,l=kl(c,s),u=Dg(t,e,2,r,l);return o&&nb(t,n,u,kl(c,a),i),u.mergedAttrs=ks(u.mergedAttrs,u.attrs),u.attrs!==null&&uw(u,u.attrs,!1),u.mergedAttrs!==null&&uw(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function ob(e,t){SI(e,t),rI(t)&&e.queries.elementEnd(t)}var Kl=class extends Tu{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=cr(t);return new uo(n,this.ngModule)}};function IP(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&_u.SignalBased)!==0};return i&&(o.transform=i),o})}function CP(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function bP(e,t,n){let r=t instanceof Fe?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new io(n,r):n}function DP(e){let t=e.get(lo,null);if(t===null)throw new b(407,!1);let n=e.get(uP,null),r=e.get(ei,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r}}function TP(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return ug(t,n,n==="svg"?SN:n==="math"?AN:null)}var uo=class extends eb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=IP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=CP(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=$x(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i){ee(22);let o=G(null);try{let s=this.componentDef,a=r?["ng-version","19.2.11"]:Hx(this.componentDef.selectors[0]),c=fg(0,null,null,1,0,null,null,null,null,[a],null),l=bP(s,i||this.ngModule,t),u=DP(l),d=u.rendererFactory.createRenderer(null,s),f=r?Zx(d,r,s.encapsulation,l):TP(s,d),h=hg(null,c,null,512|MC(s),null,null,u,d,l,null,gC(f,l,!0));h[Le]=f,Yp(h);let g=null;try{let w=ib(Le,c,h,"#host",()=>[this.componentDef],!0,0);f&&(AC(d,f,w),Hs(f,h)),gg(c,h,w),yC(c,w,h),ob(c,w),n!==void 0&&SP(w,this.ngContentSelectors,n),g=sn(w.index,h),h[Qe]=g[Qe],_g(c,h,null)}catch(w){throw g!==null&&yp(g),yp(h),w}finally{ee(23),Zp()}return new Ap(this.componentType,h)}finally{G(o)}}},Ap=class extends cP{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n){super(),this._rootLView=n,this._tNode=su(n[P],Le),this.location=du(this._tNode,n),this.instance=sn(this._tNode.index,n)[Qe],this.hostView=this.changeDetectorRef=new Ps(n,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=yg(r,i[P],i,t,n);this.previousInputValues.set(t,n);let s=sn(r.index,i);wu(s,1)}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function SP(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Io=(()=>{class e{static __NG_ELEMENT_ID__=AP}return e})();function AP(){let e=nt();return RP(e,re())}var MP=Io,sb=class extends MP{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return du(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Jp(this._hostTNode,this._hostLView);if(RI(t)){let n=Fl(t,this._hostLView),r=Pl(t),i=n[P].data[r+8];return new Yr(i,n)}else return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=pw(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lw(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,bp(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!CN(t),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?t:new uo(cr(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let w=(s?l:this.parentInjector).get(Fe,null);w&&(o=w)}let u=cr(c.componentType??{}),d=lw(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,bp(this._hostTNode,d)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(MN(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Re],l=new sb(c,c[Pt],c[Re]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return KC(s,i,o,r),t.attachToViewContainerRef(),zw(Kh(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=pw(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Gl(this._lContainer,n);r&&(Al(Kh(this._lContainer),n),Ig(r[P],r))}detach(t){let n=this._adjustIndex(t,-1),r=Gl(this._lContainer,n);return r&&Al(Kh(this._lContainer),n)!=null?new Ps(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function pw(e){return e[Ol]}function Kh(e){return e[Ol]||(e[Ol]=[])}function RP(e,t){let n,r=t[e.index];return ln(r)?n=r:(n=qC(r,t,null,e),t[e.index]=n,pg(t,n)),ab(n,t,e,r),new sb(n,e,t)}function NP(e,t){let n=e[se],r=n.createComment(""),i=Ft(t,e),o=n.parentNode(i);return Wl(n,o,r,n.nextSibling(i),!1),r}var ab=cb,Tg=()=>!1;function OP(e,t,n){return Tg(e,t,n)}function cb(e,t,n,r){if(e[Ln])return;let i;n.type&8?i=kt(r):i=NP(t,n),e[Ln]=i}function xP(e,t,n){if(e[Ln]&&e[Fn])return!0;let r=n[nn],i=t.index-Le;if(!r||DO(t)||zs(r,i))return!1;let s=wp(r,i),a=r.data[ig]?.[i],[c,l]=oP(s,a);return e[Ln]=c,e[Fn]=l,!0}function kP(e,t,n,r){Tg(e,n,t)||cb(e,t,n,r)}function PP(){ab=kP,Tg=xP}var fo=class{},Sg=class{};var Mp=class extends fo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Kl(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Kw(t);this._bootstrapComponents=IC(o.bootstrap),this._r3Injector=jI(t,n,[{provide:fo,useValue:this},{provide:Tu,useValue:this.componentFactoryResolver},...r],Ze(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Rp=class extends Sg{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Mp(this.moduleType,t,[])}};var Yl=class extends fo{injector;componentFactoryResolver=new Kl(this);instance=null;constructor(t){super();let n=new Ns([...t.providers,{provide:fo,useValue:this},{provide:Tu,useValue:this.componentFactoryResolver}],t.parent||Gp(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Co(e,t,n=null){return new Yl({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var FP=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Wp(!1,n.type),i=r.length>0?Co([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=S({token:e,providedIn:"environment",factory:()=>new e(O(Fe))})}return e})();function Be(e){return Ls(()=>{let t=lb(e),n=U(_({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===YI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(FP).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||cn.Emulated,styles:e.styles||wt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&un("NgStandalone"),ub(n);let r=e.dependencies;return n.directiveDefs=gw(r,!1),n.pipeDefs=gw(r,!0),n.id=BP(n),n})}function LP(e){return cr(e)||Yw(e)}function VP(e){return e!==null}function Hn(e){return Ls(()=>({type:e.type,bootstrap:e.bootstrap||wt,declarations:e.declarations||wt,imports:e.imports||wt,exports:e.exports||wt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function jP(e,t){if(e==null)return Zr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=_u.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function UP(e){if(e==null)return Zr;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function he(e){return Ls(()=>{let t=lb(e);return ub(t),t})}function lb(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Zr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||wt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jP(e.inputs,t),outputs:UP(e.outputs),debugInfo:null}}function ub(e){e.features?.forEach(t=>t(e))}function gw(e,t){if(!e)return null;let n=t?Zw:LP;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(VP)}function BP(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function $P(e){return Object.getPrototypeOf(e.prototype).constructor}function Vt(e){let t=$P(e.type),n=!0,r=[e];for(;t;){let i;if(on(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new b(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Yh(e.inputs),s.declaredInputs=Yh(e.declaredInputs),s.outputs=Yh(e.outputs);let a=i.hostBindings;a&&qP(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&zP(e,c),l&&GP(e,l),HP(e,i),GR(e.outputs,i.outputs),on(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Vt&&(n=!1)}}t=Object.getPrototypeOf(t)}WP(r)}function HP(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function WP(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=ks(i.hostAttrs,n=ks(n,i.hostAttrs))}}function Yh(e){return e===Zr?{}:e===wt?[]:e}function zP(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function GP(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function qP(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function db(e){return YP(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function KP(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function YP(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function fb(e,t,n){return e[t]=n}function ZP(e,t){return e[t]}function bo(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function QP(e,t,n,r,i,o,s,a,c){let l=t.consts,u=Dg(t,e,4,s||null,a||null);pI()&&nb(t,n,u,kl(l,c),PC),u.mergedAttrs=ks(u.mergedAttrs,u.attrs),SI(t,u);let d=u.tView=fg(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function JP(e,t,n,r,i,o,s,a,c,l){let u=n+Le,d=t.firstCreatePass?QP(u,t,e,r,i,o,s,a,c):t.data[u];Bs(d,!1);let f=hb(t,e,d,n);Qp()&&Cg(t,e,f,d),Hs(f,e);let h=qC(f,e,f,d);return e[u]=h,pg(e,h),OP(h,d,e),qp(d)&&gg(t,e,d),c!=null&&xC(e,d,l),d}function de(e,t,n,r,i,o,s,a){let c=re(),l=tt(),u=kl(l.consts,o);return JP(c,l,e,t,n,r,i,u,s,a),de}var hb=pb;function pb(e,t,n,r){return dr(!0),t[se].createComment("")}function XP(e,t,n,r){let i=t[nn],o=!i||Us()||wo(n)||zs(i,r);if(dr(o),o)return pb(e,t);let s=i.data[PO]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Cu(i,e,t,n);vu(i,r,a);let c=ag(i,r);return bu(c,a)}function e1(){hb=XP}var t1=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?Co(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=S({token:e,providedIn:"environment",factory:()=>new e})}return e})();var n1=new C("");function Zh(e,t,n){return e.get(t1).getOrCreateInjector(t,e,n,"")}function r1(e,t,n){if(e instanceof io){let i=e.injector,o=e.parentInjector,s=Zh(o,t,n);return new io(i,s)}let r=e.get(Fe);if(r!==e){let i=Zh(r,t,n);return new io(e,i)}return Zh(e,t,n)}function eo(e,t,n,r=!1){let i=n[Re],o=i[P];if(ri(i))return;let s=Ws(i,t),a=s[pu],c=s[JO];if(!(c!==null&&e<c)&&mw(a,e)&&mw(s[YO]??-1,e)){let l=gu(o,t),d=!r&&!0&&(rx(l)!==null||nw(l,Se.Loading)!==null||nw(l,Se.Placeholder))?s1:o1;try{d(e,s,n,t,i)}catch(f){vg(i,f)}}}function i1(e,t){let n=e[Fn]?.findIndex(i=>i.data[jO]===t[pu])??-1;return{dehydratedView:n>-1?e[Fn][n]:null,dehydratedViewIx:n}}function o1(e,t,n,r,i){ee(20);let o=nx(e,i,r);if(o!==null){t[pu]=e;let s=i[P],a=o+Le,c=su(s,a),l=0;Vk(n,l);let u;if(e===Se.Complete){let g=gu(s,r),w=g.providers;w&&w.length>0&&(u=r1(i[rn],g,w))}let{dehydratedView:d,dehydratedViewIx:f}=i1(n,t),h=FC(i,c,null,{injector:u,dehydratedView:d});if(KC(n,h,l,bp(c,d)),wu(h,2),f>-1&&n[Fn]?.splice(f,1),(e===Se.Complete||e===Se.Error)&&Array.isArray(t[ro])){for(let g of t[ro])g();t[ro]=null}}ee(21)}function mw(e,t){return e<t}function vw(e,t,n){e.loadingPromise.then(()=>{e.loadingState===ft.COMPLETE?eo(Se.Complete,t,n):e.loadingState===ft.FAILED&&eo(Se.Error,t,n)})}var s1=null;var Ag=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var gb=new C("");var a1=(()=>{class e{static \u0275prov=S({token:e,providedIn:"root",factory:()=>new Np})}return e})(),Np=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}};function oi(e){return!!e&&typeof e.then=="function"}function mb(e){return!!e&&typeof e.subscribe=="function"}var vb=new C("");function Mg(e){return et([{provide:vb,multi:!0,useValue:e}])}var yb=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=m(vb,{optional:!0})??[];injector=m(ve);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ve(this.injector,i);if(oi(o))n.push(o);else if(mb(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),pr=new C("");function c1(){ih(()=>{throw new b(600,!1)})}function l1(e){return e.isBoundToModule}var u1=10;var Je=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=m(yO);afterRenderManager=m(lC);zonelessEnabled=m(uu);rootEffectScheduler=m(a1);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new we;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=m(Bn).hasPendingTasks.pipe(Y(n=>!n));constructor(){m(Eo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=m(Fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ve.NULL){ee(10);let o=n instanceof eb;if(!this._injector.get(yb).done){let h="";throw new b(405,h)}let a;o?a=n:a=this._injector.get(Tu).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let c=l1(a)?void 0:this._injector.get(fo),l=r||a.selector,u=a.create(i,[],l,c),d=u.location.nativeElement,f=u.injector.get(gb,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),wl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),ee(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(og.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new b(101,!1);let n=G(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,G(n),this.afterTick.next(),ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(lo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<u1;)ee(14),this.synchronizeOnce(),ee(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)d1(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>au(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;wl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(pr,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>wl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function wl(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function d1(e,t,n,r){if(!n&&!au(e))return;HC(e,t,n&&!r?0:1)}function f1(e,t,n){let r=t[rn],i=t[P];if(e.loadingState!==ft.NOT_STARTED)return e.loadingPromise??Promise.resolve();let o=Ws(t,n),s=ix(i,e);e.loadingState=ft.IN_PROGRESS,El(1,o);let a=e.dependencyResolverFn,c=r.get($s).add();return a?(e.loadingPromise=Promise.allSettled(a()).then(l=>{let u=!1,d=[],f=[];for(let h of l)if(h.status==="fulfilled"){let g=h.value,w=cr(g)||Yw(g);if(w)d.push(w);else{let A=Zw(g);A&&f.push(A)}}else{u=!0;break}if(u){if(e.loadingState=ft.FAILED,e.errorTmplIndex===null){let h="",g=new b(-750,!1);vg(t,g)}}else{e.loadingState=ft.COMPLETE;let h=s.tView;if(d.length>0){h.directiveRegistry=rw(h.directiveRegistry,d);let g=d.map(A=>A.type),w=Wp(!1,...g);e.providers=w}f.length>0&&(h.pipeRegistry=rw(h.pipeRegistry,f))}}),e.loadingPromise.finally(()=>{e.loadingPromise=null,c()})):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=ft.COMPLETE,c()}),e.loadingPromise)}function h1(e,t){return t[rn].get(n1,null,{optional:!0})?.behavior!==uC.Manual}function p1(e,t,n){let r=t[P],i=t[n.index];if(!h1(e,t))return;let o=Ws(t,n),s=gu(r,n);switch(ex(o),s.loadingState){case ft.NOT_STARTED:eo(Se.Loading,n,i),f1(s,t,n),s.loadingState===ft.IN_PROGRESS&&vw(s,n,i);break;case ft.IN_PROGRESS:eo(Se.Loading,n,i),vw(s,n,i);break;case ft.COMPLETE:eo(Se.Complete,n,i);break;case ft.FAILED:eo(Se.Error,n,i);break;default:}}function g1(e,t,n){return p(this,null,function*(){let r=e.get(sg);if(r.hydrating.has(t))return;let{parentBlockPromise:o,hydrationQueue:s}=wx(t,e);if(s.length===0)return;o!==null&&s.shift(),y1(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield yw(e,s,n):r.awaitParentBlock(a,()=>p(null,null,function*(){return yield yw(e,s,n)}))})}function yw(e,t,n){return p(this,null,function*(){let r=e.get(sg),i=r.hydrating,o=e.get(Bn),s=o.add();for(let c=0;c<t.length;c++){let l=t[c],u=r.get(l);if(u!=null){if(yield E1(u),yield _1(e),m1(u)){rP(u),_w(t.slice(c),r);break}i.get(l).resolve()}else{v1(c,t,r),_w(t.slice(c),r);break}}let a=t[t.length-1];yield i.get(a)?.promise,o.remove(s),n&&n(t),iP(r.get(a),t,r,e.get(Je))})}function m1(e){return Ws(e.lView,e.tNode)[pu]===Se.Error}function v1(e,t,n){let r=e-1,i=r>-1?n.get(t[r]):null;i&&Du(i.lContainer)}function _w(e,t){let n=t.hydrating;for(let r in e)n.get(r)?.reject();t.cleanup(e)}function y1(e,t){for(let n of t)e.hydrating.set(n,Promise.withResolvers())}function _1(e){return new Promise(t=>hu(t,{injector:e}))}function E1(e){return p(this,null,function*(){let{tNode:t,lView:n}=e,r=Ws(n,t);return new Promise(i=>{w1(r,i),p1(2,n,t)})})}function w1(e,t){Array.isArray(e[ro])||(e[ro]=[]),e[ro].push(t)}function qs(e,t,n,r){let i=re(),o=cu();if(bo(i,o,t)){let s=tt(),a=lu();ok(a,i,e,t,n,r)}return qs}function _b(e,t,n,r){return bo(e,cu(),n)?t+tu(n)+r:$n}function gl(e,t){return e<<17|t<<2}function ti(e){return e>>17&32767}function I1(e){return(e&2)==2}function C1(e,t){return e&131071|t<<17}function Op(e){return e|2}function ho(e){return(e&131068)>>2}function Qh(e,t){return e&-131069|t<<2}function b1(e){return(e&1)===1}function xp(e){return e|1}function D1(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ti(s),c=ho(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Vs(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=ti(e[a+1]);e[r+1]=gl(f,a),f!==0&&(e[f+1]=Qh(e[f+1],r)),e[a+1]=C1(e[a+1],r)}else e[r+1]=gl(a,0),a!==0&&(e[a+1]=Qh(e[a+1],r)),a=r;else e[r+1]=gl(c,0),a===0?a=r:e[c+1]=Qh(e[c+1],r),c=r;l&&(e[r+1]=Op(e[r+1])),Ew(e,u,r,!0),Ew(e,u,r,!1),T1(t,u,e,r,o),s=gl(a,c),o?t.classBindings=s:t.styleBindings=s}function T1(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Vs(o,t)>=0&&(n[r+1]=xp(n[r+1]))}function Ew(e,t,n,r){let i=e[n+1],o=t===null,s=r?ti(i):ho(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];S1(c,t)&&(a=!0,e[s+1]=r?xp(l):Op(l)),s=r?ti(l):ho(l)}a&&(e[n+1]=r?Op(i):xp(i))}function S1(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Vs(e,t)>=0:!1}function R(e,t,n){let r=re(),i=cu();if(bo(r,i,t)){let o=tt(),s=lu();mg(o,s,r,e,t,r[se],n,!1)}return R}function ww(e,t,n,r,i){yg(t,e,n,i?"class":"style",r)}function Su(e,t){return A1(e,t,null,!0),Su}function A1(e,t,n,r){let i=re(),o=tt(),s=BN(2);if(o.firstUpdatePass&&R1(o,e,s,r),t!==$n&&bo(i,s,t)){let a=o.data[vo()];P1(o,a,i,i[se],e,i[s+1]=F1(t,n),r,s)}}function M1(e,t){return t>=e.expandoStartIndex}function R1(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[vo()],s=M1(e,n);L1(o,r)&&t===null&&!s&&(t=!1),t=N1(i,o,t,r),D1(i,o,t,n,s,r)}}function N1(e,t,n,r){let i=zN(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Jh(null,e,t,n,r),n=Fs(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Jh(i,e,t,n,r),o===null){let c=O1(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Jh(null,e,t,c[1],r),c=Fs(c,t.attrs,r),x1(e,t,r,c))}else o=k1(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function O1(e,t,n){let r=n?t.classBindings:t.styleBindings;if(ho(r)!==0)return e[ti(r)]}function x1(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[ti(i)]=r}function k1(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Fs(r,s,n)}return Fs(r,t.attrs,n)}function Jh(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Fs(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Fs(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),dN(e,s,n?!0:t[++o]))}return e===void 0?null:e}function P1(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=b1(l)?Iw(c,t,n,i,ho(l),s):void 0;if(!Zl(u)){Zl(o)||I1(l)&&(o=Iw(c,null,n,i,a,s));let d=cI(vo(),n);bk(r,s,d,i,o)}}function Iw(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===$n&&(f=d?wt:void 0);let h=d?Vh(f,r):u===r?f:void 0;if(l&&!Zl(h)&&(h=Vh(c,r)),Zl(h)&&(a=h,s))return a;let g=e[i+1];i=s?ti(g):ho(g)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Vh(c,r))}return a}function Zl(e){return e!==void 0}function F1(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Ze(Gs(e)))),e}function L1(e,t){return(e.flags&(t?8:16))!==0}function v(e,t,n,r){let i=re(),o=tt(),s=Le+e,a=i[se],c=o.firstCreatePass?ib(s,o,i,t,PC,pI(),n,r):o.data[s],l=Eb(o,i,c,a,t,e);i[s]=l;let u=qp(c);return Bs(c,!0),AC(a,l,c),!wo(c)&&Qp()&&Cg(o,i,l,c),(ON()===0||u)&&Hs(l,i),xN(),u&&(gg(o,i,c),yC(o,c,i)),r!==null&&xC(i,c),v}function y(){let e=nt();mI()?jN():(e=e.parent,Bs(e,!1));let t=e;PN(t)&&LN(),kN();let n=tt();return n.firstCreatePass&&ob(n,t),t.classesWithoutHost!=null&&ZN(t)&&ww(n,t,re(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&QN(t)&&ww(n,t,re(),t.stylesWithoutHost,!1),y}function oe(e,t,n,r){return v(e,t,n,r),y(),oe}var Eb=(e,t,n,r,i,o)=>(dr(!0),ug(r,i,DI()));function V1(e,t,n,r,i,o){let s=t[nn],a=!s||Us()||wo(n)||zs(s,o);if(dr(a),a)return ug(r,i,DI());let c=Cu(s,e,t,n);return mC(s,o)&&vu(s,o,c.nextSibling),s&&(qI(n)||KI(c))&&ni(n)&&(FN(n),SC(c)),c}function j1(){Eb=V1}var U1=(e,t,n,r)=>(dr(!0),DC(t[se],""));function B1(e,t,n,r){let i,o=t[nn],s=!o||Us()||zs(o,r)||wo(n);if(dr(s),s)return DC(t[se],"");let a=Cu(o,e,t,n),c=_x(o,r);return vu(o,r,a),i=bu(c,a),i}function $1(){U1=B1}function Do(){return re()}var Ql="en-US";var H1=Ql;function W1(e){typeof e=="string"&&(H1=e.toLowerCase().replace(/_/g,"-"))}function Cw(e,t,n){return function r(i){if(i===Function)return n;let o=ni(e)?sn(e.index,t):t;wu(o,5);let s=t[Qe],a=bw(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=bw(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function bw(e,t,n,r){let i=G(null);try{return ee(6,t,n),n(r)!==!1}catch(o){return z1(e,o),!1}finally{ee(7,t,n),G(i)}}function z1(e,t){let n=e[rn],r=n?n.get(an,null):null;r&&r.handleError(t)}function Dw(e,t,n,r,i,o){let s=t[n],a=t[P],l=a.data[n].outputs[r],u=s[l],d=a.firstCreatePass?hI(a):null,f=fI(t),h=u.subscribe(o),g=f.length;f.push(o,h),d&&d.push(i,e.index,g,-(g+1))}var Rg=new Map;function G1(e,t){Rg.set(e,t)}function q1(e){Rg.delete(e)}function fe(e,t,n,r){let i=re(),o=tt(),s=nt();return wb(o,i,i[se],s,e,t,r),fe}function K1(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Rl],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function wb(e,t,n,r,i,o,s){let a=qp(r),l=e.firstCreatePass?hI(e):null,u=fI(t),d=!0;if(r.type&3||s){let f=Ft(r,t),h=s?s(f):f,g=u.length,w=s?j=>s(kt(j[r.index])):r.index,A=null;if(!s&&a&&(A=K1(e,t,i,r.index)),A!==null){let j=A.__ngLastListenerFn__||A;j.__ngNextListenerFn__=o,A.__ngLastListenerFn__=o,d=!1}else{o=Cw(r,t,o);let j=t[rn].get(kn);Rg.get(j)?.(h,i,o);let ge=n.listen(h,i,o);u.push(o,ge),l&&l.push(i,w,g,g+1)}}else o=Cw(r,t,o);if(d){let f=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let w=h[g],A=h[g+1];Dw(r,t,w,A,i,o)}if(f&&f.length)for(let g of f)Dw(r,t,g,i,i,o)}}function le(e=1){return qN(e)}function To(e,t,n,r,i){let o=re(),s=_b(o,t,n,r);if(s!==$n){let a=tt(),c=lu();mg(a,c,o,e,s,o[se],i,!1)}return To}function D(e,t=""){let n=re(),r=tt(),i=e+Le,o=r.firstCreatePass?Dg(r,i,1,t,null):r.data[i],s=Ib(r,n,o,t,e);n[i]=s,Qp()&&Cg(r,n,s,o),Bs(o,!1)}var Ib=(e,t,n,r,i)=>(dr(!0),bC(t[se],r));function Y1(e,t,n,r,i){let o=t[nn],s=!o||Us()||wo(n)||zs(o,i);return dr(s),s?bC(t[se],r):Cu(o,e,t,n)}function Z1(){Ib=Y1}function ae(e){return Au("",e,""),ae}function Au(e,t,n){let r=re(),i=_b(r,e,t,n);return i!==$n&&Q1(r,vo(),i),Au}function Q1(e,t,n){let r=cI(t,e);Wx(e[se],r,n)}function bt(e,t,n){GI(t)&&(t=t());let r=re(),i=cu();if(bo(r,i,t)){let o=tt(),s=lu();mg(o,s,r,e,t,r[se],n,!1)}return bt}function jt(e,t){let n=GI(e);return n&&e.set(t),n}function Dt(e,t){let n=re(),r=tt(),i=nt();return wb(r,n,n[se],i,e,t),Dt}function J1(e,t,n){let r=tt();if(r.firstCreatePass){let i=on(e);kp(n,r.data,r.blueprint,i,!0),kp(t,r.data,r.blueprint,i,!1)}}function kp(e,t,n,r,i){if(e=ze(e),Array.isArray(e))for(let o=0;o<e.length;o++)kp(e[o],t,n,r,i);else{let o=tt(),s=re(),a=nt(),c=so(e)?e:ze(e.provide),l=Xw(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(so(e)||!e.multi){let h=new Xr(l,i,T),g=ep(c,t,i?u:u+f,d);g===-1?(fp(Ll(a,s),o,c),Xh(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=ep(c,t,u+f,d),g=ep(c,t,u,u+f),w=h>=0&&n[h],A=g>=0&&n[g];if(i&&!A||!i&&!w){fp(Ll(a,s),o,c);let j=tF(i?eF:X1,n.length,i,r,l);!i&&A&&(n[g].providerFactory=j),Xh(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=Cb(n[i?g:h],l,!i&&r);Xh(o,e,h>-1?h:g,j)}!i&&r&&A&&n[g].componentProviders++}}}function Xh(e,t,n,r){let i=so(t),o=vN(t);if(i||o){let c=(o?ze(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Cb(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ep(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function X1(e,t,n,r,i){return Pp(this.multi,[])}function eF(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Vl(r,r[P],this.providerFactory.index,i);s=c.slice(0,a),Pp(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Pp(o,s);return s}function Pp(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function tF(e,t,n,r,i){let o=new Xr(e,n,T);return o.multi=[],o.index=t,o.componentProviders=0,Cb(o,i,r&&!n),o}function si(e,t=[]){return n=>{n.providersResolver=(r,i)=>J1(r,i?i(e):e,t)}}function Ng(e,t,n){let r=yI()+e,i=re();return i[r]===$n?fb(i,r,n?t.call(n):t()):ZP(i,r)}function Ut(e,t,n,r){return rF(re(),yI(),e,t,n,r)}function nF(e,t){let n=e[t];return n===$n?void 0:n}function rF(e,t,n,r,i,o){let s=t+n;return bo(e,s,i)?fb(e,s+1,o?r.call(o,i):r(i)):nF(e,s+1)}var lr=class{full;major;minor;patch;constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},bb=new lr("19.2.11"),Fp=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Db=(()=>{class e{compileModuleSync(n){return new Rp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Kw(n),o=IC(i.declarations).reduce((s,a)=>{let c=cr(a);return c&&s.push(new uo(c)),s},[]);return new Fp(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var iF=(()=>{class e{zone=m(Q);changeDetectionScheduler=m(ei);applicationRef=m(Je);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),oF=new C("",{factory:()=>!1});function Tb({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Q(U(_({},Ab()),{scheduleInRootZone:n})),[{provide:Q,useFactory:e},{provide:ar,multi:!0,useFactory:()=>{let r=m(iF,{optional:!0});return()=>r.initialize()}},{provide:ar,multi:!0,useFactory:()=>{let r=m(sF);return()=>{r.initialize()}}},t===!0?{provide:BI,useValue:!0}:[],{provide:$I,useValue:n??UI}]}function Sb(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Tb({ngZoneFactory:()=>{let i=Ab(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&un("NgZone_CoalesceEvent"),new Q(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return et([{provide:oF,useValue:!0},{provide:uu,useValue:!1},r])}function Ab(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var sF=(()=>{class e{subscription=new me;initialized=!1;zone=m(Q);pendingTasks=m(Bn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Q.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Q.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var aF=(()=>{class e{appRef=m(Je);taskService=m(Bn);ngZone=m(Q);zonelessEnabled=m(uu);tracing=m(Eo,{optional:!0});disableScheduling=m(BI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ul):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(m($I,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof vp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?KE:HI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ul+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,KE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function cF(){return typeof $localize<"u"&&$localize.locale||Ql}var Og=new C("",{providedIn:"root",factory:()=>m(Og,B.Optional|B.SkipSelf)||cF()});var Lp=new C(""),lF=new C("");function Ss(e){return!e.moduleRef}function uF(e){let t=Ss(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Q);return n.run(()=>{Ss(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(an,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Ss(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Lp);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Lp);s.add(o),e.moduleRef.onDestroy(()=>{wl(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return fF(r,n,()=>{let o=t.get(yb);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Og,Ql);if(W1(s||Ql),!t.get(lF,!0))return Ss(e)?t.get(Je):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Ss(e)){let c=t.get(Je);return e.rootComponent!==void 0&&c.bootstrap(e.rootComponent),c}else return dF(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function dF(e,t){let n=e.injector.get(Je);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new b(-403,!1);t.push(e)}function fF(e,t,n){try{let r=n();return oi(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Il=null;function hF(e=[],t){return ve.create({name:t,providers:[{provide:ru,useValue:"platform"},{provide:Lp,useValue:new Set([()=>Il=null])},...e]})}function pF(e=[]){if(Il)return Il;let t=hF(e);return Il=t,c1(),gF(t),t}function gF(e){let t=e.get(ng,null);Ve(e,()=>{t?.forEach(n=>n())})}function xg(){return!1}var Wn=(()=>{class e{static __NG_ELEMENT_ID__=mF}return e})();function mF(e){return vF(nt(),re(),(e&16)===16)}function vF(e,t,n){if(ni(e)&&!n){let r=sn(e.index,t);return new Ps(r,r)}else if(e.type&175){let r=t[Ct];return new Ps(r,t)}return null}var Vp=class{constructor(){}supports(t){return db(t)}create(t){return new jp(t)}},yF=(e,t)=>t,jp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||yF}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Tw(r,i,o)?n:r,a=Tw(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,g=h+f;u<=g&&g<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!db(t))throw new b(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,KP(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Up(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Jl),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Jl),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Up=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},Bp=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Jl=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new Bp,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Tw(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Sw(){return new kg([new Vp])}var kg=(()=>{class e{factories;static \u0275prov=S({token:e,providedIn:"root",factory:Sw});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Sw()),deps:[[e,new lN,new Xe]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new b(901,!1)}}return e})();function Mb(e){ee(8);try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=pF(r),o=[Tb({}),{provide:ei,useExisting:aF},...n||[]],s=new Yl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return uF({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}finally{ee(9)}}var ml=new WeakSet,Aw="",Cl=[];function Mw(e){return e.get(aC,BO)}function Rb(){let e=[{provide:aC,useFactory:()=>{let t=!0;{let n=m(kn);t=!!window._ejsas?.[n]}return t&&un("NgEventReplay"),t}}];return e.push({provide:ar,useValue:()=>{let t=m(Je),{injector:n}=t;if(!ml.has(t)){let r=m(XE);if(Mw(n)){let i=n.get(kn);G1(i,(o,s,a)=>{o.nodeType===Node.ELEMENT_NODE&&(ox(o,s,a),sx(o,r))})}}},multi:!0},{provide:pr,useFactory:()=>{let t=m(Je),{injector:n}=t;return()=>{!Mw(n)||ml.has(t)||(ml.add(t),t.onDestroy(()=>{ml.delete(t);{let r=n.get(kn);Lh(r),q1(r)}}),t.whenStable().then(()=>{if(t.destroyed)return;let r=n.get(cx);_F(r,n);let i=n.get(XE);i.get(Aw)?.forEach(ax),i.delete(Aw);let o=r.instance;yx(n)?t.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),e}var _F=(e,t)=>{let n=t.get(kn),r=window._ejsas[n],i=e.instance=new RE(new ul(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=NE(n);i.replayEarlyEventInfos(o),Lh(n);let s=new dl(a=>{EF(t,a,a.currentTarget)});ME(i,s)};function EF(e,t,n){let r=(n&&n.getAttribute(mu))??"";/d\d+/.test(r)?wF(r,e,t,n):t.eventPhase===Fh.REPLAY&&fC(t,n)}function wF(e,t,n,r){Cl.push({event:n,currentTarget:r}),g1(t,e,IF)}function IF(e){let t=[...Cl],n=new Set(e);Cl=[];for(let{event:r,currentTarget:i}of t){let o=i.getAttribute(mu);n.has(o)?fC(r,i):Cl.push({event:r,currentTarget:i})}}var Rw=!1;function CF(){Rw||(Rw=!0,px(),j1(),Z1(),$1(),e1(),PP(),aP(),Xx())}function bF(e){return e.whenStable()}function Nb(){let e=[{provide:hl,useFactory:()=>{let t=!0;return t=!!m(_o,{optional:!0})?.get(hC,null),t&&un("NgHydration"),t}},{provide:ar,useValue:()=>{eP(!1),m(hl)&&(Ix(fu()),CF())},multi:!0}];return e.push({provide:sC,useFactory:()=>m(hl)},{provide:pr,useFactory:()=>{if(m(hl)){let t=m(Je);return()=>{bF(t).then(()=>{t.destroyed||JC(t)})}}return()=>{}},multi:!0}),et(e)}function gr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function hn(e){return ah(e)}function ai(e,t){return rh(e,t?.equal)}var Nw=class{[yt];constructor(t){this[yt]=t}destroy(){this[yt].destroy()}};function Ob(e){let t=cr(e);if(!t)return null;let n=new uo(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Ne=new C("");var Pb=null;function Tt(){return Pb}function Pg(e){Pb??=e}var Ks=class{},Ys=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>m(Fb),providedIn:"platform"})}return e})(),Fg=new C(""),Fb=(()=>{class e extends Ys{_location;_history;_doc=m(Ne);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tt().getBaseHref(this._doc)}onPopState(n){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Mu(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function xb(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function Bt(e){return e&&e[0]!=="?"?`?${e}`:e}var $t=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>m(Nu),providedIn:"root"})}return e})(),Ru=new C(""),Nu=(()=>{class e extends $t{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??m(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Mu(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Bt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(O(Ys),O(Ru,8))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),mr=(()=>{class e{_subject=new we;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=SF(xb(kb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Bt(r))}normalize(n){return e.stripTrailingSlash(TF(this._basePath,kb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Bt;static joinWithSlash=Mu;static stripTrailingSlash=xb;static \u0275fac=function(r){return new(r||e)(O($t))};static \u0275prov=S({token:e,factory:()=>DF(),providedIn:"root"})}return e})();function DF(){return new mr(O($t))}function TF(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function kb(e){return e.replace(/\/index.html$/,"")}function SF(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Vg=(()=>{class e extends $t{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Mu(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Bt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(O(Ys),O(Ru,8))};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})();var Lg=/\s+/,Lb=[],Zs=(()=>{class e{_ngEl;_renderer;initialClasses=Lb;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Lg):Lb}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Lg):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Lg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(T(Lt),T(fn))};static \u0275dir=he({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var Ou=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},vr=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ou(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Vb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Vb(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(T(Io),T(Iu),T(kg))};static \u0275dir=he({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Vb(e,t){e.context.$implicit=t.item}var Ht=(()=>{class e{_viewContainer;_context=new xu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){jb(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){jb(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(T(Io),T(Iu))};static \u0275dir=he({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),xu=class{$implicit=null;ngIf=null};function jb(e,t){if(e&&!e.createEmbeddedView)throw new b(2020,!1)}var rt=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Hn({type:e});static \u0275inj=Un({})}return e})();function jg(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Ug="browser",Ub="server";function ku(e){return e===Ub}var Qs=class{};var Bb=(()=>{class e{static \u0275prov=S({token:e,providedIn:"root",factory:()=>new Bg(m(Ne),window)})}return e})(),Bg=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=AF(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function AF(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var Lu=new C(""),zg=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(O(Lu),O(Q))};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})(),Js=class{_doc;constructor(t){this._doc=t}manager},Pu="ng-app-id";function $b(e){for(let t of e)t.remove()}function Hb(e,t){let n=t.createElement("style");return n.textContent=e,n}function MF(e,t,n,r){let i=e.head?.querySelectorAll(`style[${Pu}="${t}"],link[${Pu}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Pu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Hg(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Gg=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=ku(o),MF(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Hb);r?.forEach(i=>this.addUsage(i,this.external,Hg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&($b(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])$b(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Hb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Hg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Pu,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(O(Ne),O(kn),O(rg,8),O(hr))};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})(),$g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qg=/%COMP%/g;var zb="%COMP%",RF=`_nghost-${zb}`,NF=`_ngcontent-${zb}`,OF=!0,xF=new C("",{providedIn:"root",factory:()=>OF});function kF(e){return NF.replace(qg,e)}function PF(e){return RF.replace(qg,e)}function Gb(e,t){return t.map(n=>n.replace(qg,e))}var Kg=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=ku(a),this.defaultRenderer=new Xs(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cn.ShadowDom&&(r=U(_({},r),{encapsulation:cn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Fu?i.applyToHost(n):i instanceof ea&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case cn.Emulated:o=new Fu(c,l,r,this.appId,u,s,a,d,f);break;case cn.ShadowDom:return new Wg(c,l,n,r,s,a,this.nonce,d,f);default:o=new ea(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(O(zg),O(Gg),O(kn),O(xF),O(Ne),O(hr),O(Q),O(rg),O(Eo,8))};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})(),Xs=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS($g[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Wb(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Wb(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new b(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=$g[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=$g[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Vn.DashCase|Vn.Important)?t.style.setProperty(n,r,i&Vn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Vn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=Tt().getGlobalEventTarget(this.doc,t),!t))throw new b(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Wb(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Wg=class extends Xs{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Gb(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=Hg(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ea=class extends Xs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?Gb(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Fu=class extends ea{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,l,u),this.contentAttr=kF(u),this.hostAttr=PF(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Vu=class e extends Ks{supportsDOMEvents=!0;static makeCurrent(){Pg(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=FF();return n==null?null:LF(n)}resetBaseElement(){ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return jg(document.cookie,t)}},ta=null;function FF(){return ta=ta||document.querySelector("base"),ta?ta.getAttribute("href"):null}function LF(e){return new URL(e,document.baseURI).pathname}var VF=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})(),Kb=(()=>{class e extends Js{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(O(Ne))};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})(),qb=["alt","control","meta","shift"],jF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Yb=(()=>{class e extends Js{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qb.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=jF[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qb.forEach(s=>{if(s!==i){let a=UF[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(O(Ne))};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})();function Yg(e,t){return Mb(_({rootComponent:e},BF(t)))}function BF(e){return{appProviders:[...GF,...e?.providers??[]],platformProviders:zF}}function $F(){Vu.makeCurrent()}function HF(){return new an}function WF(){return eC(document),document}var zF=[{provide:hr,useValue:Ug},{provide:ng,useValue:$F,multi:!0},{provide:Ne,useFactory:WF}];var GF=[{provide:ru,useValue:"root"},{provide:an,useFactory:HF},{provide:Lu,useClass:Kb,multi:!0,deps:[Ne]},{provide:Lu,useClass:Yb,multi:!0,deps:[Ne]},Kg,Gg,zg,{provide:lo,useExisting:Kg},{provide:Qs,useClass:VF},[]];var na=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var qF="X-Request-URL",KF="text/plain",YF="application/json",DK=`${YF}, ${KF}, */*`;var Qg=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Qg||{}),Zg=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new na,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var ra=class e extends Zg{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Qg.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var Zb=new C("");var TK=RegExp(`^${qF}:`,"m");var ZF=new C(""),QF="b",JF="h",XF="s",eL="st",tL="u",nL="rt",Jg=new C(""),rL=["GET","HEAD"];function iL(e,t){let f=m(Jg),{isCacheActive:n}=f,r=L_(f,["isCacheActive"]),{transferCache:i,method:o}=e;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!rL.includes(o)||!r.includeRequestsWithAuthHeaders&&oL(e)||r.filter?.(e)===!1)return t(e);let s=m(_o);if(m(ZF,{optional:!0}))throw new b(2803,!1);let c=e.url,l=sL(e,c),u=s.get(l,null),d=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(d=i.includeHeaders),u){let{[QF]:h,[nL]:g,[JF]:w,[XF]:A,[eL]:j,[tL]:ke}=u,ge=h;switch(g){case"arraybuffer":ge=new TextEncoder().encode(h).buffer;break;case"blob":ge=new Blob([h]);break}let Xn=new na(w);return N(new ra({body:ge,headers:Xn,status:A,statusText:j,url:ke}))}return t(e).pipe(Te(h=>{h instanceof ra}))}function oL(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function Qb(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function sL(e,t){let{params:n,method:r,responseType:i}=e,o=Qb(n),s=e.serializeBody();s instanceof URLSearchParams?s=Qb(s):typeof s!="string"&&(s="");let a=[r,i,t,s,o].join("|"),c=aL(a);return c}function aL(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function Jb(e){return[{provide:Jg,useFactory:()=>(un("NgHttpTransferCache"),_({isCacheActive:!0},e))},{provide:Zb,useValue:iL,multi:!0},{provide:pr,multi:!0,useFactory:()=>{let t=m(Je),n=m(Jg);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var Xb=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(O(Ne))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ju=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(ju||{});function cL(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function eD(){return cL(ju.EventReplay,Rb())}function tD(...e){let t=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of e)n.add(o),i.length&&t.push(i);let r=n.has(ju.HttpTransferCacheOptions);return et([[],Nb(),n.has(ju.NoHttpTransferCache)||r?[]:Jb({}),t])}var L="primary",ma=Symbol("RouteTitle"),rm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ui(e){return new rm(e)}function lD(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function uL(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!pn(e[n],t[n]))return!1;return!0}function pn(e,t){let n=e?im(e):void 0,r=t?im(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!uD(e[i],t[i]))return!1;return!0}function im(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function uD(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function dD(e){return e.length>0?e[e.length-1]:null}function Ir(e){return Ih(e)?e:oi(e)?ue(Promise.resolve(e)):N(e)}var dL={exact:hD,subset:pD},fD={exact:fL,subset:hL,ignored:()=>!0};function nD(e,t,n){return dL[n.paths](e.root,t.root,n.matrixParams)&&fD[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function fL(e,t){return pn(e,t)}function hD(e,t,n){if(!ci(e.segments,t.segments)||!$u(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!hD(e.children[r],t.children[r],n))return!1;return!0}function hL(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>uD(e[n],t[n]))}function pD(e,t,n){return gD(e,t,t.segments,n)}function gD(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!ci(i,n)||t.hasChildren()||!$u(i,n,r))}else if(e.segments.length===n.length){if(!ci(e.segments,n)||!$u(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!pD(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!ci(e.segments,i)||!$u(e.segments,i,r)||!e.children[L]?!1:gD(e.children[L],t,o,r)}}function $u(e,t,n){return t.every((r,i)=>fD[n](e[i].parameters,r.parameters))}var mn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new X([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ui(this.queryParams),this._queryParamMap}toString(){return mL.serialize(this)}},X=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hu(this)}},yr=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ui(this.parameters),this._parameterMap}toString(){return vD(this)}};function pL(e,t){return ci(e,t)&&e.every((n,r)=>pn(n.parameters,t[r].parameters))}function ci(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function gL(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===L&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==L&&(n=n.concat(t(i,r)))}),n}var di=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>new _r,providedIn:"root"})}return e})(),_r=class{parse(t){let n=new sm(t);return new mn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ia(t.root,!0)}`,r=_L(t.queryParams),i=typeof t.fragment=="string"?`#${vL(t.fragment)}`:"";return`${n}${r}${i}`}},mL=new _r;function Hu(e){return e.segments.map(t=>vD(t)).join("/")}function ia(e,t){if(!e.hasChildren())return Hu(e);if(t){let n=e.children[L]?ia(e.children[L],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==L&&r.push(`${i}:${ia(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=gL(e,(r,i)=>i===L?[ia(e.children[L],!1)]:[`${i}:${ia(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[L]!=null?`${Hu(e)}/${n[0]}`:`${Hu(e)}/(${n.join("//")})`}}function mD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uu(e){return mD(e).replace(/%3B/gi,";")}function vL(e){return encodeURI(e)}function om(e){return mD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wu(e){return decodeURIComponent(e)}function rD(e){return Wu(e.replace(/\+/g,"%20"))}function vD(e){return`${om(e.path)}${yL(e.parameters)}`}function yL(e){return Object.entries(e).map(([t,n])=>`;${om(t)}=${om(n)}`).join("")}function _L(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Uu(n)}=${Uu(i)}`).join("&"):`${Uu(n)}=${Uu(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var EL=/^[^\/()?;#]+/;function Xg(e){let t=e.match(EL);return t?t[0]:""}var wL=/^[^\/()?;=#]+/;function IL(e){let t=e.match(wL);return t?t[0]:""}var CL=/^[^=?&#]+/;function bL(e){let t=e.match(CL);return t?t[0]:""}var DL=/^[^&#]+/;function TL(e){let t=e.match(DL);return t?t[0]:""}var sm=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[L]=new X(t,n)),r}parseSegment(){let t=Xg(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(t),new yr(Wu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=IL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xg(this.remaining);i&&(r=i,this.capture(r))}t[Wu(n)]=Wu(r)}parseQueryParam(t){let n=bL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=TL(this.remaining);s&&(r=s,this.capture(r))}let i=rD(n),o=rD(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new b(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=L);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[L]:new X([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new b(4011,!1)}};function yD(e){return e.segments.length>0?new X([],{[L]:e}):e}function _D(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=_D(i);if(r===L&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new X(e.segments,t);return SL(n)}function SL(e){if(e.numberOfChildren===1&&e.children[L]){let t=e.children[L];return new X(e.segments.concat(t.segments),t.children)}return e}function Er(e){return e instanceof mn}function ED(e,t,n=null,r=null){let i=wD(e);return ID(i,t,n,r)}function wD(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new X(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=yD(r);return t??i}function ID(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return em(i,i,i,n,r);let o=AL(t);if(o.toRoot())return em(i,i,new X([],{}),n,r);let s=ML(o,i,e),a=s.processChildren?sa(s.segmentGroup,s.index,o.commands):bD(s.segmentGroup,s.index,o.commands);return em(i,s.segmentGroup,a,n,r)}function Gu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ca(e){return typeof e=="object"&&e!=null&&e.outlets}function em(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=CD(e,t,n);let a=yD(_D(s));return new mn(a,o,i)}function CD(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=CD(o,t,n)}),new X(e.segments,r)}var qu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Gu(r[0]))throw new b(4003,!1);let i=r.find(ca);if(i&&i!==dD(r))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function AL(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new qu(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new qu(n,t,r)}var Ro=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function ML(e,t,n){if(e.isAbsolute)return new Ro(t,!0,0);if(!n)return new Ro(t,!1,NaN);if(n.parent===null)return new Ro(n,!0,0);let r=Gu(e.commands[0])?0:1,i=n.segments.length-1+r;return RL(n,i,e.numberOfDoubleDots)}function RL(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new b(4005,!1);i=r.segments.length}return new Ro(r,!1,i-o)}function NL(e){return ca(e[0])?e[0].outlets:{[L]:e}}function bD(e,t,n){if(e??=new X([],{}),e.segments.length===0&&e.hasChildren())return sa(e,t,n);let r=OL(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new X(e.segments.slice(0,r.pathIndex),{});return o.children[L]=new X(e.segments.slice(r.pathIndex),e.children),sa(o,0,i)}else return r.match&&i.length===0?new X(e.segments,{}):r.match&&!e.hasChildren()?am(e,t,n):r.match?sa(e,0,i):am(e,t,n)}function sa(e,t,n){if(n.length===0)return new X(e.segments,{});{let r=NL(n),i={};if(Object.keys(r).some(o=>o!==L)&&e.children[L]&&e.numberOfChildren===1&&e.children[L].segments.length===0){let o=sa(e.children[L],t,n);return new X(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=bD(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new X(e.segments,i)}}function OL(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ca(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!oD(c,l,s))return o;r+=2}else{if(!oD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function am(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ca(o)){let c=xL(o.outlets);return new X(r,c)}if(i===0&&Gu(n[0])){let c=e.segments[t];r.push(new yr(c.path,iD(n[0]))),i++;continue}let s=ca(o)?o.outlets[L]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Gu(a)?(r.push(new yr(s,iD(a))),i+=2):(r.push(new yr(s,{})),i++)}return new X(r,{})}function xL(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=am(new X([],{}),0,r))}),t}function iD(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function oD(e,t,n){return e==n.path&&pn(t,n.parameters)}var zu="imperative",Ae=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Ae||{}),mt=class{id;url;constructor(t,n){this.id=t,this.url=n}},wr=class extends mt{type=Ae.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},St=class extends mt{urlAfterRedirects;type=Ae.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},it=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(it||{}),Oo=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Oo||{}),gn=class extends mt{reason;code;type=Ae.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vn=class extends mt{reason;code;type=Ae.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},xo=class extends mt{error;target;type=Ae.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},la=class extends mt{urlAfterRedirects;state;type=Ae.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ku=class extends mt{urlAfterRedirects;state;type=Ae.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yu=class extends mt{urlAfterRedirects;state;shouldActivate;type=Ae.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zu=class extends mt{urlAfterRedirects;state;type=Ae.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qu=class extends mt{urlAfterRedirects;state;type=Ae.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class{route;type=Ae.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xu=class{route;type=Ae.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ed=class{snapshot;type=Ae.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},td=class{snapshot;type=Ae.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nd=class{snapshot;type=Ae.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rd=class{snapshot;type=Ae.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ko=class{routerEvent;position;anchor;type=Ae.Scroll;constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},ua=class{},Po=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function kL(e,t){return e.providers&&!e._injector&&(e._injector=Co(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Wt(e){return e.outlet||L}function PL(e,t){let n=e.filter(r=>Wt(r)===t);return n.push(...e.filter(r=>Wt(r)!==t)),n}function va(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var id=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return va(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new fi(this.rootInjector)}},fi=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new id(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(O(Fe))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),od=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=cm(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=cm(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=lm(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return lm(t,this._root).map(n=>n.value)}};function cm(e,t){if(e===t.value)return t;for(let n of t.children){let r=cm(e,n);if(r)return r}return null}function lm(e,t){if(e===t.value)return[t];for(let n of t.children){let r=lm(e,n);if(r.length)return r.unshift(t),r}return[]}var gt=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Mo(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var da=class extends od{snapshot;constructor(t,n){super(t),this.snapshot=n,vm(this,t)}toString(){return this.snapshot.toString()}};function DD(e){let t=FL(e),n=new Pe([new yr("",{})]),r=new Pe({}),i=new Pe({}),o=new Pe({}),s=new Pe(""),a=new ot(n,r,o,s,i,L,e,t.root);return a.snapshot=t.root,new da(new gt(a,[]),t)}function FL(e){let t={},n={},r={},i="",o=new li([],t,r,i,n,L,e,null,{});return new fa("",new gt(o,[]))}var ot=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(l=>l[ma]))??N(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(t=>ui(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(t=>ui(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sd(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),i?.data),e._resolvedData)}:r={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},i&&SD(i)&&(r.resolve[ma]=i.title),r}var li=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ma]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ui(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ui(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},fa=class extends od{url;constructor(t,n){super(n),this.url=t,vm(this,n)}toString(){return TD(this._root)}};function vm(e,t){t.value._routerState=e,t.children.forEach(n=>vm(e,n))}function TD(e){let t=e.children.length>0?` { ${e.children.map(TD).join(", ")} } `:"";return`${e.value}${t}`}function tm(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,pn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),pn(t.params,n.params)||e.paramsSubject.next(n.params),uL(t.url,n.url)||e.urlSubject.next(n.url),pn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function um(e,t){let n=pn(e.params,t.params)&&pL(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||um(e.parent,t.parent))}function SD(e){return typeof e.title=="string"||e.title===null}var AD=new C(""),ya=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=L;activateEvents=new Ee;deactivateEvents=new Ee;attachEvents=new Ee;detachEvents=new Ee;routerOutletData=zI(void 0);parentContexts=m(fi);location=m(Io);changeDetector=m(Wn);inputBinder=m(_a,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new b(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new dm(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ur]})}return e})(),dm=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===ot?this.route:t===fi?this.childContexts:t===AD?this.outletData:this.parent.get(t,n)}},_a=new C(""),ym=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Ds([r.queryParams,r.params,r.data]).pipe(_t(([o,s,a],c)=>(a=_(_(_({},o),s),a),c===0?N(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=Ob(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})(),_m=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Be({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&oe(0,"router-outlet")},dependencies:[ya],encapsulation:2})}return e})();function Em(e){let t=e.children&&e.children.map(Em),n=t?U(_({},e),{children:t}):_({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==L&&(n.component=_m),n}function LL(e,t,n){let r=ha(e,t._root,n?n._root:void 0);return new da(r,t)}function ha(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=VL(e,t,n);return new gt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ha(e,a)),s}}let r=jL(t.value),i=t.children.map(o=>ha(e,o));return new gt(r,i)}}function VL(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return ha(e,r,i);return ha(e,r)})}function jL(e){return new ot(new Pe(e.url),new Pe(e.params),new Pe(e.queryParams),new Pe(e.fragment),new Pe(e.data),e.outlet,e.component,e)}var Fo=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},MD="ngNavigationCancelingError";function ad(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Er(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=RD(!1,it.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function RD(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[MD]=!0,n.cancellationCode=t,n}function UL(e){return ND(e)&&Er(e.url)}function ND(e){return!!e&&e[MD]}var BL=(e,t,n,r)=>Y(i=>(new fm(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),fm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),tm(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Mo(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Mo(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Mo(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Mo(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new rd(o.value.snapshot))}),t.children.length&&this.forwardEvent(new td(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(tm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tm(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},cd=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},No=class{component;route;constructor(t,n){this.component=t,this.route=n}};function $L(e,t,n){let r=e._root,i=t?t._root:null;return oa(r,i,n,[r.value])}function HL(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Vo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Lw(e)?e:t.get(e):r}function oa(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Mo(t);return e.children.forEach(s=>{WL(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>aa(a,n.getContext(s),i)),i}function WL(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=zL(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new cd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?oa(e,t,a?a.children:null,r,i):oa(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new No(a.outlet.component,s))}else s&&aa(t,a,i),i.canActivateChecks.push(new cd(r)),o.component?oa(e,null,a?a.children:null,r,i):oa(e,null,n,r,i);return i}function zL(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!ci(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ci(e.url,t.url)||!pn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!um(e,t)||!pn(e.queryParams,t.queryParams);case"paramsChange":default:return!um(e,t)}}function aa(e,t,n){let r=Mo(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?aa(s,t.children.getContext(o),n):aa(s,null,n):aa(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new No(t.outlet.component,i)):n.canDeactivateChecks.push(new No(null,i)):n.canDeactivateChecks.push(new No(null,i))}function Ea(e){return typeof e=="function"}function GL(e){return typeof e=="boolean"}function qL(e){return e&&Ea(e.canLoad)}function KL(e){return e&&Ea(e.canActivate)}function YL(e){return e&&Ea(e.canActivateChild)}function ZL(e){return e&&Ea(e.canDeactivate)}function QL(e){return e&&Ea(e.canMatch)}function OD(e){return e instanceof Rn||e?.name==="EmptyError"}var Bu=Symbol("INITIAL_VALUE");function Lo(){return _t(e=>Ds(e.map(t=>t.pipe(On(1),Th(Bu)))).pipe(Y(t=>{for(let n of t)if(n!==!0){if(n===Bu)return Bu;if(n===!1||JL(n))return n}return!0}),dt(t=>t!==Bu),On(1)))}function JL(e){return Er(e)||e instanceof Fo}function XL(e,t){return _e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?N(U(_({},n),{guardsResult:!0})):eV(s,r,i,e).pipe(_e(a=>a&&GL(a)?tV(r,o,e,t):N(a)),Y(a=>U(_({},n),{guardsResult:a})))})}function eV(e,t,n,r){return ue(e).pipe(_e(i=>sV(i.component,i.route,n,t,r)),xn(i=>i!==!0,!0))}function tV(e,t,n,r){return ue(t).pipe(rr(i=>Ki(rV(i.route.parent,r),nV(i.route,r),oV(e,i.path,n),iV(e,i.route,n))),xn(i=>i!==!0,!0))}function nV(e,t){return e!==null&&t&&t(new nd(e)),N(!0)}function rV(e,t){return e!==null&&t&&t(new ed(e)),N(!0)}function iV(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(o=>ol(()=>{let s=va(t)??n,a=Vo(o,s),c=KL(a)?a.canActivate(t,e):Ve(s,()=>a(t,e));return Ir(c).pipe(xn())}));return N(i).pipe(Lo())}function oV(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>HL(s)).filter(s=>s!==null).map(s=>ol(()=>{let a=s.guards.map(c=>{let l=va(s.node)??n,u=Vo(c,l),d=YL(u)?u.canActivateChild(r,e):Ve(l,()=>u(r,e));return Ir(d).pipe(xn())});return N(a).pipe(Lo())}));return N(o).pipe(Lo())}function sV(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return N(!0);let s=o.map(a=>{let c=va(t)??i,l=Vo(a,c),u=ZL(l)?l.canDeactivate(e,t,n,r):Ve(c,()=>l(e,t,n,r));return Ir(u).pipe(xn())});return N(s).pipe(Lo())}function aV(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return N(!0);let o=i.map(s=>{let a=Vo(s,e),c=qL(a)?a.canLoad(t,n):Ve(e,()=>a(t,n));return Ir(c)});return N(o).pipe(Lo(),xD(r))}function xD(e){return ph(Te(t=>{if(typeof t!="boolean")throw ad(e,t)}),Y(t=>t===!0))}function cV(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return N(!0);let o=i.map(s=>{let a=Vo(s,e),c=QL(a)?a.canMatch(t,n):Ve(e,()=>a(t,n));return Ir(c)});return N(o).pipe(Lo(),xD(r))}var pa=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ga=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Ao(e){return Gi(new pa(e))}function lV(e){return Gi(new b(4e3,!1))}function uV(e){return Gi(RD(!1,it.GuardRejected))}var hm=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[L])return lV(`${t.redirectTo}`);i=i.children[L]}}applyRedirectCommands(t,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:g,title:w}=i,A=Ve(o,()=>a({params:h,data:g,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:w}));if(A instanceof mn)throw new ga(A);n=A}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new ga(s);return s}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new mn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new X(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new b(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},pm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dV(e,t,n,r,i){let o=kD(e,t,n);return o.matched?(r=kL(t,r),cV(r,t,n,i).pipe(Y(s=>s===!0?o:_({},pm)))):N(o)}function kD(e,t,n){if(t.path==="**")return fV(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?_({},pm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||lD)(n,e,t);if(!i)return _({},pm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function fV(e){return{matched:!0,parameters:e.length>0?dD(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function sD(e,t,n,r){return n.length>0&&gV(e,n,r)?{segmentGroup:new X(t,pV(r,new X(n,e.children))),slicedSegments:[]}:n.length===0&&mV(e,n,r)?{segmentGroup:new X(e.segments,hV(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new X(e.segments,e.children),slicedSegments:n}}function hV(e,t,n,r){let i={};for(let o of n)if(ud(e,t,o)&&!r[Wt(o)]){let s=new X([],{});i[Wt(o)]=s}return _(_({},r),i)}function pV(e,t){let n={};n[L]=t;for(let r of e)if(r.path===""&&Wt(r)!==L){let i=new X([],{});n[Wt(r)]=i}return n}function gV(e,t,n){return n.some(r=>ud(e,t,r)&&Wt(r)!==L)}function mV(e,t,n){return n.some(r=>ud(e,t,r))}function ud(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vV(e,t,n){return t.length===0&&!e.children[n]}var gm=class{};function yV(e,t,n,r,i,o,s="emptyOnly"){return new mm(e,t,n,r,i,s,o).recognize()}var _V=31,mm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hm(this.urlSerializer,this.urlTree)}noMatchError(t){return new b(4002,`'${t.segmentGroup}'`)}recognize(){let t=sD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Y(({children:n,rootSnapshot:r})=>{let i=new gt(r,n),o=new fa("",i),s=ED(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new li([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),L,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,L,n).pipe(Y(r=>({children:r,rootSnapshot:n})),Nn(r=>{if(r instanceof ga)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pa?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof gt?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ue(o).pipe(rr(s=>{let a=r.children[s],c=PL(n,s);return this.processSegmentGroup(t,c,a,s,i)}),Dh((s,a)=>(s.push(...a),s)),ir(null),bh(),_e(s=>{if(s===null)return Ao(r);let a=PD(s);return EV(a),N(a)}))}processSegment(t,n,r,i,o,s,a){return ue(n).pipe(rr(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(Nn(l=>{if(l instanceof pa)return N(null);throw l}))),xn(c=>!!c),Nn(c=>{if(OD(c))return vV(r,i,o)?N(new gm):Ao(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return Wt(r)!==s&&(s===L||!ud(i,o,r))?Ao(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):Ao(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=kD(n,i,o);if(!c)return Ao(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_V&&(this.allowRedirects=!1));let h=new li(o,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,aD(i),Wt(i),i.component??i._loadedComponent??null,i,cD(i)),g=sd(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(g.params),h.data=Object.freeze(g.data);let w=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t);return this.applyRedirects.lineralizeSegments(i,w).pipe(_e(A=>this.processSegment(t,r,n,A.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=dV(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(_t(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(_t(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new li(f,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,aD(r),Wt(r),r.component??r._loadedComponent??null,r,cD(r)),w=sd(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(w.params),g.data=Object.freeze(w.data);let{segmentGroup:A,slicedSegments:j}=sD(n,f,h,l);if(j.length===0&&A.hasChildren())return this.processChildren(u,l,A,g).pipe(Y(ge=>new gt(g,ge)));if(l.length===0&&j.length===0)return N(new gt(g,[]));let ke=Wt(r)===o;return this.processSegment(u,l,A,j,ke?L:o,!0,g).pipe(Y(ge=>new gt(g,ge instanceof gt?[ge]:[])))}))):Ao(n)))}getChildConfig(t,n,r){return n.children?N({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):aV(t,n,r,this.urlSerializer).pipe(_e(i=>i?this.configLoader.loadChildren(t,n).pipe(Te(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):uV(n))):N({routes:[],injector:t})}};function EV(e){e.sort((t,n)=>t.value.outlet===L?-1:n.value.outlet===L?1:t.value.outlet.localeCompare(n.value.outlet))}function wV(e){let t=e.value.routeConfig;return t&&t.path===""}function PD(e){let t=[],n=new Set;for(let r of e){if(!wV(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=PD(r.children);t.push(new gt(r.value,i))}return t.filter(r=>!n.has(r))}function aD(e){return e.data||{}}function cD(e){return e.resolve||{}}function IV(e,t,n,r,i,o){return _e(s=>yV(e,t,n,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:c})=>U(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function CV(e,t){return _e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of FD(c))s.add(l);let a=0;return ue(s).pipe(rr(c=>o.has(c)?bV(c,r,e,t):(c.data=sd(c,c.parent,e).resolve,N(void 0))),Te(()=>a++),Yi(1),_e(c=>a===s.size?N(n):Ke))})}function FD(e){let t=e.children.map(n=>FD(n)).flat();return[e,...t]}function bV(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!SD(i)&&(o[ma]=i.title),DV(o,e,t,r).pipe(Y(s=>(e._resolvedData=s,e.data=sd(e,e.parent,n).resolve,null)))}function DV(e,t,n,r){let i=im(e);if(i.length===0)return N({});let o={};return ue(i).pipe(_e(s=>TV(e[s],t,n,r).pipe(xn(),Te(a=>{if(a instanceof Fo)throw ad(new _r,a);o[s]=a}))),Yi(1),Y(()=>o),Nn(s=>OD(s)?Ke:Gi(s)))}function TV(e,t,n,r){let i=va(t)??r,o=Vo(e,i),s=o.resolve?o.resolve(t,n):Ve(i,()=>o(t,n));return Ir(s)}function nm(e){return _t(t=>{let n=e(t);return n?ue(n).pipe(Y(()=>t)):N(t)})}var wm=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===L);return r}getResolvedTitleForRoute(n){return n.data[ma]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>m(LD),providedIn:"root"})}return e})(),LD=(()=>{class e extends wm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(O(Xb))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),hi=new C("",{providedIn:"root",factory:()=>({})}),pi=new C(""),dd=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=m(Db);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return N(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Ir(n.loadComponent()).pipe(Y(jD),Te(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Ts(()=>{this.componentLoaders.delete(n)})),i=new $i(r,()=>new we).pipe(Bi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=VD(r,this.compiler,n,this.onLoadEndListener).pipe(Ts(()=>{this.childrenLoaders.delete(r)})),s=new $i(o,()=>new we).pipe(Bi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function VD(e,t,n,r){return Ir(e.loadChildren()).pipe(Y(jD),_e(i=>i instanceof Sg||Array.isArray(i)?N(i):ue(t.compileModuleAsync(i))),Y(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(pi,[],{optional:!0,self:!0}).flat()),{routes:s.map(Em),injector:o}}))}function SV(e){return e&&typeof e=="object"&&"default"in e}function jD(e){return SV(e)?e.default:e}var fd=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>m(AV),providedIn:"root"})}return e})(),AV=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Im=new C(""),Cm=new C("");function UD(e,t,n){let r=e.get(Cm),i=e.get(Ne);return e.get(Q).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),MV(e))),{onViewTransitionCreated:c}=r;return c&&Ve(e,()=>c({transition:a,from:t,to:n})),s})}function MV(e){return new Promise(t=>{hu({read:()=>setTimeout(t)},{injector:e})})}var bm=new C(""),hd=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new we;transitionAbortSubject=new we;configLoader=m(dd);environmentInjector=m(Fe);destroyRef=m(yo);urlSerializer=m(di);rootContexts=m(fi);location=m(mr);inputBindingEnabled=m(_a,{optional:!0})!==null;titleStrategy=m(wm);options=m(hi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=m(fd);createViewTransition=m(Im,{optional:!0});navigationErrorHandler=m(bm,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>N(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Ju(i)),r=i=>this.events.next(new Xu(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(U(_({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new Pe(null),this.transitions.pipe(dt(r=>r!==null),_t(r=>{let i=!1,o=!1;return N(r).pipe(_t(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",it.SupersededByNewNavigation),Ke;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?U(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&c!=="reload"){let l="";return this.events.next(new vn(s.id,this.urlSerializer.serialize(s.rawUrl),l,Oo.IgnoredSameUrlNavigation)),s.resolve(!1),Ke}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return N(s).pipe(_t(l=>(this.events.next(new wr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Ke:Promise.resolve(l))),IV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=U(_({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let u=new la(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:u,source:d,restoredState:f,extras:h}=s,g=new wr(l,this.urlSerializer.serialize(u),d,f);this.events.next(g);let w=DD(this.rootComponentType).snapshot;return this.currentTransition=r=U(_({},s),{targetSnapshot:w,urlAfterRedirects:u,extras:U(_({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,N(r)}else{let l="";return this.events.next(new vn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Oo.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Ke}}),Te(s=>{let a=new Ku(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Y(s=>(this.currentTransition=r=U(_({},s),{guards:$L(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),XL(this.environmentInjector,s=>this.events.next(s)),Te(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw ad(this.urlSerializer,s.guardsResult);let a=new Yu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),dt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",it.GuardRejected),!1)),nm(s=>{if(s.guards.canActivateChecks.length!==0)return N(s).pipe(Te(a=>{let c=new Zu(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),_t(a=>{let c=!1;return N(a).pipe(CV(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",it.NoDataFromResolver)}}))}),Te(a=>{let c=new Qu(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),nm(s=>{let a=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Te(u=>{c.component=u}),Y(()=>{})));for(let u of c.children)l.push(...a(u));return l};return Ds(a(s.targetSnapshot.root)).pipe(ir(null),On(1))}),nm(()=>this.afterPreactivation()),_t(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?ue(c).pipe(Y(()=>r)):N(r)}),Y(s=>{let a=LL(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=U(_({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Te(()=>{this.events.next(new ua)}),BL(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),On(1),Te({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new St(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Sh(this.transitionAbortSubject.pipe(Te(s=>{throw s}))),Ts(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",it.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nn(s=>{if(this.destroyed)return r.resolve(!1),Ke;if(o=!0,ND(s))this.events.next(new gn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),UL(s)?this.events.next(new Po(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new xo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Ve(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Fo){let{message:l,cancellationCode:u}=ad(this.urlSerializer,c);this.events.next(new gn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Po(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Ke}))}))}cancelNavigationTransition(n,r,i){let o=new gn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RV(e){return e!==zu}var BD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>m(NV),providedIn:"root"})}return e})(),ld=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},NV=(()=>{class e extends ld{static \u0275fac=(()=>{let n;return function(i){return(n||(n=fr(e)))(i||e)}})();static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$D=(()=>{class e{urlSerializer=m(di);options=m(hi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=m(mr);urlHandlingStrategy=m(fd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof mn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=DD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:()=>m(OV),providedIn:"root"})}return e})(),OV=(()=>{class e extends $D{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof wr?this.updateStateMemento():n instanceof vn?this.commitTransition(r):n instanceof la?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ua?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof gn&&(n.code===it.GuardRejected||n.code===it.NoDataFromResolver)?this.restoreHistory(r):n instanceof xo?this.restoreHistory(r,!0):n instanceof St&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=_(_({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=_(_({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=fr(e)))(i||e)}})();static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function pd(e,t){e.events.pipe(dt(n=>n instanceof St||n instanceof gn||n instanceof xo||n instanceof vn),Y(n=>n instanceof St||n instanceof vn?0:(n instanceof gn?n.code===it.Redirect||n.code===it.SupersededByNewNavigation:!1)?2:1),dt(n=>n!==2),On(1)).subscribe(()=>{t()})}var xV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ce=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=m(Ag);stateManager=m($D);options=m(hi,{optional:!0})||{};pendingTasks=m(Bn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=m(hd);urlSerializer=m(di);location=m(mr);urlHandlingStrategy=m(fd);_events=new we;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=m(BD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=m(pi,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!m(_a,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new me;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof gn&&r.code!==it.Redirect&&r.code!==it.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof St)this.navigated=!0;else if(r instanceof Po){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=_({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||RV(i.source)},s);this.scheduleNavigation(a,zu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}FV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Em),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=wD(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return ID(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Er(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,zu,null,r)}navigate(n,r={skipLocationChange:!1}){return PV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},xV):r===!1?i=_({},kV):i=r,Er(n))return nD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return nD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return pd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function PV(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new b(4008,!1)}function FV(e){return!(e instanceof ua)&&!(e instanceof Po)}var At=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new we;constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof St&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Er(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:EC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Er(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(T(Ce),T(ot),Xp("tabindex"),T(fn),T(Lt),T($t))};static \u0275dir=he({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&qs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",gr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",gr],replaceUrl:[2,"replaceUrl","replaceUrl",gr],routerLink:"routerLink"},features:[ur]})}return e})();var wa=class{};var HD=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(dt(n=>n instanceof St),rr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Co(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ue(i).pipe(qi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=N(null);let o=i.pipe(_e(s=>s===null?N(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ue([o,s]).pipe(qi())}else return o})}static \u0275fac=function(r){return new(r||e)(O(Ce),O(Fe),O(wa),O(dd))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),WD=new C(""),LV=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof wr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof St?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof vn&&n.code===Oo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ko&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ko(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){tb()};static \u0275prov=S({token:e,factory:e.\u0275fac})}return e})();function Tm(e,...t){return et([{provide:pi,multi:!0,useValue:e},[],{provide:ot,useFactory:zD,deps:[Ce]},{provide:pr,multi:!0,useFactory:GD},t.map(n=>n.\u0275providers)])}function zD(e){return e.routerState.root}function Ia(e,t){return{\u0275kind:e,\u0275providers:t}}function GD(){let e=m(ve);return t=>{let n=e.get(Je);if(t!==n.components[0])return;let r=e.get(Ce),i=e.get(qD);e.get(Sm)===1&&r.initialNavigation(),e.get(ZD,null,B.Optional)?.setUpPreloading(),e.get(WD,null,B.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qD=new C("",{factory:()=>new we}),Sm=new C("",{providedIn:"root",factory:()=>1});function KD(){let e=[{provide:Sm,useValue:0},Mg(()=>{let t=m(ve);return t.get(Fg,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(Ce),o=t.get(qD);pd(i,()=>{r(!0)}),t.get(hd).afterPreactivation=()=>(r(!0),o.closed?N(void 0):o),i.initialNavigation()}))})];return Ia(2,e)}function YD(){let e=[Mg(()=>{m(Ce).setUpLocationChangeListener()}),{provide:Sm,useValue:2}];return Ia(3,e)}var ZD=new C("");function QD(e){return Ia(0,[{provide:ZD,useExisting:HD},{provide:wa,useExisting:e}])}function JD(){return Ia(8,[ym,{provide:_a,useExisting:ym}])}function XD(e){un("NgRouterViewTransitions");let t=[{provide:Im,useValue:UD},{provide:Cm,useValue:_({skipNextTransition:!!e?.skipInitialTransition},e)}];return Ia(9,t)}var eT=[mr,{provide:di,useClass:_r},Ce,fi,{provide:ot,useFactory:zD,deps:[Ce]},dd,[]],zt=(()=>{class e{constructor(){}static forRoot(n,r){return{ngModule:e,providers:[eT,[],{provide:pi,multi:!0,useValue:n},[],r?.errorHandler?{provide:bm,useValue:r.errorHandler}:[],{provide:hi,useValue:r||{}},r?.useHash?jV():UV(),VV(),r?.preloadingStrategy?QD(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?BV(r):[],r?.bindToComponentInputs?JD().\u0275providers:[],r?.enableViewTransitions?XD().\u0275providers:[],$V()]}}static forChild(n){return{ngModule:e,providers:[{provide:pi,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Hn({type:e});static \u0275inj=Un({})}return e})();function VV(){return{provide:WD,useFactory:()=>{let e=m(Bb),t=m(Q),n=m(hi),r=m(hd),i=m(di);return n.scrollOffset&&e.setOffset(n.scrollOffset),new LV(i,r,e,t,n)}}}function jV(){return{provide:$t,useClass:Vg}}function UV(){return{provide:$t,useClass:Nu}}function BV(e){return[e.initialNavigation==="disabled"?YD().\u0275providers:[],e.initialNavigation==="enabledBlocking"?KD().\u0275providers:[]]}var Dm=new C("");function $V(){return[{provide:Dm,useFactory:GD},{provide:pr,multi:!0,useExisting:Dm}]}var gd=class e{title="cookshare-ci";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Be({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&oe(0,"router-outlet")},dependencies:[ya],encapsulation:2})};var uT=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(T(fn),T(Lt))};static \u0275dir=he({type:e})}return e})(),Nm=(()=>{class e extends uT{static \u0275fac=(()=>{let n;return function(i){return(n||(n=fr(e)))(i||e)}})();static \u0275dir=he({type:e,features:[Vt]})}return e})(),Cd=new C("");var HV={provide:Cd,useExisting:jn(()=>br),multi:!0};function WV(){let e=Tt()?Tt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var zV=new C(""),br=(()=>{class e extends uT{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!WV())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(T(fn),T(Lt),T(zV,8))};static \u0275dir=he({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[si([HV]),Vt]})}return e})();function GV(e){return e==null||qV(e)===0}function qV(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Om=new C(""),dT=new C("");function KV(e){return GV(e.value)?{required:!0}:null}function tT(e){return null}function fT(e){return e!=null}function hT(e){return oi(e)?ue(e):e}function pT(e){let t={};return e.forEach(n=>{t=n!=null?_(_({},t),n):t}),Object.keys(t).length===0?null:t}function gT(e,t){return t.map(n=>n(e))}function YV(e){return!e.validate}function mT(e){return e.map(t=>YV(t)?t:n=>t.validate(n))}function ZV(e){if(!e)return null;let t=e.filter(fT);return t.length==0?null:function(n){return pT(gT(n,t))}}function xm(e){return e!=null?ZV(mT(e)):null}function QV(e){if(!e)return null;let t=e.filter(fT);return t.length==0?null:function(n){let r=gT(n,t).map(hT);return Ch(r).pipe(Y(pT))}}function km(e){return e!=null?QV(mT(e)):null}function nT(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function JV(e){return e._rawValidators}function XV(e){return e._rawAsyncValidators}function Am(e){return e?Array.isArray(e)?e:[e]:[]}function vd(e,t){return Array.isArray(e)?e.includes(t):e===t}function rT(e,t){let n=Am(t);return Am(e).forEach(i=>{vd(n,i)||n.push(i)}),n}function iT(e,t){return Am(t).filter(n=>!vd(e,n))}var yd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=xm(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=km(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Ho=class extends yd{name;get formDirective(){return null}get path(){return null}},Aa=class extends yd{_parent=null;name=null;valueAccessor=null},_d=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ej={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},wZ=U(_({},ej),{"[class.ng-submitted]":"isSubmitted"}),Wo=(()=>{class e extends _d{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(T(Aa,2))};static \u0275dir=he({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Su("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Vt]})}return e})(),bd=(()=>{class e extends _d{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(T(Ho,10))};static \u0275dir=he({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Su("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Vt]})}return e})();var Ca="VALID",md="INVALID",Bo="PENDING",ba="DISABLED",Cr=class{},Ed=class extends Cr{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Ta=class extends Cr{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Sa=class extends Cr{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},$o=class extends Cr{status;source;constructor(t,n){super(),this.status=t,this.source=n}},Mm=class extends Cr{source;constructor(t){super(),this.source=t}},Rm=class extends Cr{source;constructor(t){super(),this.source=t}};function vT(e){return(Dd(e)?e.validators:e)||null}function tj(e){return Array.isArray(e)?xm(e):e||null}function yT(e,t){return(Dd(t)?t.asyncValidators:e)||null}function nj(e){return Array.isArray(e)?km(e):e||null}function Dd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function rj(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new b(1e3,"");if(!r[n])throw new b(1001,"")}function ij(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new b(1002,"")})}var wd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return hn(this.statusReactive)}set status(t){hn(()=>this.statusReactive.set(t))}_status=ai(()=>this.statusReactive());statusReactive=ii(void 0);get valid(){return this.status===Ca}get invalid(){return this.status===md}get pending(){return this.status==Bo}get disabled(){return this.status===ba}get enabled(){return this.status!==ba}errors;get pristine(){return hn(this.pristineReactive)}set pristine(t){hn(()=>this.pristineReactive.set(t))}_pristine=ai(()=>this.pristineReactive());pristineReactive=ii(!0);get dirty(){return!this.pristine}get touched(){return hn(this.touchedReactive)}set touched(t){hn(()=>this.touchedReactive.set(t))}_touched=ai(()=>this.touchedReactive());touchedReactive=ii(!1);get untouched(){return!this.touched}_events=new we;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(rT(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(rT(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(iT(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(iT(t,this._rawAsyncValidators))}hasValidator(t){return vd(this._rawValidators,t)}hasAsyncValidator(t){return vd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(U(_({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Sa(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Sa(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(U(_({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Ta(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Ta(!0,r))}markAsPending(t={}){this.status=Bo;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $o(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(U(_({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ba,this.errors=null,this._forEachChild(i=>{i.disable(U(_({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ed(this.value,r)),this._events.next(new $o(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(U(_({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ca,this._forEachChild(r=>{r.enable(U(_({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(U(_({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ca||this.status===Bo)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ed(this.value,n)),this._events.next(new $o(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(U(_({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ba:Ca}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Bo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=hT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new $o(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?ba:this.errors?md:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bo)?Bo:this._anyControlsHaveStatus(md)?md:Ca}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new Ta(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Sa(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Dd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=tj(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=nj(this._rawAsyncValidators)}},Id=class extends wd{constructor(t,n,r){super(vT(n),yT(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){ij(this,!0,t),Object.keys(t).forEach(r=>{rj(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Pm=new C("",{providedIn:"root",factory:()=>Fm}),Fm="always";function oj(e,t){return[...t.path,e]}function _T(e,t,n=Fm){ET(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),aj(e,t),lj(e,t),cj(e,t),sj(e,t)}function oT(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function sj(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function ET(e,t){let n=JV(e);t.validator!==null?e.setValidators(nT(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=XV(e);t.asyncValidator!==null?e.setAsyncValidators(nT(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();oT(t._rawValidators,i),oT(t._rawAsyncValidators,i)}function aj(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&wT(e,t)})}function cj(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&wT(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function wT(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function lj(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function uj(e,t){e==null,ET(e,t)}function dj(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function fj(e){return Object.getPrototypeOf(e.constructor)===Nm}function hj(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function pj(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===br?n=o:fj(o)?r=o:i=o}),i||r||n||null}var gj={provide:Ho,useExisting:jn(()=>Ma)},Da=Promise.resolve(),Ma=(()=>{class e extends Ho{callSetDisabledState;get submitted(){return hn(this.submittedReactive)}_submitted=ai(()=>this.submittedReactive());submittedReactive=ii(!1);_directives=new Set;form;ngSubmit=new Ee;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Id({},xm(n),km(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Da.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),_T(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Da.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Da.then(()=>{let r=this._findContainer(n.path),i=new Id({});uj(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Da.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Da.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),hj(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Mm(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new Rm(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||e)(T(Om,10),T(dT,10),T(Pm,8))};static \u0275dir=he({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&fe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[si([gj]),Vt]})}return e})();function sT(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function aT(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var mj=class extends wd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(vT(n),yT(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(aT(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){sT(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){sT(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){aT(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var vj={provide:Aa,useExisting:jn(()=>gi)},cT=Promise.resolve(),gi=(()=>{class e extends Aa{_changeDetectorRef;callSetDisabledState;control=new mj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ee;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=pj(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),dj(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_T(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){cT.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&gr(r);cT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?oj(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(T(Ho,9),T(Om,10),T(dT,10),T(Cd,10),T(Wn,8),T(Pm,8))};static \u0275dir=he({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[si([vj]),Vt,ur]})}return e})();var Td=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var yj={provide:Cd,useExisting:jn(()=>Sd),multi:!0};function IT(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function _j(e){return e.split(":")[0]}var Sd=(()=>{class e extends Nm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r=this._getOptionId(n),i=IT(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=_j(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=fr(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[si([yj]),Vt]})}return e})(),CT=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(IT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(T(Lt),T(fn),T(Sd,9))};static \u0275dir=he({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),Ej={provide:Cd,useExisting:jn(()=>bT),multi:!0};function lT(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function wj(e){return e.split(":")[0]}var bT=(()=>{class e extends Nm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=wj(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=fr(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[si([Ej]),Vt]})}return e})(),DT=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(lT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(lT(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(T(Lt),T(fn),T(bT,9))};static \u0275dir=he({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var Ij=(()=>{class e{_validator=tT;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):tT,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,features:[ur]})}return e})();var Cj={provide:Om,useExisting:jn(()=>Ra),multi:!0};var Ra=(()=>{class e extends Ij{required;inputName="required";normalizeInput=gr;createValidator=n=>KV;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=fr(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&qs("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[si([Cj]),Vt]})}return e})();var bj=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Hn({type:e});static \u0275inj=Un({})}return e})();var Dr=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Pm,useValue:n.callSetDisabledState??Fm}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Hn({type:e});static \u0275inj=Un({imports:[bj]})}return e})();var TT=()=>{};var jm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var E=function(e,t){if(!e)throw mi(t)},mi=function(e){return new Error("Firebase Database ("+jm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var MT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Dj=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},qo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(MT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Dj(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Um;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Um=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$m=function(e){let t=MT(e);return qo.encodeByteArray(t,!0)},Oa=function(e){return $m(e).replace(/\./g,"")},zo=function(e){try{return qo.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function RT(e){return NT(void 0,e)}function NT(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!Tj(n)||(e[n]=NT(e[n],t[n]));return e}function Tj(e){return e!=="__proto__"}function OT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Sj=()=>OT().__FIREBASE_DEFAULTS__,Aj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Mj=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&zo(e[1]);return t&&JSON.parse(t)},Hm=()=>{try{return TT()||Sj()||Aj()||Mj()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Wm=e=>{var t,n;return(n=(t=Hm())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},xT=e=>{let t=Wm(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},zm=()=>{var e;return(e=Hm())===null||e===void 0?void 0:e.config},Gm=e=>{var t;return(t=Hm())===null||t===void 0?void 0:t[`_${e}`]};var Gt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function vi(e){return e.endsWith(".cloudworkstations.dev")}function Md(e){return p(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function kT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Oa(JSON.stringify(n)),Oa(JSON.stringify(s)),""].join(".")}var Na={};function Rj(){let e={prod:[],emulator:[]};for(let t of Object.keys(Na))Na[t]?e.emulator.push(t):e.prod.push(t);return e}function Nj(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var ST=!1;function Ko(e,t){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||Na[e]===t||Na[e]||ST)return;Na[e]=t;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=Rj().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{ST=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=Nj(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),w=n("learnmore"),A=document.getElementById(w)||document.createElement("a"),j=n("preprendIcon"),ke=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let ge=f.element;a(ge),u(A,w);let Xn=l();c(ke,j),ge.append(ke,g,A,Xn),document.body.appendChild(ge)}o?(g.innerText="Preview backend disconnected.",ke.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ke.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xa(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function PT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FT(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Rd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LT(){let e=$e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function yn(){return jm.NODE_CLIENT===!0||jm.NODE_ADMIN===!0}function Nd(){try{return typeof indexedDB=="object"}catch{return!1}}function VT(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}var Oj="FirebaseError",qt=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Oj,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}},Kt=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?xj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new qt(i,a,r)}};function xj(e,t){return e.replace(kj,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var kj=/\{\$([^}]+)}/g;function Go(e){return JSON.parse(e)}function be(e){return JSON.stringify(e)}var jT=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=Go(zo(o[0])||""),n=Go(zo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var UT=function(e){let t=jT(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},BT=function(e){let t=jT(e).claims;return typeof t=="object"&&t.admin===!0};function Yt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function ka(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Pa(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function _n(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(AT(o)&&AT(s)){if(!_n(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function AT(e){return e!==null&&typeof e=="object"}function _i(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Yo(e){let t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function Zo(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ad=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function $T(e,t){let n=new Bm(e,t);return n.subscribe.bind(n)}var Bm=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Pj(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Vm),i.error===void 0&&(i.error=Vm),i.complete===void 0&&(i.complete=Vm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Pj(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Vm(){}function Fa(e,t){return`${e} failed: ${t} argument `}var HT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,E(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},La=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var TZ=4*60*60*1e3;function Ue(e){return e&&e._delegate?e._delegate:e}var Ge=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Ei="[DEFAULT]";var Od=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Gt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Lj(t))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Ei){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return p(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Ei){return this.instances.has(t)}getOptions(t=Ei){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fj(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ei){return this.component?this.component.multipleInstances?t:Ei:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Fj(e){return e===Ei?void 0:e}function Lj(e){return e.instantiationMode==="EAGER"}var Va=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Od(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var Vj=[],ne=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(ne||{}),jj={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},Uj=ne.INFO,Bj={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},$j=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Bj[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},En=class{constructor(t){this.name=t,this._logLevel=Uj,this._logHandler=$j,this._userLogHandler=null,Vj.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ne))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jj[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...t),this._logHandler(this,ne.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...t),this._logHandler(this,ne.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...t),this._logHandler(this,ne.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...t),this._logHandler(this,ne.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...t),this._logHandler(this,ne.ERROR,...t)}};var Hj=(e,t)=>t.some(n=>e instanceof n),WT,zT;function Wj(){return WT||(WT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zj(){return zT||(zT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GT=new WeakMap,Km=new WeakMap,qT=new WeakMap,qm=new WeakMap,Zm=new WeakMap;function Gj(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(wn(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&GT.set(n,e)}).catch(()=>{}),Zm.set(t,e),t}function qj(e){if(Km.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Km.set(e,t)}var Ym={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Km.get(e);if(t==="objectStoreNames")return e.objectStoreNames||qT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function KT(e){Ym=e(Ym)}function Kj(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(xd(this),t,...n);return qT.set(r,t.sort?t.sort():[t]),wn(r)}:zj().includes(e)?function(...t){return e.apply(xd(this),t),wn(GT.get(this))}:function(...t){return wn(e.apply(xd(this),t))}}function Yj(e){return typeof e=="function"?Kj(e):(e instanceof IDBTransaction&&qj(e),Hj(e,Wj())?new Proxy(e,Ym):e)}function wn(e){if(e instanceof IDBRequest)return Gj(e);if(qm.has(e))return qm.get(e);let t=Yj(e);return t!==e&&(qm.set(e,t),Zm.set(t,e)),t}var xd=e=>Zm.get(e);function ZT(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=wn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(wn(s.result),c.oldVersion,c.newVersion,wn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Zj=["get","getKey","getAll","getAllKeys","count"],Qj=["put","add","delete","clear"],Qm=new Map;function YT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Qm.get(t))return Qm.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=Qj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Zj.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Qm.set(t,o),o}KT(e=>U(_({},e),{get:(t,n,r)=>YT(t,n)||e.get(t,n,r),has:(t,n)=>!!YT(t,n)||e.has(t,n)}));var Xm=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Jj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Jj(e){let t=e.getComponent();return t?.type==="VERSION"}var ev="@firebase/app",QT="0.12.3";var zn=new En("@firebase/app"),Xj="@firebase/app-compat",eU="@firebase/analytics-compat",tU="@firebase/analytics",nU="@firebase/app-check-compat",rU="@firebase/app-check",iU="@firebase/auth",oU="@firebase/auth-compat",sU="@firebase/database",aU="@firebase/data-connect",cU="@firebase/database-compat",lU="@firebase/functions",uU="@firebase/functions-compat",dU="@firebase/installations",fU="@firebase/installations-compat",hU="@firebase/messaging",pU="@firebase/messaging-compat",gU="@firebase/performance",mU="@firebase/performance-compat",vU="@firebase/remote-config",yU="@firebase/remote-config-compat",_U="@firebase/storage",EU="@firebase/storage-compat",wU="@firebase/firestore",IU="@firebase/vertexai",CU="@firebase/firestore-compat",bU="firebase",DU="11.7.3";var tv="[DEFAULT]",TU={[ev]:"fire-core",[Xj]:"fire-core-compat",[tU]:"fire-analytics",[eU]:"fire-analytics-compat",[rU]:"fire-app-check",[nU]:"fire-app-check-compat",[iU]:"fire-auth",[oU]:"fire-auth-compat",[sU]:"fire-rtdb",[aU]:"fire-data-connect",[cU]:"fire-rtdb-compat",[lU]:"fire-fn",[uU]:"fire-fn-compat",[dU]:"fire-iid",[fU]:"fire-iid-compat",[hU]:"fire-fcm",[pU]:"fire-fcm-compat",[gU]:"fire-perf",[mU]:"fire-perf-compat",[vU]:"fire-rc",[yU]:"fire-rc-compat",[_U]:"fire-gcs",[EU]:"fire-gcs-compat",[wU]:"fire-fst",[CU]:"fire-fst-compat",[IU]:"fire-vertex","fire-js":"fire-js",[bU]:"fire-js-all"};var ja=new Map,SU=new Map,nv=new Map;function JT(e,t){try{e.container.addComponent(t)}catch(n){zn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Zt(e){let t=e.name;if(nv.has(t))return zn.debug(`There were multiple attempts to register component ${t}.`),!1;nv.set(t,e);for(let n of ja.values())JT(n,e);for(let n of SU.values())JT(n,e);return!0}function Qo(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function st(e){return e==null?!1:e.settings!==void 0}var AU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new Kt("app","Firebase",AU);var rv=class{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}};var Sr=DU;function sv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=Object.assign({name:tv,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Tr.create("bad-app-name",{appName:String(i)});if(n||(n=zm()),!n)throw Tr.create("no-options");let o=ja.get(i);if(o){if(_n(n,o.options)&&_n(r,o.config))return o;throw Tr.create("duplicate-app",{appName:i})}let s=new Va(i);for(let c of nv.values())s.addComponent(c);let a=new rv(n,r,s);return ja.set(i,a),a}function wi(e=tv){let t=ja.get(e);if(!t&&e===tv&&zm())return sv();if(!t)throw Tr.create("no-app",{appName:e});return t}function kd(){return Array.from(ja.values())}function ye(e,t,n){var r;let i=(r=TU[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zn.warn(a.join(" "));return}Zt(new Ge(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var MU="firebase-heartbeat-database",RU=1,Ua="firebase-heartbeat-store",Jm=null;function nS(){return Jm||(Jm=ZT(MU,RU,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ua)}catch(n){console.warn(n)}}}}).catch(e=>{throw Tr.create("idb-open",{originalErrorMessage:e.message})})),Jm}function NU(e){return p(this,null,function*(){try{let n=(yield nS()).transaction(Ua),r=yield n.objectStore(Ua).get(rS(e));return yield n.done,r}catch(t){if(t instanceof qt)zn.warn(t.message);else{let n=Tr.create("idb-get",{originalErrorMessage:t?.message});zn.warn(n.message)}}})}function XT(e,t){return p(this,null,function*(){try{let r=(yield nS()).transaction(Ua,"readwrite");yield r.objectStore(Ua).put(t,rS(e)),yield r.done}catch(n){if(n instanceof qt)zn.warn(n.message);else{let r=Tr.create("idb-set",{originalErrorMessage:n?.message});zn.warn(r.message)}}})}function rS(e){return`${e.name}!${e.options.appId}`}var OU=1024,xU=30,iv=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ov(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var t,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=eS();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xU){let s=PU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zn.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=eS(),{heartbeatsToSend:r,unsentEntries:i}=kU(this._heartbeatsCache.heartbeats),o=Oa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return zn.warn(n),""}})}};function eS(){return new Date().toISOString().substring(0,10)}function kU(e,t=OU){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),tS(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tS(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ov=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Nd()?VT().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield NU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function tS(e){return Oa(JSON.stringify({version:2,heartbeats:e})).length}function PU(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function FU(e){Zt(new Ge("platform-logger",t=>new Xm(t),"PRIVATE")),Zt(new Ge("heartbeat",t=>new iv(t),"PRIVATE")),ye(ev,QT,e),ye(ev,QT,"esm2017"),ye("fire-js","")}FU("");var LU="firebase",VU="11.7.3";ye(LU,VU,"app");function av(e){e===void 0&&(iu(av),e=m(ve));let t=e.get($s);return n=>new q(r=>{let i=t.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ar=new lr("ANGULARFIRE2_VERSION");function Ba(e,t,n){if(t){if(t.length===1)return t[0];let o=t.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var Xo=(e,t)=>{let n=t?[t]:kd(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Jo=function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e}(Jo||{}),iS=xg()&&typeof Zone<"u"?Jo.WARN:Jo.SILENT;var Pd=class{zone;delegate;constructor(t,n=Eh){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{t.apply(this,[s])}):t.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Mr=(()=>{class e{outsideAngular;insideAngular;constructor(){let n=m(Q);this.outsideAngular=n.runOutsideAngular(()=>new Pd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Pd(typeof Zone>"u"?void 0:Zone.current,_h))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),oS=!1;function jU(e,t){!oS&&(iS>Jo.SILENT||xg())&&(oS=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),iS>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function UU(e){let t=m(Q,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function Ii(e){let t=m(Q,{optional:!0});return t?t.run(()=>e()):e()}var BU=(e,t,n)=>(...r)=>(t&&setTimeout(t,0),Ve(n,()=>Ii(()=>e.apply(void 0,r)))),Oe=(e,t,n)=>(n||=t?Jo.WARN:Jo.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=m(Mr),s=m($s),a=m(Fe)}catch{return jU(e,n),e.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(t&&(r||=Ii(()=>s.add())),i[l]=BU(i[l],r,a));let c=UU(()=>e.apply(this,i));return t?c instanceof q?c.pipe(nr(o.outsideAngular),tr(o.insideAngular),av(a)):c instanceof Promise?Ii(()=>new Promise((l,u)=>{s.run(()=>c).then(d=>Ve(a,()=>Ii(()=>l(d))),d=>Ve(a,()=>Ii(()=>u(d))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Ii(()=>c):c instanceof q?c.pipe(nr(o.outsideAngular),tr(o.insideAngular)):Ii(()=>c)});var Gn=class{constructor(t){return t}},Ci=class{constructor(){return kd()}};function $U(e){return e&&e.length===1?e[0]:new Gn(wi())}var cv=new C("angularfire2._apps"),HU={provide:Gn,useFactory:$U,deps:[[new Xe,cv]]},WU={provide:Ci,deps:[[new Xe,cv]]};function zU(e){return(t,n)=>{let r=n.get(hr);ye("angularfire",Ar.full,"core"),ye("angularfire",Ar.full,"app"),ye("angular",bb.full,r.toString());let i=t.runOutsideAngular(()=>e(n));return new Gn(i)}}function sS(e,...t){return et([HU,WU,{provide:cv,useFactory:zU(e),multi:!0,deps:[Q,ve,Mr,...t]}])}var aS=Oe(sv,!0);var GU=new Map,qU={activated:!1,tokenObservers:[]},KU={initialized:!1,enabled:!1};function Qt(e){return GU.get(e)||Object.assign({},qU)}function dS(){return KU}var YU="https://content-firebaseappcheck.googleapis.com/v1";var ZU="exchangeDebugToken",cS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},OQ=24*60*60*1e3;var dv=class{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return p(this,null,function*(){this.stop();try{this.pending=new Gt,this.pending.promise.catch(n=>{}),yield QU(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Gt,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function QU(e){return new Promise(t=>{setTimeout(t,e)})}var JU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Rr=new Kt("appCheck","AppCheck",JU);function fS(e){if(!Qt(e).activated)throw Rr.create("use-before-activation",{appName:e.name})}function hS(r,i){return p(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(e,a)}catch(h){throw Rr.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw Rr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(h){throw Rr.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Rr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function pS(e,t){let{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${YU}/projects/${n}/apps/${r}:${ZU}?key=${i}`,body:{debug_token:t}}}var XU="firebase-app-check-database",e2=1,fv="firebase-app-check-store";var Fd=null;function t2(){return Fd||(Fd=new Promise((e,t)=>{try{let n=indexedDB.open(XU,e2);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Rr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fv,{keyPath:"compositeKey"})}}}catch(n){t(Rr.create("storage-open",{originalErrorMessage:n?.message}))}}),Fd)}function n2(e,t){return r2(i2(e),t)}function r2(e,t){return p(this,null,function*(){let r=(yield t2()).transaction(fv,"readwrite"),o=r.objectStore(fv).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Rr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function i2(e){return`${e.options.appId}-${e.name}`}var $a=new En("@firebase/app-check");function lv(e,t){return Nd()?n2(e,t).catch(n=>{$a.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function gS(){return dS().enabled}function mS(){return p(this,null,function*(){let e=dS();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var o2={error:"UNKNOWN_ERROR"};function s2(e){return qo.encodeString(JSON.stringify(e),!1)}function hv(e,t=!1,n=!1){return p(this,null,function*(){let r=e.app;fS(r);let i=Qt(r),o=i.token,s;if(o&&!Ha(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Ha(l)?o=l:yield lv(r,void 0))}if(!t&&o&&Ha(o))return{token:o.token};let a=!1;if(gS())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=hS(pS(r,yield mS()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield lv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$a.warn(l.message):n&&$a.error(l),uv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Qt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$a.warn(l.message):n&&$a.error(l),s=l}let c;return o?s?Ha(o)?c={token:o.token,internalError:s}:c=uv(s):(c={token:o.token},i.token=o,yield lv(r,o)):c=uv(s),a&&u2(r,c),c})}function a2(e){return p(this,null,function*(){let t=e.app;fS(t);let{provider:n}=Qt(t);if(gS()){let r=yield mS(),{token:i}=yield hS(pS(t,r),e.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function c2(e,t,n,r){let{app:i}=e,o=Qt(i),s={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ha(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),lS(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>lS(e))}function vS(e,t){let n=Qt(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function lS(e){let{app:t}=e,n=Qt(t),r=n.tokenRefresher;r||(r=l2(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function l2(e){let{app:t}=e;return new dv(()=>p(null,null,function*(){let n=Qt(t),r;if(n.token?r=yield hv(e,!0):r=yield hv(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Qt(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cS.RETRIAL_MIN_WAIT,cS.RETRIAL_MAX_WAIT)}function u2(e,t){let n=Qt(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Ha(e){return e.expireTimeMillis-Date.now()>0}function uv(e){return{token:s2(o2),error:e}}var pv=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=Qt(this.app);for(let n of t)vS(this.app,n.next);return Promise.resolve()}};function d2(e,t){return new pv(e,t)}function f2(e){return{getToken:t=>hv(e,t),getLimitedUseToken:()=>a2(e),addTokenListener:t=>c2(e,"INTERNAL",t),removeTokenListener:t=>vS(e.app,t)}}var h2="@firebase/app-check",p2="0.9.3";var g2="app-check",uS="app-check-internal";function m2(){Zt(new Ge(g2,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return d2(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(uS).initialize()})),Zt(new Ge(uS,e=>{let t=e.getProvider("app-check").getImmediate();return f2(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ye(h2,p2)}m2();var v2="app-check";var es=class{constructor(){return Xo(v2)}};var y2=["localhost","0.0.0.0","127.0.0.1"],zQ=typeof window<"u"&&y2.includes(window.location.hostname);function xS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kS=xS,PS=new Kt("auth","Firebase",xS());var $d=new En("@firebase/auth");function _2(e,...t){$d.logLevel<=ne.WARN&&$d.warn(`Auth (${Sr}): ${e}`,...t)}function Vd(e,...t){$d.logLevel<=ne.ERROR&&$d.error(`Auth (${Sr}): ${e}`,...t)}function Cn(e,...t){throw jv(e,...t)}function bi(e,...t){return jv(e,...t)}function FS(e,t,n){let r=Object.assign(Object.assign({},kS()),{[t]:n});return new Kt("auth","Firebase",r).create(t,{appName:e.name})}function Yn(e){return FS(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jv(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return PS.create(e,...t)}function x(e,t,...n){if(!e)throw jv(t,...n)}function qn(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Vd(t),new Error(t)}function xr(e,t){e||qn(t)}function yv(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function E2(){return yS()==="http:"||yS()==="https:"}function yS(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function w2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E2()||FT()||"connection"in navigator)?navigator.onLine:!0}function I2(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Di=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,xr(n>t,"Short delay should be less than long delay!"),this.isMobile=xa()||Rd()}get(){return w2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Uv(e,t){xr(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Hd=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var C2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var b2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D2=new Di(3e4,6e4);function kr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Pr(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){return LS(e,i,()=>p(null,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=_i(Object.assign({key:e.config.apiKey},u)).slice(1),f=yield e._getAdditionalHeaders();f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode);let h=Object.assign({method:t,headers:f},l);return PT()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&vi(e.emulatorConfig.host)&&(h.credentials="include"),Hd.fetch()(yield VS(e,e.config.apiHost,n,d),h)}))})}function LS(e,t,n){return p(this,null,function*(){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},C2),t);try{let i=new _v(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ld(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Ld(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Ld(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw FS(e,u,l);Cn(e,u)}}catch(i){if(i instanceof qt)throw i;Cn(e,"network-request-failed",{message:String(i)})}})}function Ja(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){let l=yield Pr(e,t,n,r,i);return"mfaPendingCredential"in l&&Cn(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function VS(e,t,n,r){return p(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?Uv(e.config,i):`${e.config.apiScheme}://${i}`;return b2.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function T2(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _v=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bi(this.auth,"network-request-failed")),D2.get())})}};function Ld(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=bi(e,t,r);return i.customData._tokenResponse=n,i}function _S(e){return e!==void 0&&e.enterprise!==void 0}var Ev=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return T2(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function S2(e,t){return p(this,null,function*(){return Pr(e,"GET","/v2/recaptchaConfig",kr(e,t))})}function A2(e,t){return p(this,null,function*(){return Pr(e,"POST","/v1/accounts:delete",t)})}function Wd(e,t){return p(this,null,function*(){return Pr(e,"POST","/v1/accounts:lookup",t)})}function za(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Bv(e,t=!1){return p(this,null,function*(){let n=Ue(e),r=yield n.getIdToken(t),i=$v(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:za(gv(i.auth_time)),issuedAtTime:za(gv(i.iat)),expirationTime:za(gv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function gv(e){return Number(e)*1e3}function $v(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{let i=zo(n);return i?JSON.parse(i):(Vd("Failed to decode base64 JWT payload"),null)}catch(i){return Vd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ES(e){let t=$v(e);return x(t,"internal-error"),x(typeof t.exp<"u","internal-error"),x(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function qa(e,t,n=!1){return p(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof qt&&M2(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function M2({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var wv=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ka=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function zd(e){return p(this,null,function*(){var t;let n=e.auth,r=yield e.getIdToken(),i=yield qa(e,Wd(n,{idToken:r}));x(i?.users.length,n,"internal-error");let o=i.users[0];e._notifyReloadListener(o);let s=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?jS(o.providerUserInfo):[],a=R2(e.providerData,s),c=e.isAnonymous,l=!(e.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ka(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)})}function Hv(e){return p(this,null,function*(){let t=Ue(e);yield zd(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function R2(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function jS(e){return e.map(t=>{var{providerId:n}=t,r=wh(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function N2(e,t){return p(this,null,function*(){let n=yield LS(e,{},()=>p(null,null,function*(){let r=_i({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield VS(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Hd.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function O2(e,t){return p(this,null,function*(){return Pr(e,"POST","/v2/accounts:revokeToken",kr(e,t))})}var Ga=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){x(t.idToken,"internal-error"),x(typeof t.idToken<"u","internal-error"),x(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ES(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){x(t.length!==0,"internal-error");let n=ES(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(x(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield N2(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(x(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(x(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(x(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return qn("not implemented")}};function Nr(e,t){x(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var Or=class e{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=wh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ka(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){return p(this,null,function*(){let n=yield qa(this,this.stsTokenManager.getToken(this.auth,t));return x(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return Bv(this,t)}reload(){return Hv(this)}_assign(t){this!==t&&(x(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return p(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield zd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(st(this.auth.app))return Promise.reject(Yn(this.auth));let t=yield this.getIdToken();return yield qa(this,A2(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=n.photoURL)!==null&&s!==void 0?s:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,j=(l=n.createdAt)!==null&&l!==void 0?l:void 0,ke=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:ge,emailVerified:Xn,isAnonymous:O_,providerData:Hf,stsTokenManager:x_}=n;x(ge&&x_,t,"internal-error");let AM=Ga.fromJSON(this.name,x_);x(typeof ge=="string",t,"internal-error"),Nr(d,t.name),Nr(f,t.name),x(typeof Xn=="boolean",t,"internal-error"),x(typeof O_=="boolean",t,"internal-error"),Nr(h,t.name),Nr(g,t.name),Nr(w,t.name),Nr(A,t.name),Nr(j,t.name),Nr(ke,t.name);let Wf=new e({uid:ge,auth:t,email:f,emailVerified:Xn,displayName:d,isAnonymous:O_,photoURL:g,phoneNumber:h,tenantId:w,stsTokenManager:AM,createdAt:j,lastLoginAt:ke});return Hf&&Array.isArray(Hf)&&(Wf.providerData=Hf.map(MM=>Object.assign({},MM))),A&&(Wf._redirectEventId=A),Wf}static _fromIdTokenResponse(t,n,r=!1){return p(this,null,function*(){let i=new Ga;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield zd(o),o})}static _fromGetAccountInfoResponse(t,n,r){return p(this,null,function*(){let i=n.users[0];x(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?jS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ga;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ka(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var wS=new Map;function Kn(e){xr(e instanceof Function,"Expected a class definition");let t=wS.get(e);return t?(xr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,wS.set(e,t),t)}var x2=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),Iv=x2;function jd(e,t,n){return`firebase:${e}:${t}:${n}`}var Gd=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=jd(this.userKey,i.apiKey,o),this.fullPersistenceKey=jd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return p(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Wd(this.auth,{idToken:t}).catch(()=>{});return n?Or._fromGetAccountInfoResponse(this.auth,n,t):null}return Or._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return p(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new e(Kn(Iv),t,r);let i=(yield Promise.all(n.map(l=>p(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Kn(Iv),s=jd(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield Wd(t,{idToken:u}).catch(()=>{});if(!f)break;d=yield Or._fromGetAccountInfoResponse(t,f,u)}else d=Or._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function IS(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(HS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(US(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zS(t))return"Blackberry";if(GS(t))return"Webos";if(BS(t))return"Safari";if((t.includes("chrome/")||$S(t))&&!t.includes("edge/"))return"Chrome";if(WS(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function US(e=$e()){return/firefox\//i.test(e)}function BS(e=$e()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $S(e=$e()){return/crios\//i.test(e)}function HS(e=$e()){return/iemobile/i.test(e)}function WS(e=$e()){return/android/i.test(e)}function zS(e=$e()){return/blackberry/i.test(e)}function GS(e=$e()){return/webos/i.test(e)}function Wv(e=$e()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function k2(e=$e()){var t;return Wv(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function P2(){return LT()&&document.documentMode===10}function qS(e=$e()){return Wv(e)||WS(e)||GS(e)||zS(e)||/windows phone/i.test(e)||HS(e)}function KS(e,t=[]){let n;switch(e){case"Browser":n=IS($e());break;case"Worker":n=`${IS($e())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sr}/${r}`}var Cv=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return p(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function F2(n){return p(this,arguments,function*(e,t={}){return Pr(e,"GET","/v2/passwordPolicy",kr(e,t))})}var L2=6,bv=class{constructor(t){var n,r,i,o;let s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:L2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var Dv=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qd(this),this.idTokenSubscription=new qd(this),this.beforeStateQueue=new Cv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Gd.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return p(this,null,function*(){try{let n=yield Wd(this,{idToken:t}),r=yield Or._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return p(this,null,function*(){var n;if(st(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(t);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(t){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return p(this,null,function*(){try{yield zd(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=I2()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return p(this,null,function*(){if(st(this.app))return Promise.reject(Yn(this));let n=t?Ue(t):null;return n&&x(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return p(this,null,function*(){if(!this._deleted)return t&&x(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return st(this.app)?Promise.reject(Yn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return st(this.app)?Promise.reject(Yn(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Kn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let t=yield F2(this),n=new bv(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Kt("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield O2(this,r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&Kn(t)||this._popupRedirectResolver;x(n,this,"argument-error"),this.redirectPersistenceManager=yield Gd.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return p(this,null,function*(){if(t===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(x(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return p(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=KS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var t;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var t;if(st(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return n?.error&&_2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Si(e){return Ue(e)}var qd=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=$T(n=>this.observer=n)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ef={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V2(e){ef=e}function YS(e){return ef.loadJS(e)}function j2(){return ef.recaptchaEnterpriseScript}function U2(){return ef.gapiScript}function ZS(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Tv=class{constructor(){this.enterprise=new Sv}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}},Sv=class{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}};var B2="recaptcha-enterprise",QS="NO_RECAPTCHA",Av=class{constructor(t){this.type=B2,this.auth=Si(t)}verify(t="verify",n=!1){return p(this,null,function*(){function r(o){return p(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>p(null,null,function*(){S2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Ev(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;_S(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:t}).then(l=>{s(l)}).catch(()=>{s(QS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&_S(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=j2();c.length!==0&&(c+=a),YS(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Wa(e,t,n,r=!1,i=!1){return p(this,null,function*(){let o=new Av(e),s;if(i)s=QS;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Mv(e,t,n,r,i){return p(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=e._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Wa(e,t,n,n==="getOobCode");return r(e,a)}else return r(e,t).catch(a=>p(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Wa(e,t,n,n==="getOobCode");return r(e,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=e._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Wa(e,t,n);return r(e,a).catch(c=>p(null,null,function*(){var l;if(((l=e._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let u=yield Wa(e,t,n,!1,!0);return r(e,u)}return Promise.reject(c)}))}else{let a=yield Wa(e,t,n,!1,!0);return r(e,a)}else return Promise.reject(i+" provider is not supported.")})}function zv(e,t){let n=Qo(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(_n(o,t??{}))return i;Cn(i,"already-initialized")}return n.initialize({options:t})}function $2(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Kn);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Gv(e,t,n){let r=Si(e);x(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=JS(t),{host:s,port:a}=H2(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){x(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),x(_n(l,r.config.emulator)&&_n(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,vi(s)?(Ko("Auth",!0),Md(`${o}//${s}${c}`)):i||W2()}function JS(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function H2(e){let t=JS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:CS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:CS(s)}}}function CS(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function W2(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var Ya=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(t){return qn("not implemented")}_linkToIdToken(t,n){return qn("not implemented")}_getReauthenticationResolver(t){return qn("not implemented")}};function z2(e,t){return p(this,null,function*(){return Pr(e,"POST","/v1/accounts:signUp",t)})}function G2(e,t){return p(this,null,function*(){return Ja(e,"POST","/v1/accounts:signInWithPassword",kr(e,t))})}function q2(e,t){return p(this,null,function*(){return Ja(e,"POST","/v1/accounts:signInWithEmailLink",kr(e,t))})}function K2(e,t){return p(this,null,function*(){return Ja(e,"POST","/v1/accounts:signInWithEmailLink",kr(e,t))})}var Za=class e extends Ya{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new e(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new e(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mv(t,n,"signInWithPassword",G2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return q2(t,{email:this._email,oobCode:this._password});default:Cn(t,"internal-error")}})}_linkToIdToken(t,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mv(t,r,"signUpPassword",z2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return K2(t,{idToken:n,email:this._email,oobCode:this._password});default:Cn(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function mv(e,t){return p(this,null,function*(){return Ja(e,"POST","/v1/accounts:signInWithIdp",kr(e,t))})}function Y2(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Z2(e){let t=Yo(Zo(e)).link,n=t?Yo(Zo(t)).deep_link_id:null,r=Yo(Zo(e)).deep_link_id;return(r?Yo(Zo(r)).link:null)||r||n||t||e}var Kd=class e{constructor(t){var n,r,i,o,s,a;let c=Yo(Zo(t)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=Y2((i=c.mode)!==null&&i!==void 0?i:null);x(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){let n=Z2(t);try{return new e(n)}catch{return null}}};var XS=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,r){return Za._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Kd.parseLink(r);return x(i,"argument-error"),Za._fromEmailAndCode(n,i.code,i.tenantId)}}e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return e})(),Yd=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Rv=class extends Yd{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};function Q2(e,t){return p(this,null,function*(){return Ja(e,"POST","/v1/accounts:signUp",kr(e,t))})}var ts=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return p(this,null,function*(){let o=yield Or._fromIdTokenResponse(t,r,i),s=bS(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return p(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=bS(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function bS(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Nv=class e extends qt{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function e0(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nv._fromErrorAndOperation(e,o,t,r):o})}function J2(e,t,n=!1){return p(this,null,function*(){let r=yield qa(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return ts._forOperation(e,"link",r)})}function X2(e,t,n=!1){return p(this,null,function*(){let{auth:r}=e;if(st(r.app))return Promise.reject(Yn(r));let i="reauthenticate";try{let o=yield qa(e,e0(r,i,t,e),n);x(o.idToken,r,"internal-error");let s=$v(o.idToken);x(s,r,"internal-error");let{sub:a}=s;return x(e.uid===a,r,"user-mismatch"),ts._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Cn(r,"user-mismatch"),o}})}function t0(e,t,n=!1){return p(this,null,function*(){if(st(e.app))return Promise.reject(Yn(e));let r="signIn",i=yield e0(e,r,t),o=yield ts._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function qv(e,t){return p(this,null,function*(){return t0(Si(e),t)})}function n0(e){return p(this,null,function*(){let t=Si(e);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function Kv(e,t,n){return p(this,null,function*(){if(st(e.app))return Promise.reject(Yn(e));let r=Si(e),s=yield Mv(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q2,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&n0(e),c}),a=yield ts._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Yv(e,t,n){return st(e.app)?Promise.reject(Yn(e)):qv(Ue(e),XS.credential(t,n)).catch(r=>p(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&n0(e),r}))}function Zv(e,t,n,r){return Ue(e).onIdTokenChanged(t,n,r)}function Qv(e,t,n){return Ue(e).beforeAuthStateChanged(t,n)}var Zd="__sak";var Qd=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var eB=1e3,tB=10,nB=(()=>{class e extends Qd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);P2()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,tB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},eB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield $r(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield $r(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield $r(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),r0=nB;var rB=(()=>{class e extends Qd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),Jv=rB;function iB(e){return Promise.all(e.map(t=>p(null,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var oB=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield iB(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function i0(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var Ov=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=i0("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function In(){return window}function sB(e){In().location.href=e}function o0(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}function aB(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function cB(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function lB(){return o0()?self:null}var s0="firebaseLocalStorageDb",uB=1,Jd="firebaseLocalStorage",a0="fbase_key",Ti=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function tf(e,t){return e.transaction([Jd],t?"readwrite":"readonly").objectStore(Jd)}function dB(){let e=indexedDB.deleteDatabase(s0);return new Ti(e).toPromise()}function xv(){let e=indexedDB.open(s0,uB);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(Jd,{keyPath:a0})}catch(i){n(i)}}),e.addEventListener("success",()=>p(null,null,function*(){let r=e.result;r.objectStoreNames.contains(Jd)?t(r):(r.close(),yield dB(),t(yield xv()))}))})}function DS(e,t,n){return p(this,null,function*(){let r=tf(e,!0).put({[a0]:t,value:n});return new Ti(r).toPromise()})}function fB(e,t){return p(this,null,function*(){let n=tf(e,!1).get(t),r=yield new Ti(n).toPromise();return r===void 0?null:r.value})}function TS(e,t){let n=tf(e,!0).delete(t);return new Ti(n).toPromise()}var hB=800,pB=3,gB=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield xv(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>pB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return o0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=oB._getInstance(lB()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield aB(),!this.activeServiceWorker)return;this.sender=new Ov(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||cB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield xv();return yield DS(n,Zd,"1"),yield TS(n,Zd),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>DS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>fB(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>TS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=tf(o,!1).getAll();return new Ti(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),hB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),c0=gB;var XQ=ZS("rcb"),eJ=new Di(3e4,6e4);function mB(e,t){return t?Kn(t):(x(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Qa=class extends Ya{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return mv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return mv(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function vB(e){return t0(e.auth,new Qa(e),e.bypassAuthState)}function yB(e){let{auth:t,user:n}=e;return x(n,t,"internal-error"),X2(n,new Qa(e),e.bypassAuthState)}function _B(e){return p(this,null,function*(){let{auth:t,user:n}=e;return x(n,t,"internal-error"),J2(n,new Qa(e),e.bypassAuthState)})}var kv=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>p(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vB;case"linkViaPopup":case"linkViaRedirect":return _B;case"reauthViaPopup":case"reauthViaRedirect":return yB;default:Cn(this.auth,"internal-error")}}resolve(t){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var tJ=new Di(2e3,1e4);var EB="pendingRedirect",Ud=new Map,Pv=class e extends kv{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let t=Ud.get(this.auth._key());if(!t){try{let r=(yield wB(this.resolver,this.auth))?yield $r(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Ud.set(this.auth._key(),t)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return p(this,null,function*(){if(t.type==="signInViaRedirect")return $r(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,$r(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function wB(e,t){return p(this,null,function*(){let n=bB(t),r=CB(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function IB(e,t){Ud.set(e._key(),t)}function CB(e){return Kn(e._redirectPersistence)}function bB(e){return jd(EB,e.config.apiKey,e.name)}function DB(e,t,n=!1){return p(this,null,function*(){if(st(e.app))return Promise.reject(Yn(e));let r=Si(e),i=mB(r,t),s=yield new Pv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var TB=10*60*1e3,Fv=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!SB(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!l0(t)){let i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bi(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=TB&&this.cachedEventUids.clear(),this.cachedEventUids.has(SS(t))}saveEventToCache(t){this.cachedEventUids.add(SS(t)),this.lastProcessedEventTime=Date.now()}};function SS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function l0({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function SB(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l0(e);default:return!1}}function AB(n){return p(this,arguments,function*(e,t={}){return Pr(e,"GET","/v1/projects",t)})}var MB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RB=/^https?/;function NB(e){return p(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield AB(e);for(let n of t)try{if(OB(n))return}catch{}Cn(e,"unauthorized-domain")})}function OB(e){let t=yv(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!RB.test(n))return!1;if(MB.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var xB=new Di(3e4,6e4);function AS(){let e=In().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function kB(e){return new Promise((t,n)=>{var r,i,o;function s(){AS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{AS(),n(bi(e,"network-request-failed"))},timeout:xB.get()})}if(!((i=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=In().gapi)===null||o===void 0)&&o.load)s();else{let a=ZS("iframefcb");return In()[a]=()=>{gapi.load?s():n(bi(e,"network-request-failed"))},YS(`${U2()}?onload=${a}`).catch(c=>n(c))}}).catch(t=>{throw Bd=null,t})}var Bd=null;function PB(e){return Bd=Bd||kB(e),Bd}var FB=new Di(5e3,15e3),LB="__/auth/iframe",VB="emulator/auth/iframe",jB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BB(e){let t=e.config;x(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?Uv(t,VB):`https://${e.config.authDomain}/${LB}`,r={apiKey:t.apiKey,appName:e.name,v:Sr},i=UB.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${_i(r).slice(1)}`}function $B(e){return p(this,null,function*(){let t=yield PB(e),n=In().gapi;return x(n,e,"internal-error"),t.open({where:document.body,url:BB(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jB,dontclear:!0},r=>new Promise((i,o)=>p(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=bi(e,"network-request-failed"),a=In().setTimeout(()=>{o(s)},FB.get());function c(){In().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var HB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WB=500,zB=600,GB="_blank",qB="http://localhost",Xd=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function KB(e,t,n,r=WB,i=zB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},HB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=$e().toLowerCase();n&&(a=$S(l)?GB:n),US(l)&&(t=t||qB,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(k2(l)&&a!=="_self")return YB(t||"",a),new Xd(null);let d=window.open(t||"",a,u);x(d,e,"popup-blocked");try{d.focus()}catch{}return new Xd(d)}function YB(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ZB="__/auth/handler",QB="emulator/auth/handler",JB=encodeURIComponent("fac");function MS(e,t,n,r,i,o){return p(this,null,function*(){x(e.config.authDomain,e,"auth-domain-config-required"),x(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Sr,eventId:i};if(t instanceof Yd){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",ka(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof Rv){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${JB}=${encodeURIComponent(c)}`:"";return`${XB(e)}?${_i(a).slice(1)}${l}`})}function XB({config:e}){return e.emulator?Uv(e,QB):`https://${e.authDomain}/${ZB}`}var vv="webStorageSupport",Lv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jv,this._completeRedirectFn=DB,this._overrideRedirectResult=IB}_openPopup(t,n,r,i){return p(this,null,function*(){var o;xr((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield MS(t,n,r,yv(),i);return KB(t,s,i0())})}_openRedirect(t,n,r,i){return p(this,null,function*(){yield this._originValidation(t);let o=yield MS(t,n,r,yv(),i);return sB(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(xr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return p(this,null,function*(){let n=yield $B(t),r=new Fv(t);return n.register("authEvent",i=>(x(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(vv,{type:vv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[vv];s!==void 0&&n(!!s),Cn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NB(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return qS()||BS()||Wv()}},u0=Lv;var RS="@firebase/auth",NS="1.10.4";var Vv=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function e$(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t$(e){Zt(new Ge("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;x(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KS(e)},l=new Dv(r,i,o,c);return $2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Zt(new Ge("auth-internal",t=>{let n=Si(t.getProvider("auth").getImmediate());return(r=>new Vv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ye(RS,NS,e$(e)),ye(RS,NS,"esm2017")}var n$=5*60,r$=Gm("authIdTokenMaxAge")||n$,OS=null,i$=e=>t=>p(null,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>r$)return;let i=n?.token;OS!==i&&(OS=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Xv(e=wi()){let t=Qo(e,"auth");if(t.isInitialized())return t.getImmediate();let n=zv(e,{popupRedirectResolver:u0,persistence:[c0,r0,Jv]}),r=Gm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=i$(o.toString());Qv(n,s,()=>s(n.currentUser)),Zv(n,a=>s(a))}}let i=Wm("auth");return i?Gv(n,`http://${i}`):Ko("Auth",!1),n}function o$(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}V2({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=bi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",o$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t$("Browser");var d0="auth",Zn=class{constructor(t){return t}},Xa=class{constructor(){return Xo(d0)}};var ey=new C("angularfire2.auth-instances");function Y$(e,t){let n=Ba(d0,e,t);return n&&new Zn(n)}function Z$(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new Zn(r)}}var Q$={provide:Xa,deps:[[new Xe,ey]]},J$={provide:Zn,useFactory:Y$,deps:[[new Xe,ey],Gn]};function f0(e,...t){return ye("angularfire",Ar.full,"auth"),et([J$,Q$,{provide:ey,useFactory:Z$(e),multi:!0,deps:[Q,ve,Mr,Ci,[new Xe,es],...t]}])}var h0=Oe(Kv,!0,2);var p0=Oe(Xv,!0);var g0=Oe(Yv,!0,2);var bn=class e{constructor(t){this.auth=t}login(t,n){return g0(this.auth,t,n)}register(t,n){return h0(this.auth,t,n)}logout(){return this.auth.signOut()}get currentUserId(){return this.auth.currentUser?this.auth.currentUser.uid:""}static \u0275fac=function(n){return new(n||e)(O(Zn))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})};function X$(e,t){if(e&1&&(v(0,"div",17),D(1),y()),e&2){let n=le();I(),ae(n.error)}}var ec=class e{constructor(t,n){this.authService=t;this.router=n}email="";password="";error="";onLogin(){return p(this,null,function*(){try{yield this.authService.login(this.email,this.password),this.router.navigate(["/feed"])}catch(t){this.error=t.message}})}static \u0275fac=function(n){return new(n||e)(T(bn),T(Ce))};static \u0275cmp=Be({type:e,selectors:[["app-login"]],decls:27,vars:3,consts:[[1,"auth-container"],[1,"auth-card","fade-in-up"],[1,"text-center","mb-4"],[1,"app-title"],[1,"form-title"],[1,"subtitle"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","autocomplete","username",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","autocomplete","current-password",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-morado","w-100"],[1,"bi","bi-box-arrow-in-right"],[1,"text-center","mt-3"],["routerLink","/register",1,"link-morado"],[1,"alert","alert-danger"]],template:function(n,r){n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),D(4,"CookShare"),y(),v(5,"h2",4),D(6,"Iniciar sesi\xF3n"),y(),v(7,"p",5),D(8,"\xA1Bienvenido de nuevo a la red social de comida!"),y()(),v(9,"form",6),fe("ngSubmit",function(){return r.onLogin()}),v(10,"div",7)(11,"label",8),D(12,"Correo electr\xF3nico"),y(),v(13,"input",9),Dt("ngModelChange",function(o){return jt(r.email,o)||(r.email=o),o}),y()(),v(14,"div",7)(15,"label",10),D(16,"Contrase\xF1a"),y(),v(17,"input",11),Dt("ngModelChange",function(o){return jt(r.password,o)||(r.password=o),o}),y()(),de(18,X$,2,1,"div",12),v(19,"button",13),oe(20,"i",14),D(21," Entrar "),y()(),v(22,"div",15)(23,"span"),D(24,"\xBFNo tienes cuenta?"),y(),v(25,"a",16),D(26,"Reg\xEDstrate"),y()()()()),n&2&&(I(13),bt("ngModel",r.email),I(4),bt("ngModel",r.password),I(),R("ngIf",r.error))},dependencies:[rt,Ht,Dr,Td,br,Wo,bd,Ra,gi,Ma,zt,At],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#a259c6,#6d28d9)}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 6px 32px #6c008026;padding:2.5rem 2rem;width:100%;max-width:400px}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#a259c6}.app-title[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;font-weight:700;color:#6d28d9;margin-bottom:.5rem}.form-title[_ngcontent-%COMP%]{color:#a259c6;margin-bottom:.25rem}.subtitle[_ngcontent-%COMP%]{color:#6d28d9;font-size:1rem;margin-bottom:1.5rem}.btn-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;border:none;font-weight:600;transition:background .2s}.btn-morado[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6d28d9,#a259c6);color:#fff}.link-morado[_ngcontent-%COMP%]{color:#a259c6;font-weight:500;text-decoration:none}.link-morado[_ngcontent-%COMP%]:hover{color:#6d28d9;text-decoration:underline}.fade-in-up[_ngcontent-%COMP%]{opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_fadeInUp .7s cubic-bezier(.23,1,.32,1) forwards}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}}"]})};var v0="@firebase/database",y0="1.0.17";var r_="";function eH(e){r_=e}var cy=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),be(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Go(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var ly=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Yt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var Z0=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new cy(t)}}catch{}return new ly},Mi=Z0("localStorage"),uy=Z0("sessionStorage");var is=new En("@firebase/database"),tH=function(){let e=1;return function(){return e++}}(),Q0=function(e){let t=HT(e),n=new Ad;n.update(t);let r=n.digest();return qo.encodeByteArray(r)},Ic=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Ic.apply(null,r):typeof r=="object"?t+=be(r):t+=r,t+=" "}return t},Ni=null,_0=!0,nH=function(e,t){E(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(is.logLevel=ne.VERBOSE,Ni=is.log.bind(is),t&&uy.set("logging_enabled",!0)):typeof e=="function"?Ni=e:(Ni=null,uy.remove("logging_enabled"))},He=function(...e){if(_0===!0&&(_0=!1,Ni===null&&uy.get("logging_enabled")===!0&&nH(!0)),Ni){let t=Ic.apply(null,e);Ni(t)}},Cc=function(e){return function(...t){He(e,...t)}},dy=function(...e){let t="FIREBASE INTERNAL ERROR: "+Ic(...e);is.error(t)},Qn=function(...e){let t=`FIREBASE FATAL ERROR: ${Ic(...e)}`;throw is.error(t),new Error(t)},at=function(...e){let t="FIREBASE WARNING: "+Ic(...e);is.warn(t)},rH=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&at("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},i_=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},iH=function(e){if(yn()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xi="[MIN_NAME]",Vr="[MAX_NAME]",hs=function(e,t){if(e===t)return 0;if(e===xi||t===Vr)return-1;if(t===xi||e===Vr)return 1;{let n=E0(e),r=E0(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},oH=function(e,t){return e===t?0:e<t?-1:1},tc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+be(t))},o_=function(e){if(typeof e!="object"||e===null)return be(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=be(t[r]),n+=":",n+=o_(e[t[r]]);return n+="}",n},J0=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ct(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var X0=function(e){E(!i_(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},sH=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},aH=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function cH(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var lH=new RegExp("^-?(0*)\\d{1,10}$"),uH=-2147483648,dH=2147483647,E0=function(e){if(lH.test(e)){let t=Number(e);if(t>=uH&&t<=dH)return t}return null},ps=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw at("Exception was thrown by user callback.",n),t},Math.floor(0))}},fH=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},sc=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var fy=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,st(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){at(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var hy=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(He("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',at(t)}},ac=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),of="5",eA="v",tA="s",nA="r",rA="f",iA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oA="ls",sA="p",py="ac",aA="websocket",cA="long_polling";var sf=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mi.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Mi.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function hH(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function lA(e,t,n){E(typeof t=="string","typeof type must == string"),E(typeof n=="object","typeof params must == object");let r;if(t===aA)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===cA)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);hH(e)&&(n.ns=e.namespace);let i=[];return ct(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var gy=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Yt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return RT(this.counters_)}};var ty={},ny={};function s_(e){let t=e.toString();return ty[t]||(ty[t]=new gy),ty[t]}function pH(e,t){let n=e.toString();return ny[n]||(ny[n]=t()),ny[n]}var my=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ps(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var w0="start",gH="close",mH="pLPCommand",vH="pRTLPCB",uA="id",dA="pw",fA="ser",yH="cb",_H="seg",EH="ts",wH="d",IH="dframe",hA=1870,pA=30,CH=hA-pA,bH=25e3,DH=3e4,vy=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cc(t),this.stats_=s_(n),this.urlFn=c=>(this.appCheckToken&&(c[py]=this.appCheckToken),lA(n,cA,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new my(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(DH)),iH(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yy((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===w0)this.id=a,this.password=c;else if(s===gH)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[w0]="t",r[fA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[yH]=this.scriptTagHolder.uniqueCallbackIdentifier),r[eA]=of,this.transportSessionId&&(r[tA]=this.transportSessionId),this.lastSessionId&&(r[oA]=this.lastSessionId),this.applicationId&&(r[sA]=this.applicationId),this.appCheckToken&&(r[py]=this.appCheckToken),typeof location<"u"&&location.hostname&&iA.test(location.hostname)&&(r[nA]=rA);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return yn()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sH()&&!aH()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=be(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=$m(n),i=J0(r,CH);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(yn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[IH]="t",r[uA]=t,r[dA]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=be(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},yy=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,yn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=tH(),window[mH+this.uniqueCallbackIdentifier]=t,window[vH+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){He("frame writing exception"),a.stack&&He(a.stack),He(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||He("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[uA]=this.myID,t[dA]=this.myPW,t[fA]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+pA+r.length<=hA;){let s=this.pendingSegs.shift();r=r+"&"+_H+i+"="+s.seg+"&"+EH+i+"="+s.ts+"&"+wH+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(bH)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){yn()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{He("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var TH=16384,SH=45e3,af=null;typeof MozWebSocket<"u"?af=MozWebSocket:typeof WebSocket<"u"&&(af=WebSocket);var nc=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cc(this.connId),this.stats_=s_(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[eA]=of,!yn()&&typeof location<"u"&&location.hostname&&iA.test(location.hostname)&&(a[nA]=rA),r&&(a[tA]=r),i&&(a[oA]=i),o&&(a[py]=o),s&&(a[sA]=s),lA(n,aA,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mi.set("previous_websocket_failure",!0);try{let i;if(yn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${of}/${r_}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new af(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&af!==null&&!e.forceDisallow_}static previouslyFailed(){return Mi.isInMemoryStorage||Mi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Go(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(E(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=be(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=J0(r,TH);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(SH))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),AH=(()=>{class e{static get ALL_TRANSPORTS(){return[vy,nc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=nc&&nc.isAvailable(),i=r&&!nc.previouslyFailed();if(n.webSocketOnly&&(r||at("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[nc];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),MH=6e4,RH=5e3,NH=10*1024,OH=100*1024,ry="t",I0="d",xH="s",C0="r",kH="e",b0="o",D0="a",T0="n",S0="p",PH="h",_y=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cc("c:"+this.id+":"),this.transportManager_=new AH(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=sc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>OH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>NH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ry in t){let n=t[ry];n===D0?this.upgradeIfSecondaryHealthy_():n===C0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===b0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=tc("t",t),r=tc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:S0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:T0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=tc("t",t),r=tc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=tc(ry,t);if(I0 in t){let r=t[I0];if(n===PH){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===T0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===xH?this.onConnectionShutdown_(r):n===C0?this.onReset_(r):n===kH?dy("Server Error: "+r):n===b0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dy("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),of!==r&&at("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),sc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(MH))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(RH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:S0,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var cf=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var lf=class{constructor(t){this.allowedEvents_=t,this.listeners_={},E(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){E(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var uf=class e extends lf{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xa()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return E(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var A0=32,M0=768,te=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function J(){return new te("")}function H(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function jr(e){return e.pieces_.length-e.pieceNum_}function ce(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new te(e.pieces_,t)}function gA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function FH(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function mA(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function vA(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new te(t,0)}function Me(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof te)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new te(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function qe(e,t){let n=H(e),r=H(t);if(n===null)return t;if(n===r)return qe(ce(e),ce(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function a_(e,t){if(jr(e)!==jr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Xt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(jr(e)>jr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ey=class{constructor(t,n){this.errorPrefix_=n,this.parts_=mA(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=La(this.parts_[r]);yA(this)}};function LH(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=La(t),yA(e)}function VH(e){let t=e.parts_.pop();e.byteLength_-=La(t),e.parts_.length>0&&(e.byteLength_-=1)}function yA(e){if(e.byteLength_>M0)throw new Error(e.errorPrefix_+"has a key path longer than "+M0+" bytes ("+e.byteLength_+").");if(e.parts_.length>A0)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+A0+") or object contains a cycle "+Ai(e))}function Ai(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var wy=class e extends lf{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return E(t==="visible","Unknown event type: "+t),[this.visible_]}};var rc=1e3,jH=60*5*1e3,R0=30*1e3,UH=1.3,BH=3e4,$H="server_kill",N0=3,c_=(()=>{class e extends cf{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=Cc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rc,this.maxReconnectDelay_=jH,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!yn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wy.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&uf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(be(s)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Gt,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),E(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Yt(n,"w")){let i=yi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();at(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||BT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=R0)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=UT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),E(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+be(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):dy("Unrecognized action received from server: "+be(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BH&&(this.reconnectDelay_=rc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*UH)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){E(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?He("getToken() completed but was canceled"):(He("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new _y(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{at(g+" ("+this.repoInfo_.toString()+")"),this.interrupt($H)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&at(f),l())}}})}interrupt(n){He("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){He("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ka(this.interruptReasons_)&&(this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>o_(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new te(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){He("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=N0&&(this.reconnectDelay_=R0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){He("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=N0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";yn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+r_.replace(/\./g,"-")]=1,xa()?n["framework.cordova"]=1:Rd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=uf.getInstance().currentlyOnline();return ka(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),z=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var os=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new z(xi,t),i=new z(xi,n);return this.compare(r,i)!==0}minPost(){return z.MIN}};var rf,df=class extends os{static get __EMPTY_NODE(){return rf}static set __EMPTY_NODE(t){rf=t}compare(t,n){return hs(t.name,n.name)}isDefinedOn(t){throw mi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return z.MIN}maxPost(){return new z(Vr,rf)}makePost(t,n){return E(typeof t=="string","KeyIndex indexValue must always be a string."),new z(t,rf)}toString(){return".key"}},Oi=new df;var rs=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Jt=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Mt.EMPTY_NODE,this.right=s??Mt.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Mt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Iy=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Jt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Mt=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Jt.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Jt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new rs(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new rs(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new rs(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new rs(this.root_,null,this.comparator_,!0,t)}};Mt.EMPTY_NODE=new Iy;function HH(e,t){return hs(e.name,t.name)}function l_(e,t){return hs(e,t)}var Cy;function WH(e){Cy=e}var _A=function(e){return typeof e=="number"?"number:"+X0(e):"string:"+e},EA=function(e){if(e.isLeafNode()){let t=e.val();E(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Yt(t,".sv"),"Priority must be a string or number.")}else E(e===Cy||e.isEmpty(),"priority of unexpected type.");E(e===Cy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var O0,ss=(()=>{class e{static set __childrenNodeConstructor(n){O0=n}static get __childrenNodeConstructor(){return O0}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),EA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:H(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=H(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(E(i!==".priority"||jr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ce(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+_A(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=X0(this.value_):n+=this.value_,this.lazyHash_=Q0(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(E(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return E(o>=0,"Unknown leaf type: "+r),E(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),wA,IA;function zH(e){wA=e}function GH(e){IA=e}var by=class extends os{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?hs(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(Vr,new ss("[PRIORITY-POST]",IA))}makePost(t,n){let r=wA(t);return new z(n,new ss("[PRIORITY-POST]",r))}toString(){return".priority"}},pe=new by;var qH=Math.log(2),Dy=class{constructor(t){let n=o=>parseInt(Math.log(o)/qH,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},ff=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new Jt(f,d.node,Jt.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),w=i(h+1,l);return d=e[h],f=n?n(d):d,new Jt(f,d.node,Jt.BLACK,g,w)}},o=function(c){let l=null,u=null,d=e.length,f=function(g,w){let A=d-g,j=d;d-=g;let ke=i(A+1,j),ge=e[A],Xn=n?n(ge):ge;h(new Jt(Xn,ge.node,w,null,ke))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let w=c.nextBitIsOne(),A=Math.pow(2,c.count-(g+1));w?f(A,Jt.BLACK):(f(A,Jt.BLACK),f(A,Jt.RED))}return u},s=new Dy(e.length),a=o(s);return new Mt(r||t,a)};var iy,ns={},as=class e{static get Default(){return E(ns&&pe,"ChildrenNode.ts has not been loaded"),iy=iy||new e({".priority":ns},{".priority":pe}),iy}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=yi(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Mt?n:null}hasIndex(t){return Yt(this.indexSet_,t.toString())}addIndex(t,n){E(t!==Oi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(z.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=ff(r,t.getCompare()):a=ns;let c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;let u=Object.assign({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Pa(this.indexes_,(i,o)=>{let s=yi(this.indexSet_,o);if(E(s,"Missing index implementation for "+o),i===ns)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(z.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),ff(a,s.getCompare())}else return ns;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new z(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Pa(this.indexes_,i=>{if(i===ns)return i;{let o=n.get(t.name);return o?i.remove(new z(t.name,o)):i}});return new e(r,this.indexSet_)}};var ic,V=(()=>{class e{static get EMPTY_NODE(){return ic||(ic=new e(new Mt(l_),null,as.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EA(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ic}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?ic:r}}getChild(n){let r=H(n);return r===null?this:this.getImmediateChild(r).getChild(ce(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(E(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new z(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?ic:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=H(n);if(i===null)return r;{E(H(n)!==".priority"||jr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ce(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(pe,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+_A(this.getPriority().val())+":"),this.forEachChild(pe,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":Q0(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new z(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new z(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new z(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,z.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,z.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===bc?-1:0}withIndex(n){if(n===Oi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Oi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(pe),o=r.getIterator(pe),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Oi?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Ty=class extends V{constructor(){super(new Mt(l_),V.EMPTY_NODE,as.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return V.EMPTY_NODE}isEmpty(){return!1}},bc=new Ty;Object.defineProperties(z,{MIN:{value:new z(xi,V.EMPTY_NODE)},MAX:{value:new z(Vr,bc)}});df.__EMPTY_NODE=V.EMPTY_NODE;ss.__childrenNodeConstructor=V;WH(bc);GH(bc);var KH=!0;function xe(e,t=null){if(e===null)return V.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),E(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new ss(n,xe(t))}if(!(e instanceof Array)&&KH){let n=[],r=!1;if(ct(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=xe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new z(s,c)))}}),n.length===0)return V.EMPTY_NODE;let o=ff(n,HH,s=>s.name,l_);if(r){let s=ff(n,pe.getCompare());return new V(o,xe(t),new as({".priority":s},{".priority":pe}))}else return new V(o,xe(t),as.Default)}else{let n=V.EMPTY_NODE;return ct(e,(r,i)=>{if(Yt(e,r)&&r.substring(0,1)!=="."){let o=xe(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(xe(t))}}zH(xe);var dc=class extends os{constructor(t){super(),this.indexPath_=t,E(!W(t)&&H(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?hs(t.name,n.name):o}makePost(t,n){let r=xe(t),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,i)}maxPost(){let t=V.EMPTY_NODE.updateChild(this.indexPath_,bc);return new z(Vr,t)}toString(){return mA(this.indexPath_,0).join("/")}};var Sy=class extends os{compare(t,n){let r=t.node.compareTo(n.node);return r===0?hs(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(t,n){let r=xe(t);return new z(n,r)}toString(){return".value"}},CA=new Sy;function bA(e){return{type:"value",snapshotNode:e}}function cs(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function fc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function hc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function YH(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var pc=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){E(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(fc(n,a)):E(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(cs(n,r)):s.trackChildChange(hc(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(pe,(i,o)=>{n.hasChild(i)||r.trackChildChange(fc(i,o))}),n.isLeafNode()||n.forEachChild(pe,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(hc(i,o,s))}else r.trackChildChange(cs(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?V.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var hf=class e{constructor(t){this.indexedFilter_=new pc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new z(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);let o=this;return n.forEachChild(pe,(s,a)=>{o.matches(new z(s,a))||(i=i.updateImmediateChild(s,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Ay=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new z(n,r))||(r=V.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=V.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;E(a.numChildren()===this.limit_,"");let c=new z(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(hc(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(fc(n,d));let w=a.updateImmediateChild(n,V.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(cs(f.name,f.node)),w.updateImmediateChild(f.name,f.node)):w}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(fc(l.name,l.node)),o.trackChildChange(cs(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,V.EMPTY_NODE)):t}};var My=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xi}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pe}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function ZH(e){return e.loadsAllData()?new pc(e.getIndex()):e.hasLimit()?new Ay(e):new hf(e)}function QH(e,t,n){let r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function JH(e,t,n){let r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function XH(e,t){let n=e.copy();return n.index_=t,n}function x0(e){let t={};if(e.isDefault())return t;let n;if(e.index_===pe?n="$priority":e.index_===CA?n="$value":e.index_===Oi?n="$key":(E(e.index_ instanceof dc,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=be(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=be(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+be(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=be(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+be(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function k0(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==pe&&(t.i=e.index_.toString()),t}var Ry=class e extends cf{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(E(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Cc("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=x0(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),yi(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=x0(t._queryParams),r=t._path.toString(),i=new Gt;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+_i(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Go(a.responseText)}catch{at("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&at("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Ny=class{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function pf(){return{value:null,children:new Map}}function DA(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=H(t);e.children.has(r)||e.children.set(r,pf());let i=e.children.get(r);t=ce(t),DA(i,t,n)}}function Oy(e,t,n){e.value!==null?n(t,e.value):eW(e,(r,i)=>{let o=new te(t.toString()+"/"+r);Oy(i,o,n)})}function eW(e,t){e.children.forEach((n,r)=>{t(r,n)})}var xy=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&ct(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var P0=10*1e3,tW=30*1e3,nW=5*60*1e3,ky=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xy(t);let r=P0+(tW-P0)*Math.random();sc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;ct(t,(i,o)=>{o>0&&Yt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),sc(this.reportStats_.bind(this),Math.floor(Math.random()*2*nW))}};var Dn=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Dn||{});function TA(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function u_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function d_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Py=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Dn.ACK_USER_WRITE,this.source=TA()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new te(t));return new e(J(),n,this.revert)}}else return E(H(this.path)===t,"operationForChild called for unrelated child."),new e(ce(this.path),this.affectedTree,this.revert)}};var gf=class e{constructor(t,n){this.source=t,this.path=n,this.type=Dn.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,J()):new e(this.source,ce(this.path))}};var ls=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Dn.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,J(),this.snap.getImmediateChild(t)):new e(this.source,ce(this.path),this.snap)}};var mf=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Dn.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new te(t));return n.isEmpty()?null:n.value?new ls(this.source,J(),n.value):new e(this.source,J(),n)}else return E(H(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Tn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=H(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var Fy=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function rW(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(YH(s.childName,s.snapshotNode))}),oc(e,i,"child_removed",t,r,n),oc(e,i,"child_added",t,r,n),oc(e,i,"child_moved",o,r,n),oc(e,i,"child_changed",t,r,n),oc(e,i,"value",t,r,n),i}function oc(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>oW(e,a,c)),s.forEach(a=>{let c=iW(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function iW(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function oW(e,t,n){if(t.childName==null||n.childName==null)throw mi("Should only compare child_ events.");let r=new z(t.childName,t.snapshotNode),i=new z(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Mf(e,t){return{eventCache:e,serverCache:t}}function cc(e,t,n,r){return Mf(new Tn(t,n,r),e.serverCache)}function SA(e,t,n,r){return Mf(e.eventCache,new Tn(t,n,r))}function vf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ki(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var oy,sW=()=>(oy||(oy=new Mt(oH)),oy),lt=class e{static fromObject(t){let n=new e(null);return ct(t,(r,i)=>{n=n.set(new te(r),i)}),n}constructor(t,n=sW()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:J(),value:this.value};if(W(t))return null;{let r=H(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ce(t),n);return o!=null?{path:Me(new te(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=H(t),r=this.children.get(n);return r!==null?r.subtree(ce(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=H(t),o=(this.children.get(r)||new e(null)).set(ce(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=H(t),r=this.children.get(n);if(r){let i=r.remove(ce(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=H(t),r=this.children.get(n);return r?r.get(ce(t)):null}}setTree(t,n){if(W(t))return n;{let r=H(t),o=(this.children.get(r)||new e(null)).setTree(ce(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(J(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Me(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,J(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=H(t),s=this.children.get(o);return s?s.findOnPath_(ce(t),Me(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,J(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=H(t),o=this.children.get(i);return o?o.foreachOnPath_(ce(t),Me(n,i),r):new e(null)}}foreach(t){this.foreach_(J(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Me(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var en=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new lt(null))}};function lc(e,t,n){if(W(t))return new en(new lt(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=qe(i,t);return o=o.updateChild(s,n),new en(e.writeTree_.set(i,o))}else{let i=new lt(n),o=e.writeTree_.setTree(t,i);return new en(o)}}}function F0(e,t,n){let r=e;return ct(n,(i,o)=>{r=lc(r,Me(t,i),o)}),r}function L0(e,t){if(W(t))return en.empty();{let n=e.writeTree_.setTree(t,new lt(null));return new en(n)}}function Ly(e,t){return Pi(e,t)!=null}function Pi(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(qe(n.path,t)):null}function V0(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pe,(r,i)=>{t.push(new z(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new z(r,i.value))}),t}function Fr(e,t){if(W(t))return e;{let n=Pi(e,t);return n!=null?new en(new lt(n)):new en(e.writeTree_.subtree(t))}}function Vy(e){return e.writeTree_.isEmpty()}function us(e,t){return AA(J(),e.writeTree_,t)}function AA(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(E(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=AA(Me(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Me(e,".priority"),r)),n}}function Rf(e,t){return OA(t,e)}function aW(e,t,n,r,i){E(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=lc(e.visibleWrites,t,n)),e.lastWriteId=r}function cW(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function lW(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);E(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&uW(a,r.path)?i=!1:Xt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return dW(e),!0;if(r.snap)e.visibleWrites=L0(e.visibleWrites,r.path);else{let a=r.children;ct(a,c=>{e.visibleWrites=L0(e.visibleWrites,Me(r.path,c))})}return!0}else return!1}function uW(e,t){if(e.snap)return Xt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Xt(Me(e.path,n),t))return!0;return!1}function dW(e){e.visibleWrites=MA(e.allWrites,fW,J()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function fW(e){return e.visible}function MA(e,t,n){let r=en.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Xt(n,s)?(a=qe(n,s),r=lc(r,a,o.snap)):Xt(s,n)&&(a=qe(s,n),r=lc(r,J(),o.snap.getChild(a)));else if(o.children){if(Xt(n,s))a=qe(n,s),r=F0(r,a,o.children);else if(Xt(s,n))if(a=qe(s,n),W(a))r=F0(r,J(),o.children);else{let c=yi(o.children,H(a));if(c){let l=c.getChild(ce(a));r=lc(r,J(),l)}}}else throw mi("WriteRecord should have .snap or .children")}}return r}function RA(e,t,n,r,i){if(!r&&!i){let o=Pi(e.visibleWrites,t);if(o!=null)return o;{let s=Fr(e.visibleWrites,t);if(Vy(s))return n;if(n==null&&!Ly(s,J()))return null;{let a=n||V.EMPTY_NODE;return us(s,a)}}}else{let o=Fr(e.visibleWrites,t);if(!i&&Vy(o))return n;if(!i&&n==null&&!Ly(o,J()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Xt(l.path,t)||Xt(t,l.path))},a=MA(e.allWrites,s,t),c=n||V.EMPTY_NODE;return us(a,c)}}}function hW(e,t,n){let r=V.EMPTY_NODE,i=Pi(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(pe,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Fr(e.visibleWrites,t);return n.forEachChild(pe,(s,a)=>{let c=us(Fr(o,new te(s)),a);r=r.updateImmediateChild(s,c)}),V0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Fr(e.visibleWrites,t);return V0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function pW(e,t,n,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Me(t,n);if(Ly(e.visibleWrites,o))return null;{let s=Fr(e.visibleWrites,o);return Vy(s)?i.getChild(n):us(s,i.getChild(n))}}function gW(e,t,n,r){let i=Me(t,n),o=Pi(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Fr(e.visibleWrites,i);return us(s,r.getNode().getImmediateChild(n))}else return null}function mW(e,t){return Pi(e.visibleWrites,t)}function vW(e,t,n,r,i,o,s){let a,c=Fr(e.visibleWrites,t),l=Pi(c,J());if(l!=null)a=l;else if(n!=null)a=us(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function yW(){return{visibleWrites:en.empty(),allWrites:[],lastWriteId:-1}}function yf(e,t,n,r){return RA(e.writeTree,e.treePath,t,n,r)}function f_(e,t){return hW(e.writeTree,e.treePath,t)}function j0(e,t,n,r){return pW(e.writeTree,e.treePath,t,n,r)}function _f(e,t){return mW(e.writeTree,Me(e.treePath,t))}function _W(e,t,n,r,i,o){return vW(e.writeTree,e.treePath,t,n,r,i,o)}function h_(e,t,n){return gW(e.writeTree,e.treePath,t,n)}function NA(e,t){return OA(Me(e.treePath,t),e.writeTree)}function OA(e,t){return{treePath:e,writeTree:t}}var jy=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;E(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),E(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,hc(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,fc(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,cs(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,hc(r,t.snapshotNode,i.oldSnap));else throw mi("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var Uy=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},xA=new Uy,gc=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new Tn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return h_(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ki(this.viewCache_),o=_W(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function EW(e){return{filter:e}}function wW(e,t){E(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),E(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function IW(e,t,n,r,i){let o=new jy,s,a;if(n.type===Dn.OVERWRITE){let l=n;l.source.fromUser?s=By(e,t,l.path,l.snap,r,i,o):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=Ef(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Dn.MERGE){let l=n;l.source.fromUser?s=bW(e,t,l.path,l.children,r,i,o):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=$y(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Dn.ACK_USER_WRITE){let l=n;l.revert?s=SW(e,t,l.path,r,i,o):s=DW(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===Dn.LISTEN_COMPLETE)s=TW(e,t,n.path,r,o);else throw mi("Unknown operation type: "+n.type);let c=o.getChanges();return CW(t,s,c),{viewCache:s,changes:c}}function CW(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=vf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(bA(vf(t)))}}function kA(e,t,n,r,i,o){let s=t.eventCache;if(_f(r,n)!=null)return t;{let a,c;if(W(n))if(E(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=ki(t),u=l instanceof V?l:V.EMPTY_NODE,d=f_(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=yf(r,ki(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=H(n);if(l===".priority"){E(jr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=j0(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=ce(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=j0(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=h_(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return cc(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function Ef(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=H(n);if(!c.isCompleteForPath(n)&&jr(n)>1)return t;let g=ce(n),A=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),A):l=u.updateChild(c.getNode(),h,A,g,xA,null)}let d=SA(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),f=new gc(i,d,o);return kA(e,d,n,i,f,a)}function By(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new gc(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=cc(t,l,!0,e.filter.filtersNodes());else{let d=H(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=cc(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=ce(n),h=a.getNode().getImmediateChild(d),g;if(W(f))g=r;else{let w=u.getCompleteChild(d);w!=null?gA(f)===".priority"&&w.getChild(vA(f)).isEmpty()?g=w:g=w.updateChild(f,r):g=V.EMPTY_NODE}if(h.equals(g))c=t;else{let w=e.filter.updateChild(a.getNode(),d,g,f,u,s);c=cc(t,w,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function U0(e,t){return e.eventCache.isCompleteForChild(t)}function bW(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=Me(n,c);U0(t,H(u))&&(a=By(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Me(n,c);U0(t,H(u))||(a=By(e,a,u,l,i,o,s))}),a}function B0(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function $y(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new lt(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),g=B0(e,h,f);c=Ef(e,c,new te(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=t.serverCache.getNode().getImmediateChild(d),w=B0(e,g,f);c=Ef(e,c,new te(d),w,i,o,s,a)}}),c}function DW(e,t,n,r,i,o,s){if(_f(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ef(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new lt(null);return c.getNode().forEachChild(Oi,(u,d)=>{l=l.set(new te(u),d)}),$y(e,t,n,l,i,o,a,s)}else return t}else{let l=new lt(null);return r.foreach((u,d)=>{let f=Me(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),$y(e,t,n,l,i,o,a,s)}}function TW(e,t,n,r,i){let o=t.serverCache,s=SA(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return kA(e,s,n,r,xA,i)}function SW(e,t,n,r,i,o){let s;if(_f(r,n)!=null)return t;{let a=new gc(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||H(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=yf(r,ki(t));else{let d=t.serverCache.getNode();E(d instanceof V,"serverChildren would be complete if leaf node"),u=f_(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=H(n),d=h_(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,ce(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,V.EMPTY_NODE,ce(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=yf(r,ki(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||_f(r,J())!=null,cc(t,l,s,e.filter.filtersNodes())}}var Hy=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new pc(r.getIndex()),o=ZH(r);this.processor_=EW(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(V.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(V.EMPTY_NODE,a.getNode(),null),u=new Tn(c,s.isFullyInitialized(),i.filtersNodes()),d=new Tn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Mf(d,u),this.eventGenerator_=new Fy(this.query_)}get query(){return this.query_}};function AW(e){return e.viewCache_.serverCache.getNode()}function MW(e){return vf(e.viewCache_)}function RW(e,t){let n=ki(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild(H(t)).isEmpty())?n.getChild(t):null}function $0(e){return e.eventRegistrations_.length===0}function NW(e,t){e.eventRegistrations_.push(t)}function H0(e,t,n){let r=[];if(n){E(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function W0(e,t,n,r){t.type===Dn.MERGE&&t.source.queryId!==null&&(E(ki(e.viewCache_),"We should always have a full cache before handling merges"),E(vf(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=IW(e.processor_,i,t,n,r);return wW(e.processor_,o.viewCache),E(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,PA(e,o.changes,o.viewCache.eventCache.getNode(),null)}function OW(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pe,(o,s)=>{r.push(cs(o,s))}),n.isFullyInitialized()&&r.push(bA(n.getNode())),PA(e,r,n.getNode(),t)}function PA(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return rW(e.eventGenerator_,t,n,i)}var wf,If=class{constructor(){this.views=new Map}};function xW(e){E(!wf,"__referenceConstructor has already been defined"),wf=e}function kW(){return E(wf,"Reference.ts has not been loaded"),wf}function PW(e){return e.views.size===0}function p_(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return E(o!=null,"SyncTree gave us an op for an invalid query."),W0(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(W0(s,t,n,r));return o}}function FA(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=yf(n,i?r:null),c=!1;a?c=!0:r instanceof V?(a=f_(n,r),c=!1):(a=V.EMPTY_NODE,c=!1);let l=Mf(new Tn(a,c,!1),new Tn(r,i,!1));return new Hy(t,l)}return s}function FW(e,t,n,r,i,o){let s=FA(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),NW(s,n),OW(s,n)}function LW(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Ur(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(H0(l,n,r)),$0(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(H0(c,n,r)),$0(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Ur(e)&&o.push(new(kW())(t._repo,t._path)),{removed:o,events:s}}function LA(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Lr(e,t){let n=null;for(let r of e.views.values())n=n||RW(r,t);return n}function VA(e,t){if(t._queryParams.loadsAllData())return Nf(e);{let r=t._queryIdentifier;return e.views.get(r)}}function jA(e,t){return VA(e,t)!=null}function Ur(e){return Nf(e)!=null}function Nf(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Cf;function VW(e){E(!Cf,"__referenceConstructor has already been defined"),Cf=e}function jW(){return E(Cf,"Reference.ts has not been loaded"),Cf}var UW=1,bf=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new lt(null),this.pendingWriteTree_=yW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function UA(e,t,n,r,i){return aW(e.pendingWriteTree_,t,n,r,i),i?Tc(e,new ls(TA(),t,n)):[]}function Ri(e,t,n=!1){let r=cW(e.pendingWriteTree_,t);if(lW(e.pendingWriteTree_,t)){let o=new lt(null);return r.snap!=null?o=o.set(J(),!0):ct(r.children,s=>{o=o.set(new te(s),!0)}),Tc(e,new Py(r.path,o,n))}else return[]}function Dc(e,t,n){return Tc(e,new ls(u_(),t,n))}function BW(e,t,n){let r=lt.fromObject(n);return Tc(e,new mf(u_(),t,r))}function $W(e,t){return Tc(e,new gf(u_(),t))}function HW(e,t,n){let r=m_(e,n);if(r){let i=v_(r),o=i.path,s=i.queryId,a=qe(o,t),c=new gf(d_(s),a);return y_(e,o,c)}else return[]}function Df(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||jA(s,t))){let c=LW(s,t,n,r);PW(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Ur(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=GW(f);for(let g=0;g<h.length;++g){let w=h[g],A=w.query,j=WA(e,w);e.listenProvider_.startListening(uc(A),mc(e,A),j.hashFn,j.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(uc(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(Of(f));e.listenProvider_.stopListening(uc(f),h)}))}qW(e,l)}return a}function BA(e,t,n,r){let i=m_(e,r);if(i!=null){let o=v_(i),s=o.path,a=o.queryId,c=qe(s,t),l=new ls(d_(a),c,n);return y_(e,s,l)}else return[]}function WW(e,t,n,r){let i=m_(e,r);if(i){let o=v_(i),s=o.path,a=o.queryId,c=qe(s,t),l=lt.fromObject(n),u=new mf(d_(a),c,l);return y_(e,s,u)}else return[]}function Wy(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=qe(f,i);o=o||Lr(h,g),s=s||Ur(h)});let a=e.syncPointTree_.get(i);a?(s=s||Ur(a),o=o||Lr(a,J())):(a=new If,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=V.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,g)=>{let w=Lr(g,J());w&&(o=o.updateImmediateChild(h,w))}));let l=jA(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=Of(t);E(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=KW();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=Rf(e.pendingWriteTree_,i),d=FW(a,t,n,u,o,c);if(!l&&!s&&!r){let f=VA(a,t);d=d.concat(YW(e,t,f))}return d}function g_(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=qe(s,t),l=Lr(a,c);if(l)return l});return RA(i,t,o,n,!0)}function zW(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=qe(l,n);r=r||Lr(u,d)});let i=e.syncPointTree_.get(n);i?r=r||Lr(i,J()):(i=new If,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new Tn(r,!0,!1):null,a=Rf(e.pendingWriteTree_,t._path),c=FA(i,t,a,o?s.getNode():V.EMPTY_NODE,o);return MW(c)}function Tc(e,t){return $A(t,e.syncPointTree_,null,Rf(e.pendingWriteTree_,J()))}function $A(e,t,n,r){if(W(e.path))return HA(e,t,n,r);{let i=t.get(J());n==null&&i!=null&&(n=Lr(i,J()));let o=[],s=H(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=NA(r,s);o=o.concat($A(a,c,l,u))}return i&&(o=o.concat(p_(i,e,r,n))),o}}function HA(e,t,n,r){let i=t.get(J());n==null&&i!=null&&(n=Lr(i,J()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=NA(r,s),u=e.operationForChild(s);u&&(o=o.concat(HA(u,a,c,l)))}),i&&(o=o.concat(p_(i,e,r,n))),o}function WA(e,t){let n=t.query,r=mc(e,n);return{hashFn:()=>(AW(t)||V.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?HW(e,n._path,r):$W(e,n._path);{let o=cH(i,n);return Df(e,n,null,o)}}}}function mc(e,t){let n=Of(t);return e.queryToTagMap.get(n)}function Of(e){return e._path.toString()+"$"+e._queryIdentifier}function m_(e,t){return e.tagToQueryMap.get(t)}function v_(e){let t=e.indexOf("$");return E(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new te(e.substr(0,t))}}function y_(e,t,n){let r=e.syncPointTree_.get(t);E(r,"Missing sync point for query tag that we're tracking");let i=Rf(e.pendingWriteTree_,t);return p_(r,n,i,null)}function GW(e){return e.fold((t,n,r)=>{if(n&&Ur(n))return[Nf(n)];{let i=[];return n&&(i=LA(n)),ct(r,(o,s)=>{i=i.concat(s)}),i}})}function uc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(jW())(e._repo,e._path):e}function qW(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Of(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function KW(){return UW++}function YW(e,t,n){let r=t._path,i=mc(e,t),o=WA(e,n),s=e.listenProvider_.startListening(uc(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)E(!Ur(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&Ur(u))return[Nf(u).query];{let f=[];return u&&(f=f.concat(LA(u).map(h=>h.query))),ct(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(uc(u),mc(e,u))}}return s}var zy=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Gy=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Me(this.path_,t);return new e(this.syncTree_,n)}node(){return g_(this.syncTree_,this.path_)}},ZW=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},z0=function(e,t,n){if(!e||typeof e!="object")return e;if(E(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return QW(e[".sv"],t,n);if(typeof e[".sv"]=="object")return JW(e[".sv"],t);E(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},QW=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:E(!1,"Unexpected server value: "+e)}},JW=function(e,t,n){e.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&E(!1,"Unexpected increment value: "+r);let i=t.node();if(E(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},XW=function(e,t,n,r){return __(t,new Gy(n,e),r)},zA=function(e,t,n){return __(e,new zy(t),n)};function __(e,t,n){let r=e.getPriority().val(),i=z0(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=z0(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new ss(a,xe(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new ss(i))),s.forEachChild(pe,(a,c)=>{let l=__(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var vc=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function E_(e,t){let n=t instanceof te?t:new te(t),r=e,i=H(n);for(;i!==null;){let o=yi(r.node.children,i)||{children:{},childCount:0};r=new vc(i,r,o),n=ce(n),i=H(n)}return r}function gs(e){return e.node.value}function GA(e,t){e.node.value=t,qy(e)}function qA(e){return e.node.childCount>0}function e3(e){return gs(e)===void 0&&!qA(e)}function xf(e,t){ct(e.node.children,(n,r)=>{t(new vc(n,e,r))})}function KA(e,t,n,r){n&&!r&&t(e),xf(e,i=>{KA(i,t,!0,r)}),n&&r&&t(e)}function t3(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Sc(e){return new te(e.parent===null?e.name:Sc(e.parent)+"/"+e.name)}function qy(e){e.parent!==null&&n3(e.parent,e.name,e)}function n3(e,t,n){let r=e3(n),i=Yt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,qy(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,qy(e))}var r3=/[\[\].#$\/\u0000-\u001F\u007F]/,i3=/[\[\].#$\u0000-\u001F\u007F]/,sy=10*1024*1024,w_=function(e){return typeof e=="string"&&e.length!==0&&!r3.test(e)},YA=function(e){return typeof e=="string"&&e.length!==0&&!i3.test(e)},o3=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),YA(e)},G0=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!i_(e)||e&&typeof e=="object"&&Yt(e,".sv")},kf=function(e,t,n,r){r&&t===void 0||I_(Fa(e,"value"),t,n)},I_=function(e,t,n){let r=n instanceof te?new Ey(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Ai(r));if(typeof t=="function")throw new Error(e+"contains a function "+Ai(r)+" with contents = "+t.toString());if(i_(t))throw new Error(e+"contains "+t.toString()+" "+Ai(r));if(typeof t=="string"&&t.length>sy/3&&La(t)>sy)throw new Error(e+"contains a string greater than "+sy+" utf8 bytes "+Ai(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(ct(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!w_(s)))throw new Error(e+" contains an invalid key ("+s+") "+Ai(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);LH(r,s),I_(e,a,r),VH(r)}),i&&o)throw new Error(e+' contains ".value" child '+Ai(r)+" in addition to actual children.")}};var s3=function(e,t,n,r){if(!(r&&n===void 0)&&!w_(n))throw new Error(Fa(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},C_=function(e,t,n,r){if(!(r&&n===void 0)&&!YA(n))throw new Error(Fa(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},a3=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),C_(e,t,n,r)},ZA=function(e,t){if(H(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},c3=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!w_(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!o3(n))throw new Error(Fa(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ky=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function b_(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!a_(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function QA(e,t,n){b_(e,n),JA(e,r=>a_(r,t))}function Sn(e,t,n){b_(e,n),JA(e,r=>Xt(r,t)||Xt(t,r))}function JA(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(l3(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function l3(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Ni&&He("event: "+n.toString()),ps(r)}}}var u3="repo_interrupt",d3=25,Yy=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ky,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pf(),this.transactionQueueTree_=new vc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function f3(e,t,n){if(e.stats_=s_(e.repoInfo_),e.forceRestClient_||fH())e.server_=new Ry(e.repoInfo_,(r,i,o,s)=>{q0(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>K0(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new c_(e.repoInfo_,t,(r,i,o,s)=>{q0(e,r,i,o,s)},r=>{K0(e,r)},r=>{p3(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=pH(e.repoInfo_,()=>new ky(e.stats_,e.server_)),e.infoData_=new Ny,e.infoSyncTree_=new bf({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=Dc(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),T_(e,"connected",!1),e.serverSyncTree_=new bf({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Sn(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function h3(e){let n=e.infoData_.getNode(new te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function D_(e){return ZW({timestamp:h3(e)})}function q0(e,t,n,r,i){e.dataUpdateCount++;let o=new te(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Pa(n,l=>xe(l));s=WW(e.serverSyncTree_,o,c,i)}else{let c=xe(n);s=BA(e.serverSyncTree_,o,c,i)}else if(r){let c=Pa(n,l=>xe(l));s=BW(e.serverSyncTree_,o,c)}else{let c=xe(n);s=Dc(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Ff(e,o)),Sn(e.eventQueue_,a,s)}function K0(e,t){T_(e,"connected",t),t===!1&&v3(e)}function p3(e,t){ct(t,(n,r)=>{T_(e,n,r)})}function T_(e,t,n){let r=new te("/.info/"+t),i=xe(n);e.infoData_.updateSnapshot(r,i);let o=Dc(e.infoSyncTree_,r,i);Sn(e.eventQueue_,r,o)}function XA(e){return e.nextWriteId_++}function g3(e,t,n){let r=zW(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=xe(i).withIndex(t._queryParams.getIndex());Wy(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=Dc(e.serverSyncTree_,t._path,o);else{let a=mc(e.serverSyncTree_,t);s=BA(e.serverSyncTree_,t._path,o,a)}return Sn(e.eventQueue_,t._path,s),Df(e.serverSyncTree_,t,n,null,!0),o},i=>(Pf(e,"get for query "+be(t)+" failed: "+i),Promise.reject(new Error(i))))}function m3(e,t,n,r,i){Pf(e,"set",{path:t.toString(),value:n,priority:r});let o=D_(e),s=xe(n,r),a=g_(e.serverSyncTree_,t),c=zA(s,a,o),l=XA(e),u=UA(e.serverSyncTree_,t,c,l,!0);b_(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||at("set at "+t+" failed: "+f);let w=Ri(e.serverSyncTree_,l,!g);Sn(e.eventQueue_,t,w),E3(e,i,f,h)});let d=iM(e,t);Ff(e,d),Sn(e.eventQueue_,d,[])}function v3(e){Pf(e,"onDisconnectEvents");let t=D_(e),n=pf();Oy(e.onDisconnect_,J(),(i,o)=>{let s=XW(i,o,e.serverSyncTree_,t);DA(n,i,s)});let r=[];Oy(n,J(),(i,o)=>{r=r.concat(Dc(e.serverSyncTree_,i,o));let s=iM(e,i);Ff(e,s)}),e.onDisconnect_=pf(),Sn(e.eventQueue_,J(),r)}function y3(e,t,n){let r;H(t._path)===".info"?r=Wy(e.infoSyncTree_,t,n):r=Wy(e.serverSyncTree_,t,n),QA(e.eventQueue_,t._path,r)}function Zy(e,t,n){let r;H(t._path)===".info"?r=Df(e.infoSyncTree_,t,n):r=Df(e.serverSyncTree_,t,n),QA(e.eventQueue_,t._path,r)}function _3(e){e.persistentConnection_&&e.persistentConnection_.interrupt(u3)}function Pf(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),He(n,...t)}function E3(e,t,n,r){t&&ps(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function eM(e,t,n){return g_(e.serverSyncTree_,t,n)||V.EMPTY_NODE}function S_(e,t=e.transactionQueueTree_){if(t||Lf(e,t),gs(t)){let n=nM(e,t);E(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&w3(e,Sc(t),n)}else qA(t)&&xf(t,n=>{S_(e,n)})}function w3(e,t,n){let r=n.map(l=>l.currentWriteId),i=eM(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];E(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=qe(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{Pf(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Ri(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Lf(e,E_(e.transactionQueueTree_,t)),S_(e,e.transactionQueueTree_),Sn(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)ps(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{at("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Ff(e,t)}},s)}function Ff(e,t){let n=tM(e,t),r=Sc(n),i=nM(e,n);return I3(e,i,r),r}function I3(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=qe(n,c.path),u=!1,d;if(E(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Ri(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=d3)u=!0,d="maxretry",i=i.concat(Ri(e.serverSyncTree_,c.currentWriteId,!0));else{let f=eM(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){I_("transaction failed: Data returned ",h,c.path);let g=xe(h);typeof h=="object"&&h!=null&&Yt(h,".priority")||(g=g.updatePriority(f.getPriority()));let A=c.currentWriteId,j=D_(e),ke=zA(g,f,j);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=ke,c.currentWriteId=XA(e),s.splice(s.indexOf(A),1),i=i.concat(UA(e.serverSyncTree_,c.path,ke,c.currentWriteId,c.applyLocally)),i=i.concat(Ri(e.serverSyncTree_,A,!0))}else u=!0,d="nodata",i=i.concat(Ri(e.serverSyncTree_,c.currentWriteId,!0))}Sn(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}Lf(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)ps(r[a]);S_(e,e.transactionQueueTree_)}function tM(e,t){let n,r=e.transactionQueueTree_;for(n=H(t);n!==null&&gs(r)===void 0;)r=E_(r,n),t=ce(t),n=H(t);return r}function nM(e,t){let n=[];return rM(e,t,n),n.sort((r,i)=>r.order-i.order),n}function rM(e,t,n){let r=gs(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xf(t,i=>{rM(e,i,n)})}function Lf(e,t){let n=gs(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,GA(t,n.length>0?n:void 0)}xf(t,r=>{Lf(e,r)})}function iM(e,t){let n=Sc(tM(e,t)),r=E_(e.transactionQueueTree_,t);return t3(r,i=>{ay(e,i)}),ay(e,r),KA(r,i=>{ay(e,i)}),n}function ay(e,t){let n=gs(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(E(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(E(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Ri(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?GA(t,void 0):n.length=o+1,Sn(e.eventQueue_,Sc(t),i);for(let s=0;s<r.length;s++)ps(r[s])}}function C3(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function b3(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):at(`Invalid query segment '${n}' in query '${e}'`)}return t}var Y0=function(e,t){let n=D3(e),r=n.namespace;n.domain==="firebase.com"&&Qn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||rH();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new sf(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new te(n.pathString)}},D3=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=C3(e.substring(u,d)));let f=b3(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=t.indexOf(".");r=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Tf=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+be(this.snapshot.exportVal())}},Sf=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var yc=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var ds=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:gA(this._path)}get ref(){return new An(this._repo,this._path)}get _queryIdentifier(){let t=k0(this._queryParams),n=o_(t);return n==="{}"?"default":n}get _queryObject(){return k0(this._queryParams)}isEqual(t){if(t=Ue(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=a_(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+FH(this._path)}};function T3(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function A_(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Oi){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==xi)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Vr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===pe){if(t!=null&&!G0(t)||n!=null&&!G0(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(E(e.getIndex()instanceof dc||e.getIndex()===CA,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function oM(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var An=class e extends ds{constructor(t,n){super(t,n,new My,!1)}get parent(){let t=vA(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},_c=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new te(t),r=Ec(this.ref,t);return new e(this._node.getChild(n),r,pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,Ec(this.ref,r),pe)))}hasChild(t){let n=new te(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function sM(e,t){return e=Ue(e),e._checkNotDeleted("ref"),t!==void 0?Ec(e._root,t):e._root}function Ec(e,t){return e=Ue(e),H(e._path)===null?a3("child","path",t,!1):C_("child","path",t,!1),new An(e._repo,Me(e._path,t))}function aM(e){return ZA("remove",e._path),M_(e,null)}function M_(e,t){e=Ue(e),ZA("set",e._path),kf("set",t,e._path,!1);let n=new Gt;return m3(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function cM(e){e=Ue(e);let t=new yc(()=>{}),n=new wc(t);return g3(e._repo,e,n).then(r=>new _c(r,new An(e._repo,e._path),e._queryParams.getIndex()))}var wc=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new Tf("value",this,new _c(t.snapshotNode,new An(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Sf(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Af=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Sf(this,t,n):null}createEvent(t,n){E(t.childName!=null,"Child events should have a childName.");let r=Ec(new An(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new Tf(t.type,this,new _c(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function S3(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{Zy(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new yc(n,o||void 0),a=t==="value"?new wc(s):new Af(t,s);return y3(e._repo,e,a),()=>Zy(e._repo,e,a)}function lM(e,t,n,r){return S3(e,"value",t,n,r)}function uM(e,t,n){let r=null,i=n?new yc(n):null;t==="value"?r=new wc(i):t&&(r=new Af(t,i)),Zy(e._repo,e,r)}var fs=class{},Qy=class extends fs{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){kf("endAt",this._value,t._path,!0);let n=JH(t._queryParams,this._value,this._key);if(oM(n),A_(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ds(t._repo,t._path,n,t._orderByCalled)}};var Jy=class extends fs{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){kf("startAt",this._value,t._path,!0);let n=QH(t._queryParams,this._value,this._key);if(oM(n),A_(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ds(t._repo,t._path,n,t._orderByCalled)}};var Xy=class extends fs{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){T3(t,"orderByChild");let n=new te(this._path);if(W(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new dc(n),i=XH(t._queryParams,r);return A_(i),new ds(t._repo,t._path,i,!0)}};function dM(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return C_("orderByChild","path",e,!1),new Xy(e)}var e_=class extends fs{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(kf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qy(this._value,this._key)._apply(new Jy(this._value,this._key)._apply(t))}};function fM(e,t){return s3("equalTo","key",t,!0),new e_(e,t)}function hM(e,...t){let n=Ue(e);for(let r of t)n=r._apply(n);return n}xW(An);VW(An);var A3="FIREBASE_DATABASE_EMULATOR_HOST",t_={},M3=!1;function R3(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=vi(o);e.repoInfo_=new sf(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function N3(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Qn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),He("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=Y0(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[A3]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=Y0(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new ac(ac.OWNER):new hy(e.name,e.options,t);c3("Invalid Firebase Database URL",s),W(s.path)||Qn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=x3(a,e,u,new fy(e,n));return new n_(d,e)}function O3(e,t){let n=t_[t];(!n||n[e.key]!==e)&&Qn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),_3(e),delete n[e.key]}function x3(e,t,n,r){let i=t_[t.name];i||(i={},t_[t.name]=i);let o=i[e.toURLString()];return o&&Qn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Yy(e,M3,n,r),i[e.toURLString()]=o,o}var n_=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(f3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0,Ko("Database",this._repo.repoInfo_.emulatorOptions!==null)),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new An(this._repo,J())),this._rootInternal}_delete(){return this._rootInternal!==null&&(O3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Qn("Cannot call "+t+" on a deleted database.")}};function pM(e=wi(),t){let n=Qo(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=xT("database");r&&gM(n,...r)}return n}function gM(e,t,n,r={}){e=Ue(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&_n(r,o.repoInfo_.emulatorOptions))return;Qn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Qn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ac(ac.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:kT(r.mockUserToken,e.app.options.projectId);s=new ac(a)}vi(t)&&(Md(t),Ko("Database",!0)),R3(o,i,r,s)}function k3(e){eH(Sr),Zt(new Ge("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return N3(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),ye(v0,y0,e),ye(v0,y0,"esm2017")}c_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};c_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};k3();var vt=class{constructor(t){return t}},mM="database",R_=class{constructor(){return Xo(mM)}};var N_=new C("angularfire2.database-instances");function P3(e,t){let n=Ba(mM,e,t);return n&&new vt(n)}function F3(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new vt(r)}}var L3={provide:R_,deps:[[new Xe,N_]]},V3={provide:vt,useFactory:P3,deps:[[new Xe,N_],Gn]};function vM(e,...t){return ye("angularfire",Ar.full,"rtdb"),et([V3,L3,{provide:N_,useFactory:F3(e),multi:!0,deps:[Q,ve,Mr,Ci,[new Xe,Xa],[new Xe,es],...t]}])}var yM=Oe(fM,!0,2);var Jn=Oe(cM,!0),_M=Oe(pM,!0);var ms=Oe(uM,!0);var vs=Oe(lM,!0),EM=Oe(dM,!0,2);var wM=Oe(hM,!0,2),We=Oe(sM,!0,2);var IM=Oe(aM,!0,2);var Ac=Oe(M_,!0,2);function j3(e,t){if(e&1&&(v(0,"div",21),D(1),y()),e&2){let n=le();I(),ae(n.error)}}var jf=class e{constructor(t,n,r){this.authService=t;this.router=n;this.db=r}fullname="";username="";email="";password="";error="";onRegister(){return p(this,null,function*(){if(!this.fullname||!this.username||!this.email||!this.password){this.error="Completa todos los campos";return}try{let t=We(this.db,"usernames/"+this.username);if((yield Jn(t)).exists()){this.error="El nombre de usuario ya est\xE1 en uso";return}let i=(yield this.authService.register(this.email,this.password)).user.uid,o=new Date().toISOString(),s={id:i,nombre:this.fullname,username:this.username,email:this.email,fotoPerfil:"",fechaRegistro:o,seguidores:0,seguidos:0,recetas:0,recetasFavoritas:[]};yield Ac(We(this.db,"usuarios/"+i),s),yield Ac(We(this.db,"usernames/"+this.username),i),this.router.navigate(["/login"])}catch(t){this.error=t.message}})}static \u0275fac=function(n){return new(n||e)(T(bn),T(Ce),T(vt))};static \u0275cmp=Be({type:e,selectors:[["app-register"]],decls:35,vars:5,consts:[[1,"auth-container"],[1,"auth-card","fade-in-up"],[1,"text-center","mb-4"],[1,"app-title"],[1,"form-title"],[1,"subtitle"],[3,"ngSubmit"],[1,"mb-3"],["for","fullname",1,"form-label"],["type","text","id","fullname","name","fullname","required","","autocomplete","name",1,"form-control",3,"ngModelChange","ngModel"],["for","username",1,"form-label"],["type","text","id","username","name","username","required","","autocomplete","username",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","autocomplete","email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-morado","w-100"],[1,"bi","bi-person-plus"],[1,"text-center","mt-3"],["routerLink","/login",1,"link-morado"],[1,"alert","alert-danger"]],template:function(n,r){n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),D(4,"CookShare"),y(),v(5,"h2",4),D(6,"Crear cuenta"),y(),v(7,"p",5),D(8,"\xA1\xDAnete y comparte tus mejores recetas!"),y()(),v(9,"form",6),fe("ngSubmit",function(){return r.onRegister()}),v(10,"div",7)(11,"label",8),D(12,"Nombre completo"),y(),v(13,"input",9),Dt("ngModelChange",function(o){return jt(r.fullname,o)||(r.fullname=o),o}),y()(),v(14,"div",7)(15,"label",10),D(16,"Usuario"),y(),v(17,"input",11),Dt("ngModelChange",function(o){return jt(r.username,o)||(r.username=o),o}),y()(),v(18,"div",7)(19,"label",12),D(20,"Correo electr\xF3nico"),y(),v(21,"input",13),Dt("ngModelChange",function(o){return jt(r.email,o)||(r.email=o),o}),y()(),v(22,"div",7)(23,"label",14),D(24,"Contrase\xF1a"),y(),v(25,"input",15),Dt("ngModelChange",function(o){return jt(r.password,o)||(r.password=o),o}),y()(),de(26,j3,2,1,"div",16),v(27,"button",17),oe(28,"i",18),D(29," Registrarse "),y()(),v(30,"div",19)(31,"span"),D(32,"\xBFYa tienes cuenta?"),y(),v(33,"a",20),D(34,"Inicia sesi\xF3n"),y()()()()),n&2&&(I(13),bt("ngModel",r.fullname),I(4),bt("ngModel",r.username),I(4),bt("ngModel",r.email),I(4),bt("ngModel",r.password),I(),R("ngIf",r.error))},dependencies:[rt,Ht,Dr,Td,br,Wo,bd,Ra,gi,Ma,zt,At],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#a259c6,#6d28d9)}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 6px 32px #6c008026;padding:2.5rem 2rem;width:100%;max-width:400px}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#a259c6}.app-title[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;font-weight:700;color:#6d28d9;margin-bottom:.5rem}.form-title[_ngcontent-%COMP%]{color:#a259c6;margin-bottom:.25rem}.subtitle[_ngcontent-%COMP%]{color:#6d28d9;font-size:1rem;margin-bottom:1.5rem}.btn-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;border:none;font-weight:600;transition:background .2s}.btn-morado[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#6d28d9,#a259c6);color:#fff}.link-morado[_ngcontent-%COMP%]{color:#a259c6;font-weight:500;text-decoration:none}.link-morado[_ngcontent-%COMP%]:hover{color:#6d28d9;text-decoration:underline}.fade-in-up[_ngcontent-%COMP%]{opacity:0;transform:translateY(40px);animation:_ngcontent-%COMP%_fadeInUp .7s cubic-bezier(.23,1,.32,1) forwards}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}}"]})};var U3=()=>["/main"],B3=()=>["/feed"],$3=e=>["/perfil",e],Br=class e{constructor(t,n){this.authService=t;this.router=n}tipoSeleccionado=new Ee;logout(){return p(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/login"])})}static \u0275fac=function(n){return new(n||e)(T(bn),T(Ce))};static \u0275cmp=Be({type:e,selectors:[["app-navbar"]],outputs:{tipoSeleccionado:"tipoSeleccionado"},decls:15,vars:7,consts:[[1,"navbar","navbar-expand-lg","shadow-sm","custom-navbar"],[1,"container"],[1,"navbar-brand","fw-bold","text-white",3,"routerLink"],[1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav","align-items-center"],[1,"nav-item"],[1,"nav-link","custom-link",3,"routerLink"],[1,"btn","btn-morado","ms-2",3,"click"]],template:function(n,r){n&1&&(v(0,"nav",0)(1,"div",1)(2,"a",2),D(3,"CookShare"),y(),v(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),D(8,"Explorar"),y()(),v(9,"li",5)(10,"a",6),D(11,"Perfil"),y()(),v(12,"li",5)(13,"button",7),fe("click",function(){return r.logout()}),D(14,"Cerrar sesi\xF3n"),y()()()()()()),n&2&&(I(2),R("routerLink",Ng(3,U3)),I(5),R("routerLink",Ng(4,B3)),I(3),R("routerLink",Ut(5,$3,r.authService.currentUserId)))},dependencies:[rt,zt,At,Dr],styles:[".custom-navbar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9)!important}.navbar-brand[_ngcontent-%COMP%], .custom-link[_ngcontent-%COMP%]{color:#fff!important;font-weight:500;transition:color .2s}.custom-link[_ngcontent-%COMP%]:hover, .custom-link[_ngcontent-%COMP%]:focus{color:#ffe6ff!important;text-decoration:underline}.btn-morado[_ngcontent-%COMP%]{background:#a259c6;color:#fff;border:none;font-weight:500;transition:background .2s,color .2s}.btn-morado[_ngcontent-%COMP%]:hover, .btn-morado[_ngcontent-%COMP%]:focus{background:#6d28d9;color:#fff}"]})};var H3=e=>["/receta",e];function W3(e,t){e&1&&(v(0,"div",16),oe(1,"div",17),y())}function z3(e,t){e&1&&(v(0,"div",18),D(1," No hay recetas disponibles. "),y())}function G3(e,t){if(e&1&&(v(0,"div",21)(1,"a",22),oe(2,"img",23),v(3,"div",24)(4,"h6",25),D(5),y(),v(6,"span",26),D(7),y(),v(8,"p",27),D(9),y()()()()),e&2){let n=t.$implicit;I(),R("routerLink",Ut(7,H3,n.id)),I(),To("alt","Imagen de ",n.titulo||n.nombre,""),R("src",n.imagenReceta||"https://via.placeholder.com/300x180?text=Sin+imagen",dn),I(3),ae(n.titulo||n.nombre||"Receta sin t\xEDtulo"),I(2),ae(n.categoria||"Sin categor\xEDa"),I(2),ae(n.descripcion||"Sin descripci\xF3n.")}}function q3(e,t){if(e&1&&(v(0,"div",19),de(1,G3,10,9,"div",20),y()),e&2){let n=le();I(),R("ngForOf",n.recetas)}}var Uf=class e{constructor(t,n){this.db=t;this.router=n}recetas=[];todasLasRecetas=[];loading=!0;busquedaNombre="";busquedaTipo="";tiposReceta=["Postres","Platos principales","Bebidas","Entrantes","Sopas","Ensaladas"];ngOnInit(){return p(this,null,function*(){try{let t=We(this.db,"recipes"),n=yield Jn(t);n.exists()?(this.todasLasRecetas=Object.entries(n.val()).map(([r,i])=>_({id:r},i)),this.recetas=[...this.todasLasRecetas]):(this.todasLasRecetas=[],this.recetas=[])}catch{this.todasLasRecetas=[],this.recetas=[]}this.loading=!1})}filtrarRecetas(){this.recetas=this.todasLasRecetas.filter(t=>{let n=this.busquedaNombre?(t.titulo||t.nombre||"").toLowerCase().includes(this.busquedaNombre.toLowerCase()):!0,r=this.busquedaTipo?(t.categoria||t.tipo||"").toLowerCase()===this.busquedaTipo.toLowerCase():!0;return n&&r})}verDetalle(t){let n=t.id||t.id_receta;n&&this.router.navigate(["/receta",n])}static \u0275fac=function(n){return new(n||e)(T(vt),T(Ce))};static \u0275cmp=Be({type:e,selectors:[["app-main"]],decls:24,vars:5,consts:[[3,"tipoSeleccionado"],[1,"explore-container"],[1,"explore-title"],[1,"explore-searchbar"],["type","text","placeholder","Buscar por nombre...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","Postres"],["value","Platos principales"],["value","Bebidas"],["value","Entrantes"],["value","Sopas"],["value","Ensaladas"],["class","text-center my-5",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","explore-grid",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"alert","alert-info","text-center"],[1,"explore-grid"],["class","explore-card",4,"ngFor","ngForOf"],[1,"explore-card"],[1,"explore-link",3,"routerLink"],[1,"explore-img",3,"src","alt"],[1,"explore-info"],[1,"explore-card-title"],[1,"badge","bg-morado","mt-1","mb-1"],[1,"explore-card-desc"]],template:function(n,r){n&1&&(v(0,"app-navbar",0),fe("tipoSeleccionado",function(){return r.filtrarRecetas()}),y(),v(1,"div",1)(2,"h2",2),D(3,"Explora Recetas"),y(),v(4,"div",3)(5,"input",4),Dt("ngModelChange",function(o){return jt(r.busquedaNombre,o)||(r.busquedaNombre=o),o}),fe("input",function(){return r.filtrarRecetas()}),y(),v(6,"select",5),Dt("ngModelChange",function(o){return jt(r.busquedaTipo,o)||(r.busquedaTipo=o),o}),fe("change",function(){return r.filtrarRecetas()}),v(7,"option",6),D(8,"Todos los tipos"),y(),v(9,"option",7),D(10,"Postres"),y(),v(11,"option",8),D(12,"Platos principales"),y(),v(13,"option",9),D(14,"Bebidas"),y(),v(15,"option",10),D(16,"Entrantes"),y(),v(17,"option",11),D(18,"Sopas"),y(),v(19,"option",12),D(20,"Ensaladas"),y()()(),de(21,W3,2,0,"div",13)(22,z3,2,0,"div",14)(23,q3,2,1,"div",15),y()),n&2&&(I(5),bt("ngModel",r.busquedaNombre),I(),bt("ngModel",r.busquedaTipo),I(15),R("ngIf",r.loading),I(),R("ngIf",!r.loading&&r.recetas.length===0),I(),R("ngIf",!r.loading&&r.recetas.length>0))},dependencies:[rt,vr,Ht,Br,zt,At,Dr,CT,DT,br,Sd,Wo,gi],styles:[".explore-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:1rem}.explore-title[_ngcontent-%COMP%]{color:#a259c6;font-weight:700;margin-bottom:2rem;text-align:center;letter-spacing:1px}.explore-searchbar[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-bottom:2rem;flex-wrap:wrap}.explore-searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .explore-searchbar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{max-width:250px}.explore-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:2rem}.explore-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.2rem;box-shadow:0 2px 12px #6c008014;overflow:hidden;transition:transform .15s,box-shadow .15s;cursor:pointer;display:flex;flex-direction:column;height:100%}.explore-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 6px 24px #6c008026}.explore-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:flex;flex-direction:column;height:100%}.explore-img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;background:#eee}.explore-info[_ngcontent-%COMP%]{padding:1rem 1.2rem 1.2rem;flex:1;display:flex;flex-direction:column;justify-content:flex-start}.explore-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#a259c6;margin-bottom:.3rem}.explore-card-desc[_ngcontent-%COMP%]{font-size:.97rem;color:#444;margin-bottom:0}.bg-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;font-size:.95rem;border-radius:.7rem;padding:.2rem .8rem;margin-bottom:.5rem}@media (max-width: 600px){.explore-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.2rem}.explore-searchbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})};function K3(e,t){if(e&1){let n=Do();v(0,"button",20),fe("click",function(){go(n);let i=le(2);return mo(i.verPerfilAutor())}),oe(1,"img",21),y()}if(e&2){let n=le(2);I(),R("src",(n.receta==null?null:n.receta.fotoPerfilAutor)||n.defaultProfile,dn)}}function Y3(e,t){if(e&1&&(v(0,"span",22),D(1),y()),e&2){let n=le(2);I(),Au(" \u23F1 ",n.receta.tiempo," ")}}function Z3(e,t){if(e&1&&(v(0,"li"),D(1),y()),e&2){let n=t.$implicit;I(),ae(n)}}function Q3(e,t){if(e&1&&(v(0,"ul"),de(1,Z3,2,1,"li",23),y()),e&2){let n=le(2);I(),R("ngForOf",n.receta.ingredientes)}}function J3(e,t){if(e&1&&(v(0,"span"),D(1),y()),e&2){let n=le(2);I(),ae(n.receta.ingredientes)}}function X3(e,t){if(e&1&&(v(0,"li"),D(1),y()),e&2){let n=t.$implicit;I(),ae(n)}}function ez(e,t){if(e&1&&(v(0,"ol"),de(1,X3,2,1,"li",23),y()),e&2){let n=le(2);I(),R("ngForOf",n.receta.pasos)}}function tz(e,t){if(e&1&&(v(0,"span"),D(1),y()),e&2){let n=le(2);I(),ae(n.receta.pasos)}}function nz(e,t){if(e&1){let n=Do();v(0,"div",2)(1,"div",3),oe(2,"img",4),y(),v(3,"div",5),de(4,K3,2,1,"button",6),v(5,"button",7),fe("click",function(){go(n);let i=le();return mo(i.toggleLike())}),oe(6,"i",8),y(),v(7,"span",9),D(8),y()(),v(9,"div",10)(10,"h2",11),D(11),y(),v(12,"div",12)(13,"span",13),D(14),y(),de(15,Y3,2,1,"span",14),y(),v(16,"p",15),D(17),y(),oe(18,"hr",16),v(19,"h5",17),D(20,"Ingredientes"),y(),de(21,Q3,2,1,"ul",18)(22,J3,2,1,"span",18),v(23,"h5",19),D(24,"Pasos"),y(),de(25,ez,2,1,"ol",18)(26,tz,2,1,"span",18),y()()}if(e&2){let n=le();I(2),R("src",n.receta.imagenReceta,dn),I(2),R("ngIf",n.receta==null?null:n.receta.id_usuario),I(2),R("ngClass",n.isLiked?"bi-heart-fill":"bi-heart"),I(2),ae(n.likesCount),I(3),ae((n.receta==null?null:n.receta.titulo)||(n.receta==null?null:n.receta.nombre)),I(3),ae(n.receta==null?null:n.receta.categoria),I(),R("ngIf",n.receta==null?null:n.receta.tiempo),I(2),ae(n.receta.descripcion),I(4),R("ngIf",n.receta.ingredientes&&n.receta.ingredientes.length&&n.receta.ingredientes[0]),I(),R("ngIf",n.receta.ingredientes&&!n.receta.ingredientes.length),I(3),R("ngIf",n.receta.pasos&&n.receta.pasos.length&&n.receta.pasos[0]),I(),R("ngIf",n.receta.pasos&&!n.receta.pasos.length)}}function rz(e,t){e&1&&(v(0,"div",24),oe(1,"div",25),y())}var Bf=class e{constructor(t,n,r,i,o){this.route=t;this.db=n;this.auth=r;this.router=i;this.cdr=o}receta=null;loading=!0;likesCount=0;isLiked=!1;userId="";defaultProfile="https://ui-avatars.com/api/?name=User&background=a259c6&color=fff";likesRef;ngOnInit(){return p(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");if(this.userId=this.auth.currentUser?.uid||"",t){let n=We(this.db,"recipes/"+t),r=yield Jn(n);r.exists()&&(this.receta=r.val(),this.receta.id=t,this.receta.id_usuario&&(yield this.fetchAutorInfo(this.receta.id_usuario)),this.setupLikes())}this.loading=!1})}fetchAutorInfo(t){return p(this,null,function*(){let n=We(this.db,"usuarios/"+t),r=yield Jn(n);if(r.exists()){let i=r.val();this.receta=U(_({},this.receta),{nombreAutor:i.nombre,fotoPerfilAutor:i.fotoPerfil&&i.fotoPerfil.trim()!==""?i.fotoPerfil:this.defaultProfile})}else this.receta=U(_({},this.receta),{nombreAutor:"Autor desconocido",fotoPerfilAutor:this.defaultProfile});this.cdr.detectChanges()})}verPerfilAutor(){this.receta?.id_usuario&&this.router.navigate(["/perfil",this.receta.id_usuario])}setupLikes(){this.receta?.id&&(this.likesRef=We(this.db,"likes/"+this.receta.id),vs(this.likesRef,t=>{let n=0;t.forEach(()=>(n++,!1)),this.likesCount=n,this.isLiked=t.hasChild(this.userId)}))}toggleLike(){return p(this,null,function*(){if(!this.userId||!this.receta?.id)return;let t=We(this.db,`likes/${this.receta.id}/${this.userId}`);if(this.isLiked)yield IM(t);else{let n=new Date().toISOString();yield Ac(t,{id:this.userId+"_"+this.receta.id,id_usuario:this.userId,id_receta:this.receta.id,fecha:n})}})}ngOnDestroy(){this.likesRef&&ms(this.likesRef)}static \u0275fac=function(n){return new(n||e)(T(ot),T(vt),T(Zn),T(Ce),T(Wn))};static \u0275cmp=Be({type:e,selectors:[["app-recipe-detail"]],decls:3,vars:2,consts:[["class","container mt-5 position-relative",4,"ngIf"],["class","text-center my-5",4,"ngIf"],[1,"container","mt-5","position-relative"],[1,"receta-img-wrapper","mb-3"],["alt","Imagen de la receta",1,"img-fluid","receta-img-main",3,"src"],[1,"floating-buttons","d-flex","flex-column","align-items-center"],["class","profile-btn mb-3","aria-label","Ver perfil del autor",3,"click",4,"ngIf"],["aria-label","Me gusta",1,"btn","btn-like-float","mb-2",3,"click"],[1,"bi",3,"ngClass"],[1,"likes-count"],[1,"receta-card","px-3","py-4","mt-2"],[1,"text-morado","mb-2","text-center"],[1,"text-center","mb-2"],[1,"badge","bg-morado","me-2"],["class","badge bg-light text-morado border border-morado ms-1",4,"ngIf"],[1,"receta-desc","mb-3","text-center"],[1,"my-4","border-0"],[1,"text-morado","mb-2"],[4,"ngIf"],[1,"text-morado","mt-4","mb-2"],["aria-label","Ver perfil del autor",1,"profile-btn","mb-3",3,"click"],["alt","Foto de perfil del autor",1,"profile-img-float",3,"src"],[1,"badge","bg-light","text-morado","border","border-morado","ms-1"],[4,"ngFor","ngForOf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"]],template:function(n,r){n&1&&(oe(0,"app-navbar"),de(1,nz,27,12,"div",0)(2,rz,2,0,"div",1)),n&2&&(I(),R("ngIf",!r.loading&&r.receta),I(),R("ngIf",r.loading))},dependencies:[rt,Zs,vr,Ht,Br],styles:["body[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{background:#fff!important}.receta-card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:none;margin-top:0;position:relative;z-index:1;padding-left:0;padding-right:0}.text-morado[_ngcontent-%COMP%]{color:#a259c6}.bg-morado[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff}.border-morado[_ngcontent-%COMP%]{border-color:#a259c6!important}.receta-img-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:220px;border-radius:1.2rem;overflow:hidden;box-shadow:0 4px 16px #6c00801a;background:#eaeaea}.receta-img-main[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:1.2rem}.floating-buttons[_ngcontent-%COMP%]{position:absolute;top:30px;right:24px;z-index:2}.profile-btn[_ngcontent-%COMP%]{border:none;background:none;padding:0;cursor:pointer;display:flex;justify-content:center}.profile-img-float[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:cover;border-radius:50%;border:3px solid #a259c6;background:#fff;box-shadow:0 2px 8px #6c00801a;transition:border-color .2s}.profile-btn[_ngcontent-%COMP%]:hover   .profile-img-float[_ngcontent-%COMP%]{border-color:#6d28d9}.btn-like-float[_ngcontent-%COMP%]{background:#fff;border:3px solid #a259c6;border-radius:50%;width:56px;height:56px;display:flex;align-items:center;justify-content:center;color:#a259c6;font-size:2rem;box-shadow:0 2px 8px #6c00801a;transition:border-color .2s,color .2s;padding:0}.btn-like-float[_ngcontent-%COMP%]:hover{border-color:#6d28d9;color:#6d28d9}.bi-heart-fill[_ngcontent-%COMP%]{color:#a259c6}.likes-count[_ngcontent-%COMP%]{color:#a259c6;font-weight:700;font-size:1.1rem;margin-top:2px;text-align:center}.receta-desc[_ngcontent-%COMP%]{color:#444;font-size:1.1rem}hr[_ngcontent-%COMP%]{border-top:1px solid #ccc}",".receta-card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%], .receta-card-h[_ngcontent-%COMP%]{border:none!important;box-shadow:0 2px 12px #6c008014}.receta-img-main[_ngcontent-%COMP%], .receta-img[_ngcontent-%COMP%], .card-img-top[_ngcontent-%COMP%], .receta-img-thumb[_ngcontent-%COMP%]{border:none!important}hr[_ngcontent-%COMP%]{border:none!important;border-top:none!important;height:1px;background:#eee;margin:1.5rem 0}"]})};var CM=e=>({active:e}),bM=e=>({"show active":e}),DM=e=>["/receta",e];function iz(e,t){if(e&1){let n=Do();v(0,"li",10)(1,"button",11),fe("click",function(){go(n);let i=le(2);return mo(i.activeTab="meGustan")}),oe(2,"span",12),v(3,"span",13),D(4,"Favoritas"),y()()()}if(e&2){let n=le(2);I(),R("ngClass",Ut(1,CM,n.activeTab==="meGustan"))}}function oz(e,t){if(e&1&&(v(0,"div",23)(1,"a",24)(2,"div",25),oe(3,"img",26),v(4,"div",27)(5,"h6",28),D(6),y(),v(7,"p",29),D(8),y()()()()()),e&2){let n=t.$implicit;I(),R("routerLink",Ut(6,DM,n.id)),I(2),To("alt","Imagen de ",n.titulo||n.nombre,""),R("src",n.imagenReceta||"https://via.placeholder.com/300x180?text=Sin+imagen",dn),I(3),ae(n.titulo||n.nombre),I(2),ae(n.descripcion)}}function sz(e,t){if(e&1&&(v(0,"div")(1,"h5",20),D(2,"Recetas publicadas"),y(),v(3,"div",21),de(4,oz,9,8,"div",22),y()()),e&2){let n=le(3);I(4),R("ngForOf",n.userRecipes)}}function az(e,t){e&1&&(v(0,"div",30),D(1,"No has publicado ninguna receta."),y())}function cz(e,t){if(e&1&&(v(0,"div",17),de(1,sz,5,1,"div",18)(2,az,2,0,"div",19),y()),e&2){let n=le(2);R("ngClass",Ut(3,bM,n.activeTab==="misRecetas")),I(),R("ngIf",n.userRecipes.length>0),I(),R("ngIf",n.userRecipes.length===0)}}function lz(e,t){if(e&1&&(v(0,"div",23)(1,"a",24)(2,"div",25),oe(3,"img",26),v(4,"div",27)(5,"h6",28),D(6),y(),v(7,"p",29),D(8),y()()()()()),e&2){let n=t.$implicit;I(),R("routerLink",Ut(6,DM,n.id)),I(2),To("alt","Imagen de ",n.titulo||n.nombre,""),R("src",n.imagenReceta||"https://via.placeholder.com/300x180?text=Sin+imagen",dn),I(3),ae(n.titulo||n.nombre),I(2),ae(n.descripcion)}}function uz(e,t){if(e&1&&(v(0,"div")(1,"h5",20),D(2,"Recetas que te gustan"),y(),v(3,"div",21),de(4,lz,9,8,"div",22),y()()),e&2){let n=le(3);I(4),R("ngForOf",n.likedRecipes)}}function dz(e,t){e&1&&(v(0,"div",30),D(1,"No tienes recetas marcadas como favoritas."),y())}function fz(e,t){if(e&1&&(v(0,"div",17),de(1,uz,5,1,"div",18)(2,dz,2,0,"div",19),y()),e&2){let n=le(2);R("ngClass",Ut(3,bM,n.activeTab==="meGustan")),I(),R("ngIf",n.likedRecipes.length>0),I(),R("ngIf",n.likedRecipes.length===0)}}function hz(e,t){if(e&1){let n=Do();v(0,"div",2)(1,"div",3),oe(2,"img",4),v(3,"h2",5),D(4),y(),v(5,"div",6)(6,"div")(7,"span",7),D(8),y(),v(9,"div",8),D(10,"Seguidores"),y()(),v(11,"div")(12,"span",7),D(13),y(),v(14,"div",8),D(15,"Seguidos"),y()()()(),v(16,"ul",9)(17,"li",10)(18,"button",11),fe("click",function(){go(n);let i=le();return mo(i.activeTab="misRecetas")}),oe(19,"span",12),v(20,"span",13),D(21,"Mis recetas"),y()()(),de(22,iz,5,3,"li",14),y(),v(23,"div",15),de(24,cz,3,5,"div",16)(25,fz,3,5,"div",16),y()()}if(e&2){let n=le();I(2),R("src",n.user.fotoPerfil||n.defaultProfile,dn),I(2),ae("@"+n.user.username),I(4),ae(n.seguidoresCount),I(5),ae(n.seguidosCount),I(5),R("ngClass",Ut(8,CM,n.activeTab==="misRecetas")),I(4),R("ngIf",n.isOwnProfile),I(2),R("ngIf",n.activeTab==="misRecetas"),I(),R("ngIf",n.activeTab==="meGustan"&&n.isOwnProfile)}}function pz(e,t){e&1&&(v(0,"div",31),oe(1,"div",32),y())}var $f=class e{constructor(t,n,r){this.route=t;this.db=n;this.authService=r}user=null;loading=!0;defaultProfile="https://ui-avatars.com/api/?name=User&background=a259c6&color=fff";seguidoresCount=0;seguidosCount=0;userRecipes=[];likedRecipes=[];isOwnProfile=!1;likesRef;userRef;userListener;recipesRef;activeTab="misRecetas";ngOnInit(){let t=this.route.snapshot.paramMap.get("id"),n=this.authService.currentUserId;t&&(this.isOwnProfile=t===n,this.userRef=We(this.db,"usuarios/"+t),this.userListener=vs(this.userRef,r=>{r.exists()&&(this.user=r.val(),this.seguidoresCount=this.user.seguidores||0,this.seguidosCount=this.user.siguiendo||0),this.loading=!1}),this.recipesRef=wM(We(this.db,"recipes"),EM("id_usuario"),yM(t)),vs(this.recipesRef,r=>{let i=[];r.forEach(o=>{i.push(_({id:o.key},o.val()))}),this.userRecipes=i}),this.isOwnProfile&&(this.likesRef=We(this.db,"likes"),vs(this.likesRef,r=>p(this,null,function*(){let i=[];if(r.forEach(o=>{let s=o.key;o.child(n).exists()&&i.push(s)}),i.length>0){let s=(yield Jn(We(this.db,"recipes"))).val()||{};this.likedRecipes=i.map(a=>s[a]?_({id:a},s[a]):null).filter(a=>!!a)}else this.likedRecipes=[]}))))}ngOnDestroy(){this.userRef&&ms(this.userRef),this.recipesRef&&ms(this.recipesRef),this.likesRef&&ms(this.likesRef)}static \u0275fac=function(n){return new(n||e)(T(ot),T(vt),T(bn))};static \u0275cmp=Be({type:e,selectors:[["app-profile"]],decls:3,vars:2,consts:[["class","container mt-5",4,"ngIf"],["class","text-center my-5",4,"ngIf"],[1,"container","mt-5"],[1,"text-center"],["alt","Foto de perfil",1,"profile-img","mb-3",3,"src"],[1,"text-morado"],[1,"d-flex","justify-content-center","gap-4","mt-3"],[1,"fw-bold","text-morado",2,"font-size","1.3rem"],[2,"font-size","0.95rem"],["role","tablist",1,"nav","nav-tabs","custom-tabs","mt-4","justify-content-center"],["role","presentation",1,"nav-item"],["type","button","role","tab",1,"nav-link","tab-btn",3,"click","ngClass"],[1,"tab-icon"],[1,"tab-label"],["class","nav-item","role","presentation",4,"ngIf"],[1,"tab-content","mt-3"],["class","tab-pane fade",3,"ngClass",4,"ngIf"],[1,"tab-pane","fade",3,"ngClass"],[4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"text-morado","mb-3"],[1,"row","g-3"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4"],[1,"text-decoration-none",3,"routerLink"],[1,"card","receta-card-h"],[1,"card-img-top","receta-img-thumb",3,"src","alt"],[1,"card-body"],[1,"card-title","text-morado","mb-1"],[1,"card-text","small","text-muted","mb-0"],[1,"alert","alert-info","mt-3"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"]],template:function(n,r){n&1&&(oe(0,"app-navbar"),de(1,hz,26,10,"div",0)(2,pz,2,0,"div",1)),n&2&&(I(),R("ngIf",!r.loading&&r.user),I(),R("ngIf",r.loading))},dependencies:[rt,Zs,vr,Ht,Br,zt,At],styles:[".profile-img[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;border-radius:50%;border:4px solid #a259c6;box-shadow:0 2px 8px #6c00801a}.text-morado[_ngcontent-%COMP%]{color:#a259c6}",".receta-card-h[_ngcontent-%COMP%]{border-radius:1rem;box-shadow:0 2px 8px #6c008014;overflow:hidden;transition:transform .15s,box-shadow .15s;cursor:pointer;height:100%;display:flex;flex-direction:column}.receta-card-h[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 6px 24px #6c008026}.receta-img-thumb[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;background:#eee}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.card-text[_ngcontent-%COMP%]{font-size:.97rem}.custom-tabs[_ngcontent-%COMP%]{border-bottom:none;margin-bottom:.5rem}.custom-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin:0 .3rem}.tab-btn[_ngcontent-%COMP%]{border:none;background:#f8f9fa;color:#a259c6;font-weight:600;font-size:1.08rem;border-radius:1.5rem 1.5rem 0 0;padding:.7rem 1.5rem;transition:background .2s,color .2s,box-shadow .2s;box-shadow:0 2px 8px #a259c614;display:flex;align-items:center;gap:.5rem}.tab-btn.active[_ngcontent-%COMP%], .tab-btn[_ngcontent-%COMP%]:focus{background:linear-gradient(90deg,#a259c6,#6d28d9);color:#fff;box-shadow:0 4px 16px #6c008021}.tab-btn[_ngcontent-%COMP%]:hover:not(.active){background:#ece6f6;color:#6d28d9}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem;margin-right:.3rem}.tab-label[_ngcontent-%COMP%]{letter-spacing:.5px}@media (max-width: 600px){.tab-btn[_ngcontent-%COMP%]{font-size:.97rem;padding:.5rem .9rem}}"]})};var TM=[{path:"",component:ec},{path:"login",component:ec},{path:"register",component:jf},{path:"feed",component:Uf},{path:"receta/:id",component:Bf},{path:"perfil/:id",component:$f}];var SM={providers:[Sb({eventCoalescing:!0}),Tm(TM),tD(eD()),sS(()=>aS({apiKey:"AIzaSyC0cfTmaqsbSRMqPSklwkyS_NL_pQ4XbMk",authDomain:"cookshare2-fa2ff.firebaseapp.com",databaseURL:"https://cookshare2-fa2ff-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cookshare2-fa2ff",storageBucket:"cookshare2-fa2ff.appspot.com",messagingSenderId:"218177580225",appId:"1:218177580225:web:56d5b5b9bee7e96c6a7840",measurementId:"G-4Q51LZ8XKK"})),f0(()=>p0()),vM(()=>_M())]};Yg(gd,SM).catch(e=>console.error(e));

import './polyfills.server.mjs';
import{E as s,F as r,G as a,H as m,J as y,La as k,M as l,Ma as N,N as v,Na as F,O as h,Oa as M,P as C,Pa as E,Q as A,Qa as O,R as x,T as w,Va as j,Vb as P,b as u,d as c,na as S,oa as I,qa as Q,v as o,x as f,y as g,z as b,za as _}from"./chunk-UXJX5DXJ.mjs";import"./chunk-S6KH3LOX.mjs";var p=class i{constructor(t){this.http=t}apiUrl="http://localhost:3002/api/openai";ask(t){return this.http.post(this.apiUrl,{prompt:t})}static \u0275fac=function(e){return new(e||i)(c(_))};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var W=(i,t)=>({"text-end":i,"text-start":t});function z(i,t){if(i&1&&(r(0,"div",15)(1,"div",16)(2,"span",17),l(3),a()()()),i&2){let e=t.$implicit;s("ngClass",w(3,W,e.sender==="user",e.sender==="ai")),o(),s("ngClass",e.sender==="user"?"alert alert-primary d-inline-block rounded-pill px-4 py-2 mb-2":"alert alert-info d-inline-block rounded-pill px-4 py-2 mb-2"),o(2),v(e.text)}}var T=class i{constructor(t){this.openAI=t}userQuery="";loading=!1;conversation=[];askAI(){if(!this.userQuery.trim()){this.conversation.push({sender:"ai",text:"Por favor, escribe tus preferencias o pregunta."}),this.userQuery="";return}this.loading=!0,this.conversation.push({sender:"user",text:this.userQuery});let t=this.userQuery;this.userQuery="",this.openAI.ask(t).subscribe(e=>{this.conversation.push({sender:"ai",text:e.reply}),this.loading=!1},e=>{this.conversation.push({sender:"ai",text:"Error: "+(e.error?.error||"Unknown error")}),this.loading=!1})}static \u0275fac=function(e){return new(e||i)(f(p))};static \u0275cmp=g({type:i,selectors:[["app-ai-assistant"]],decls:19,vars:5,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-body","p-5"],[1,"mb-4","text-center","fw-bold",2,"background","linear-gradient(90deg, #ff9966, #ff5e62)","-webkit-background-clip","text","color","transparent"],[2,"font-size","1.2em"],[3,"ngSubmit"],[1,"mb-3"],["for","userQuery",1,"form-label","fw-semibold"],["name","userQuery","id","userQuery","rows","3","placeholder","EJ. Tengo arroz y pollo, \xBFQue puedo cocinar?",1,"form-control","rounded-3","shadow-sm",3,"ngModelChange","ngModel","disabled"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-lg","rounded-pill",3,"disabled"],[1,"chat-history","mt-4","mb-2",2,"max-height","350px","overflow-y","auto"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[2,"max-width","80%",3,"ngClass"],[2,"white-space","pre-line"]],template:function(e,n){e&1&&(m(0,"app-navbar"),r(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),l(7,"Asistente IA "),m(8,"span",6),a(),r(9,"form",7),y("ngSubmit",function(){return n.askAI()}),r(10,"div",8)(11,"label",9),l(12,"Cuentale al asistente tus necesidades o lo que necesitas:"),a(),r(13,"textarea",10),x("ngModelChange",function(d){return A(n.userQuery,d)||(n.userQuery=d),d}),a()(),r(14,"div",11)(15,"button",12),l(16),a()()(),r(17,"div",13),b(18,z,4,6,"div",14),a()()()()()()),e&2&&(o(13),C("ngModel",n.userQuery),s("disabled",n.loading),o(2),s("disabled",n.loading),o(),h(" ",n.loading?"Pensando...":"Preguntar"," "),o(2),s("ngForOf",n.conversation))},dependencies:[Q,S,I,j,O,k,N,F,E,M,P],encapsulation:2})};export{T as AiAssistantComponent};
